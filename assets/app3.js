angular.module("app",["ui.ace","ngRoute","ngSanitize"]),angular.module("app").controller("ProbController",["$scope","$routeParams","$http","$sce","$timeout",function(e,t,n,r,s){e.problem=t.problem,e.showLastTestCase=!1,e.resultCodeOutput=!1,e.showWrongTestCase=!1,e.exhibit=!0,e.message="",e.flag=!0,e.statusColor="",e.preCode="console.log(Date.now());function Solution() {};function ListNode(val,) { this.val = val; this.next = undefined};importScript(//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js)",e.postCode='\nfor (var i = 0; i < testCases.length; i++) {\n	var solution = new Solution();\n	var answer = solution.exist(testCases[i].input);console.log(testCases[i]);\n	if (answer != testCases[i].output) {\n		var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer};\n		self.postMessage(report);\n		self.close();\n		break;\n	}\n	}\nif (i==testCases.length){self.postMessage({status:"Accepted"})};',e.postCode2='\nself.addEventListener("message", function(e) {\nvar data = e.data;\nswitch (data.cmd) {\ncase "start":\nfor (var i = 0; i < data.testCases.length; i++) {\nvar solution = new Solution();\nvar answer = solution.exist(data.testCases[i].input);\nif (answer != data.testCases[i].output) {\nvar report = {status:"Incorrect Answer", should:output, wrongAnswer: answer}\nself.postMessage(report);\nself.close();\nbreak;\n}\n}\nif (i == data.testCases.length) {\nself.postMessage({status:"Accepted"});\nbreak;n}\ndefault:\nself.postMessage({status:"Unknown command"});\n};\n});',e.compare="Array.prototype.equals = function (array,order) {if (!array)return false;if (!(array instanceof Array)) return false;if (this.length != array.length)return false;if (order !== false) {for (var i = 0, l=this.length; i < l; i++) {if (this[i] instanceof Array && array[i] instanceof Array) {if (!this[i].equals(array[i]))return false;}else if (this[i] != array[i]) {return false;}}return true;}else {this.sort();array.sort();for (var i= 0, l = this.length; i<l; i++) {if (this[i] instanceof Array && array[i] instanceof Array) {if (!this[i].equals(array[i])) {return false;}}else if (this[i]!==array[i]) {return false;}}return true;}};",e.compare2="function ___compareArray___ (array1, array2) {if ((!array1) || (!array2))return false;if (array1.length != array2.length)return false;for (var i = 0, l=array1.length; i<l; i++) {if (array1[i] instanceof Array && array2[i] instanceof Array) {if (!compareArray(array1[i], array2[i]))return false;}else if (array1[i]!=array2[i]) {return false;}}return true;}",e.compare3="Number.prototype.equals = function (o) {var self = this.valueOf();return self == o;};",e.compare4="String.prototype.equals = function (o) {var self = this.valueOf();return self === o;};",e.compare5="Boolean.prototype.equals = function (o) {var self = this.valueOf();return self === o;};",e.compare6="Object.prototype.equals = function (o) {if (o === undefined || o === null) {return false;}else {if (this.val.equals(o.val)===false) {return false;}if (this.next!==undefined && this.next!== null) {return this.next.equals(o.next);}else {if (o.next!==undefined && o.next!== null) {return false;}else {return true;}}}};",e.compare7="Object.prototype.equals = function (o) {if (o === undefined || o === null) {return false;}var self = this;while (true) {if ((self===null || self===undefined) && (o===undefined || o===null))return true;if ((self===null || self===undefined) && (o!==undefined) && (o!==null))return false;if ((o===null || o===undefined) && (self!==undefined) && (self!==null))return false;if (self.val.equals(o.val)===false)return false;self = self.next; o = o.next;}};",Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&e>-9007199254740992&&9007199254740992>e&&Math.floor(e)===e}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),n.get("/api/probs/"+e.problem,{cache:!0}).success(function(t){e.insertHtml=t.dis}),n.get("/api/problems/"+e.problem,{cache:!0}).success(function(t){console.log(t),e.aceInitial=t.snippet.slice(0,t.snippet.length),e.functionName=t.functionName,e.params=t.parameters,e.returnType=t.returnType,e.resultOrder=t.order,e.inPlace=t.inPlace,e.flag=!1}),e.aceLoaded=function(t){e.editorEmbed=t;t.getSession(),t.renderer;e.editorEmbed.setFontSize("16px"),t.setOptions({maxLines:1/0,minLines:30,highlightActiveLine:!1,autoScrollEditorIntoView:!0,showPrintMargin:!1})},e.renderHtml=function(e){return r.trustAsHtml(e)},e.codeSubmissionWithWebWorker2=function(){e.showLastTestCase=!1,e.resultCodeOutput=!1,e.showWrongTestCase=!1;var t="(",r="";if(void 0!=e.params){for(var a=0;a<e.params.length-1;a++)r+="testCases[i].input."+e.params[a]+",";r+="testCases[i].input."+e.params[a]}else r="testCases[i].input";t+=r+")",n.get("/api/tests/"+e.problem.toLowerCase()).success(function(n){console.log(n.content);var r=("\nfor (var i = 0; i < testCases.length; i++) {\n	var solution = new Solution();\n	var answer = solution."+e.functionName+t+';\n	if (testCases[i].output.equals(answer) == false) {\n		var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer};\n		self.postMessage(report);\n		self.close();\n		break;\n	}\n	}\nif (i==testCases.length){self.postMessage({status:"Accepted"})};',"\nfor (var i = 0; i < testCases.length; i++) {\n	var solution = new Solution();\n	var answer;\n	if ((testCases[i].input!==undefined) && (testCases[i].input!==null)){answer = solution."+e.functionName+t+";}\n	else {answer = solution."+e.functionName+'();}\n	if(testCases[i].output===undefined || testCases[i].output === null) {if ((answer!== undefined) && (answer !== null)){var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer, input: testCases[i].input}; self.postMessage(report); self.close(); break;} }\n	else if (testCases[i].output.equals(answer) == false) {\n		var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer, input: testCases[i].input, index:i};\n		self.postMessage(report);\n		self.close();\n		break;\n	}\n	}\nif (i==testCases.length){self.postMessage({status:"Accepted"})};'),a="console.log(Date.now());var testCases = "+JSON.stringify(n.content)+";function Solution() {};",o=a+";(function sandbox() { var self = undefined;var postMessage = undefined;"+e.aceInitial+"})()\n"+e.compare+e.compare3+e.compare4+e.compare5+e.compare6+r,i=new Blob([o]),u=window.URL.createObjectURL(i),l=!1,c=new Worker(u);s(function(){0==l&&(l=!0,e.message="Exceed Time Limit",e.statusColor="red",e.exhibit=!1,c.terminate(),window.URL.revokeObjectURL(u))},2e3),c.onmessage=function(t){console.log(t.data),"Incorrect Answer"==t.data.status&&0==l?(e.message=t.data.status,e.expected=t.data.should.toString(),e.lastOutput=t.data.wrongAnswer||"undefined",e.lastInput=JSON.stringify(t.data.input)||"undefined",e.showWrongTestCase=!0,l=!0,e.statusColor="red",e.exhibit=!1,c.terminate(),window.URL.revokeObjectURL(u)):"Accepted"==t.data.status&&0==l&&(l=!0,e.message=t.data.status,e.statusColor="green",e.exhibit=!1,c.terminate(),window.URL.revokeObjectURL(u)),e.$apply()},c.onerror=function(t){l=!0,e.resultCodeOutput=!0,console.log(t.message);var n=t.message.split(":");e.message=n[0],e.details=n[1],e.lineNumber=t.lineno,e.statusColor="red",window.URL.revokeObjectURL(u),e.exhibit=!1,e.$apply()}})},e.makeImmutable=function a(e){var t={};if(("object"==typeof e&&null!==e||(Array.isArray?Array.isArray(e):e instanceof Array)||"function"==typeof e)&&(Object.freeze(e),e.label&&!t.hasOwnProperty(e.label))){t[e.label]=e;for(var n in e)e.hasOwnProperty(n)&&a(e[n])}return e},e.makeImmutableText='function makeImmutable (obj) {var map = {};if ((typeof obj === "object" && obj !== null) ||(Array.isArray? Array.isArray(obj): obj instanceof Array) ||(typeof obj === "function")) {Object.freeze(obj);if (obj.label) {if (!map.hasOwnProperty(obj.label)) {map[obj.label] = obj;for (var key in obj) {if (obj.hasOwnProperty(key)) {makeImmutable(obj[key]);}}}}}return obj;}',e.codeSubmissionWithWebWorker3=function(){e.showLastTestCase=!1,e.resultCodeOutput=!1,e.showWrongTestCase=!1;var t="(",r="";if(void 0!=e.params){for(var a=0;a<e.params.length-1;a++)r+="testCases[i].input."+e.params[a].param+",";r+="testCases[i].input."+e.params[a].param}else r="testCases[i].input";if(t+=r+")",void 0===e.responseModified)n.get("/api/tests/"+e.problem.toLowerCase()).success(function(n){e.testCases=n.content.slice(0);for(var r={content:[]},a=0;a<n.content.length;a++){r.content[a]={};for(var o=0;o<e.params.length;o++)if("ListNode"==e.params[o].realType)"valueOf()"!=e.params[o].param?(void 0===r.content[a].input&&(r.content[a].input={}),r.content[a].input[e.params[o].param]=e.constructLinkedList(n.content[a].input[e.params[o].param])):r.content[a].input=e.constructLinkedList(n.content[a].input);else if("TreeNode"==e.params[o].realType)"valueOf()"!=e.params[o].param?(void 0===r.content[a].input&&(r.content[a].input={}),r.content[a].input[e.params[o].param]=e.constructBinaryTree(n.content[a].input[e.params[o].param])):r.content[a].input=e.constructBinaryTree(n.content[a].input);else if("UndirectedGraphNode"===e.params[o].realType)if("valueOf()"!==e.params[o].param){void 0===r.content[a].input&&(r.content[a].input={});var i=e.constructUndirectedGraph(n.content[a].input[e.params[o].param]);e.makeImmutable(i),Object.defineProperty(r.content[a].input,e.params[o].param,{value:i,writable:!1,enumerable:!0,configurable:!0})}else{var i=e.constructUndirectedGraph(n.content[a].input);e.makeImmutable(i),Object.defineProperty(r.content[a],"input",{value:i,writable:!1,enumerable:!0,configurable:!0})}else"valueOf()"!==e.params[o].param?(void 0===r.content[a].input&&(r.content[a].input={}),r.content[a].input[e.params[o].param]=n.content[a].input[e.params[o].param]):r.content[a].input=n.content[a].input;"ListNode"==e.returnType||"LinkedList"==e.returnType?r.content[a].output=e.constructLinkedList(n.content[a].output):"TreeNode"==e.returnType?(console.log(a),console.log("TreeHere"),console.log(n.content[a].output),r.content[a].output=e.constructBinaryTree(n.content[a].output),console.log(r.content[a].output),r.content[a].output=e.flattenedBinaryTree(r.content[a].output),console.log(r.content[a].output)):r.content[a].output=n.content[a].output}e.responseModified=r;var u='\nself.addEventListener("message", function(e) {\nvar data = e.data;\nvar testCases = data.testCases\nswitch (data.cmd) {\ncase "start":\nfor (var i = 0; i < testCases.length; i++) {\nvar solution = new Solution();\nvar answer;\nif (data.returnType === "UndirectedGraphNode") {makeImmutable(testCases[i].input);}\nif ((testCases[i].input!==undefined) && (testCases[i].input!==null)){answer = solution.'+e.functionName+t+";}\nelse {answer = solution."+e.functionName+'();}\nif (data.inPlace !== undefined) {answer = data.inPlace ==="valueOf()"?testCases[i].input: testCases[i].input[data.inPlace];}\nif (data.returnType == "Balanced BST") {var balanceFlag = isSelfBalancing (answer); if (balanceFlag === true ) {answer = inorderTraversal(answer);} else { answer = flattenedBinaryTree(answer); answer ="[" +answer +"] is not a self-balancing tree."} }\nif (data.returnType == "TreeNode") {answer = flattenedBinaryTree(answer);}\nif (data.returnType == "UndirectedGraphNode") {var check = compareTwoUndirectedGraph(testCases[i].input, answer);if (typeof check === "string"){answer = check;} else {answer = flattenUndirectedGraph(answer);} console.log(check);}\nif(testCases[i].output===undefined || testCases[i].output === null) {if ((answer!== undefined) && (answer !== null)){var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer, input: testCases[i].input, index:i}; self.postMessage(report); self.close(); break;} }\nelse if (testCases[i].output.equals(answer,data.order) == false) {\nvar report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer , input:testCases[i].input, index:i}\nself.postMessage(report);\nself.close();\nbreak;\n}\n}\nif (i == data.testCases.length) {\nself.postMessage({status:"Accepted"});\nbreak;\n}\ndefault:\nself.postMessage({status:"Unknown command"});\n};\n});',l='"use strict";function Solution () {};',c=l+";(function sandbox() { var self = undefined;var postMessage = undefined;"+e.aceInitial+"})()\n"+e.compare+e.compare3+e.compare4+e.compare5+e.compare6+e.flattenedBinaryTreeText+e.makeImmutableText+e.flattenUndirectedGraphText+e.compareTwoUndirectedGraphText+e.isBalancedBSTText+e.inorderTraversalText+u,p=new Blob([c]),f=window.URL.createObjectURL(p),d=!1,h=new Worker(f);h.onmessage=function(t){if("Incorrect Answer"==t.data.status&&0==d){d=!0,e.message=t.data.status,e.expected=JSON.stringify(e.testCases[t.data.index].output)||"undefined";try{e.lastOutput=JSON.stringify(t.data.wrongAnswer)||"undefined"}catch(t){e.lastOutput=t.message}e.lastInput=JSON.stringify(e.testCases[t.data.index].input)||"undefined",e.showWrongTestCase=!0,d=!0,e.statusColor="red",e.exhibit=!1,h.terminate(),window.URL.revokeObjectURL(f)}else"Accepted"==t.data.status&&0==d&&(d=!0,e.message=t.data.status,e.statusColor="green",e.exhibit=!1,h.terminate(),window.URL.revokeObjectURL(f));e.$apply()},h.onerror=function(t){d=!0,e.resultCodeOutput=!0,console.log(t.message);var n=t.message.split(":");e.message=n[0],e.details=n[1],e.lineNumber=t.lineno,e.statusColor="red",window.URL.revokeObjectURL(f),e.exhibit=!1,e.$apply()},h.postMessage({cmd:"start",testCases:e.responseModified.content,order:e.resultOrder,returnType:e.returnType,inPlace:e.inPlace}),s(function(){0==d&&(d=!0,e.message="Exceed Time Limit",e.statusColor="red",e.exhibit=!1,h.terminate(),window.URL.revokeObjectURL(f))},2e3)});else{var o=(e.responseModified,'\nself.addEventListener("message", function(e) {\nvar data = e.data;\nvar testCases = data.testCases\nswitch (data.cmd) {\ncase "start":\nfor (var i = 0; i < testCases.length; i++) {\nvar solution = new Solution();\nvar answer;\nif (data.returnType === "UndirectedGraphNode") {makeImmutable(testCases[i].input);}\nif ((testCases[i].input!==undefined) && (testCases[i].input!==null)){answer = solution.'+e.functionName+t+";}\nelse {answer = solution."+e.functionName+'();}\nif (data.inPlace !== undefined) {answer = data.inPlace ==="valueOf()"?testCases[i].input: testCases[i].input[data.inPlace];}\nif (data.returnType == "Balanced BST") {var balanceFlag = isSelfBalancing (answer); if (balanceFlag === true ) {answer = inorderTraversal(answer);} else { answer = flattenedBinaryTree(answer); answer ="[" +answer +"] is not a self-balancing tree."} }\nif (data.returnType == "TreeNode") {answer = flattenedBinaryTree(answer);}\nif (data.returnType == "UndirectedGraphNode") {var check = compareTwoUndirectedGraph(testCases[i].input, answer);if (typeof check === "string"){answer = check;} else {answer = flattenUndirectedGraph(answer);} console.log(check);}\nif(testCases[i].output===undefined || testCases[i].output === null) {if ((answer!== undefined) && (answer !== null)){var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer, input: testCases[i].input, index: i}; self.postMessage(report); self.close(); break;} }\nelse if (testCases[i].output.equals(answer,data.order) == false) {\nvar report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer , input:testCases[i].input, index: i}\nself.postMessage(report);\nself.close();\nbreak;\n}\n}\nif (i == data.testCases.length) {\nself.postMessage({status:"Accepted"});\nbreak;\n}\ndefault:\nself.postMessage({status:"Unknown command"});\n};\n});'),i='"use strict";function Solution () {};',u=i+";(function sandbox() { var self = undefined;var postMessage = undefined;"+e.aceInitial+"})()\n"+e.compare+e.compare3+e.compare4+e.compare5+e.compare6+e.flattenedBinaryTreeText+e.makeImmutableText+e.flattenUndirectedGraphText+e.compareTwoUndirectedGraphText+e.isBalancedBSTText+e.inorderTraversalText+o,l=new Blob([u]),c=window.URL.createObjectURL(l),p=!1,f=new Worker(c);f.onmessage=function(t){if("Incorrect Answer"==t.data.status&&0==p){p=!0,e.message=t.data.status,e.expected=JSON.stringify(e.testCases[t.data.index].output)||"undefined";try{e.lastOutput=JSON.stringify(t.data.wrongAnswer)||"undefined"}catch(t){e.lastOutput=t.message}e.lastInput=JSON.stringify(e.testCases[t.data.index].input)||"undefined",e.showWrongTestCase=!0,e.statusColor="red",e.exhibit=!1,f.terminate(),window.URL.revokeObjectURL(c)}else"Accepted"==t.data.status&&0==p&&(p=!0,e.message=t.data.status,e.statusColor="green",e.exhibit=!1,f.terminate(),window.URL.revokeObjectURL(c));e.$apply()},f.onerror=function(t){p=!0,e.resultCodeOutput=!0,console.log(t.message);var n=t.message.split(":");e.message=n[0],e.details=n[1],e.lineNumber=t.lineno,e.statusColor="red",f.terminate(),window.URL.revokeObjectURL(c),e.exhibit=!1,e.$apply()},f.postMessage({cmd:"start",testCases:e.responseModified.content,order:e.resultOrder,returnType:e.returnType,inPlace:e.inPlace}),s(function(){0==p&&(p=!0,e.message="Exceed Time Limit",e.statusColor="red",e.exhibit=!1,f.terminate(),window.URL.revokeObjectURL(c))},2e3)}},e.codeSubmissionWithWebWorker4=function(){var t="(",n="";if(void 0==e.params){for(var r=0;r<e.params.length-1;r++)n+="testCases[i].input."+e.params[r]+",";n+="testCases[i].input"+e.params[r]}else n="testCases[i].input";t+=n+")"},e.constructLinkedList=function(e){if(!Array.isArray(e))return e;for(var t=void 0,n=e.length-1;n>=0;n--){var r={val:e[n],next:t};t=r}return t},e.constructCycleList=function(e,t){if(!Array.isArray(e))return e;for(var n,r,s=void 0,a=e.length-1;a>=0;a--){var o={val:e[a],next:s};s=o,a===e.length-1&&(n=o),a===t&&(r=o)}return n.next=r,s},e.constructBinaryTree=function(e){if(void 0===e||!Array.isArray(e)||0===e.length||"#"===e[0])return void 0;var t=[],n={val:e[0]};t.push(n);for(var r=0;r<e.length&&t.length>0;){var s=t.shift();if(!(r+1<e.length))break;var a=e[++r];if("#"==a?a=void 0:(a={val:a},t.push(a),s.left=a),!(r+1<e.length))break;var o=e[++r];"#"==o?o=void 0:(o={val:o},t.push(o),s.right=o)}return n},e.flattenedBinaryTree=function(e){var t=[];if(void 0===e||null===e)return t;var n=[];for(n.push(e);n.length>0;){var r=n.shift();null!==r&&void 0!==r?(t.push(r.val),n.push(r.left),n.push(r.right)):t.push("#")}for(var s=t.length,a=t.length-1;a>=0&&"#"===t[a];a--)s=a;if(s<t.length){var o=t.length-s;t.splice(s,o)}return t},e.flattenedBinaryTreeText='; function flattenedBinaryTree(root) {var res = [];if (root === undefined || root === null)return res;var queue = [];queue.push(root);while (queue.length>0) {var cur = queue.shift();if ((cur !== null) && (cur!== undefined)) {res.push(cur.val);queue.push(cur.left);queue.push(cur.right);}else {res.push("#");}}var mark = res.length;for (var i = res.length-1; i>=0; i--) {if (res[i]!=="#") {break;}else {mark = i;}}if (mark<res.length) {var len = res.length - mark;res.splice(mark,len);}return res;};',e.testCaseStringify=function(){},e.constructUndirectedGraph=function(e){var t={};if(void 0===e||null===e||!Array.isArray(e)||0===e.length)return void 0;var n={label:e[0],neighbors:[]};t[e[0]]=n;for(var r=null,s=0;s<e.length;s++)if("#"===e[s])r=null;else{var a;t.hasOwnProperty(e[s])?a=t[e[s]]:(a={label:e[s],neighbors:[]},t[e[s]]=a),null===r?r=a:r!==a?(r.neighbors.push(a),a.neighbors.push(r)):r.neighbors.push(a)}return n},e.flattenUndirectedGraph=function(e){var t=[];if(null===e||void 0===e)return t;var n=[],r={},s=e;for(n.push(s);n.length>0;)if(s=n.shift(),Number.isInteger(s.label)&&!r.hasOwnProperty(s.label)&&(r[s.label]=s,Array.isArray(s.neighbors)))for(var a=0;a<s.neighbors.length;a++)n.push(s.neighbors[a]);var o=[];for(var i in r)r.hasOwnProperty(i)&&o.push(r[i]);o.sort(function(e,t){return e.label-t.label});for(var u=0;u<o.length;u++)if(0==u&&t.push(o[u].label),Array.isArray(o[u].neighbors)){for(var l=0,i=0;i<o[u].neighbors.length;i++)o[u].neighbors[i].label>=o[u].label&&(0===l&&u>0&&t.push(o[u].label),t.push(o[u].neighbors[i].label),l++);(l>0||0===u)&&t.push("#")}for(;t.length>0&&"#"===t[t.length-1];)t.pop();return t},e.flattenUndirectedGraphText='function flattenUndirectedGraph(graphNode) {var res = [];if (graphNode === null || graphNode === undefined){return res;}var queue = [];var map = {};var cur = graphNode;queue.push(cur);while (queue.length > 0) {cur = queue.shift();if (Number.isInteger(cur.label) && !map.hasOwnProperty(cur.label)) {map[cur.label] = cur;if (Array.isArray(cur.neighbors)) {for (var i = 0; i < cur.neighbors.length; i++) {queue.push(cur.neighbors[i]);}}}}var ordered = [];for (var k in map) {if (map.hasOwnProperty(k)) {ordered.push(map[k]);}}ordered.sort(function (a,b) {return a.label - b.label;});for (var j = 0; j < ordered.length; j++) {if (j==0){res.push(ordered[j].label);}if (Array.isArray(ordered[j].neighbors)) {var count = 0;for (var k =0; k < ordered[j].neighbors.length; k++) {if (ordered[j].neighbors[k].label >= ordered[j].label) {if(count === 0 && j>0){res.push(ordered[j].label);}res.push(ordered[j].neighbors[k].label);count++;}}if (count>0 || j===0){res.push("#");}}}while (res.length>0 && res[res.length-1]=== "#") {res.pop();}return res;};',e.compareGraph=function(){},e.compareTwoUndirectedGraph=function(e,t){if((void 0===e||null===e)&&void 0!==t&&null!==t)return!1;if(!(void 0!==e&&null!==e||void 0!==t&&null!==t))return!0;if(void 0!==e&&null!==e&&(void 0===t||null===t))return!1;if(e===t)return!1;var n=e,r=t,s={},a=[],o=[];for(a.push(n),o.push(r);a.length>0;){var n=a.shift(),r=o.shift();if(console.log(n),console.log(r),(void 0===n||null===n)&&void 0!==r&&null!==r)return!1;if(void 0!==n&&null!==n&&(void 0===r||null===r))return!1;if(n===r)return!1;if(void 0!==n&&null!==n||void 0!==r&&null!==r){if(n.label!==r.label)return!1;if(s.hasOwnProperty(n.label)){if(n.label!==r.label)return!1}else{if(s[n.label]=n,!Array.isArray(r.neighbors)||n.neighbors.length!==r.neighbors.length)return!1;n.neighbors.sort(orderNeighbors),r.neighbors.sort(orderNeighbors);for(var i=0;i<n.neighbors.length;i++)a.push(n.neighbors[i]),o.push(r.neighbors[i])}}else;}return!0},e.isBalancedBSTText="function maxDepth (root) {if (root === null || root === undefined)return 0;return 1+Math.max(maxDepth(root.left), maxDepth(root.right));}function minDepth (root) {if (root === null || root === undefined)return 0;return 1+Math.min(minDepth(root.left)+minDepth(root.right));}function isSelfBalancing (root) {return (maxDepth(root)-minDepth(root)<=1)}",e.inorderTraversalText="function inorderTraversal (root) {var res = [];if (root === null || root === undefined)return res;var stack = [];while ((root!==null && root!==undefined) || stack.length>0) {if (root!== null && root!==undefined) {stack.push(root);root = root.left;} else {root = stack.pop();res.push(root.val);root = root.right;}}return res;}",e.compareTwoUndirectedGraphText='function orderNeighbors(a,b) {return a.label- b.label;}function compareTwoUndirectedGraph (graphOne, graphTwo) {if ((graphOne === undefined || graphOne === null) && (graphTwo!==undefined && graphTwo!==null))return false;if ((graphOne === undefined || graphOne === null) && (graphTwo=== undefined || graphTwo === null))return true;if ((graphOne !== undefined && graphOne !== null) && (graphTwo===undefined || graphTwo===null ))return false;var curOne = graphOne;var curTwo = graphTwo;var map1 = {}, map2= {};var queue1 = [], queue2 = [];queue1.push(curOne);queue2.push(curTwo);while (queue1.length > 0) {var curOne = queue1.shift();var curTwo = queue2.shift();console.log(curOne);console.log(curTwo);if ((curOne === undefined || curOne === null) && (curTwo!==undefined && curTwo!==null))return false;console.log("p1");if ((curOne !== undefined && curOne !== null) && (curTwo===undefined || curTwo===null ))return false;console.log("p2");if (curOne == curTwo)return "Node with label "+ curOne.label + " was not copied but a reference to the original one.";console.log("win?");if ((curOne === undefined || curOne === null) && (curTwo=== undefined || curTwo === null)) {} else {console.log(curOne.label); console.log(curTwo.label);if (curOne.label!== curTwo.label)return false;console.log("p3");if (!map1.hasOwnProperty(curOne.label)) {map1[curOne.label] = curOne;if (!Array.isArray(curTwo.neighbors)|| curOne.neighbors.length !== curTwo.neighbors.length)return false;curOne.neighbors.sort(orderNeighbors);curTwo.neighbors.sort(orderNeighbors);for (var i = 0; i < curOne.neighbors.length; i++ ) {queue1.push(curOne.neighbors[i]);queue2.push(curTwo.neighbors[i]);}} else {if (curOne.label !== curTwo.label)return false;}}}console.log("pass");return true;};'}]),angular.module("app").controller("ApplicationCtrl",["$scope",function(e){e.$on("login",function(t,n){e.currentUser=n})}]),angular.module("app").service("CodeSvc",["$http",function(e){var t=this;console.log(e.defaults.headers.common["X-Auth"]),this.fetchSubmissions=function(){return e.get("api/submissions",{headers:{"X-Auth":t.token}})},this.create=function(t){return e.post("/api/submissions",t)}}]),angular.module("app").controller("LoginCtrl",["$scope","UserSvc",function(e,t){e.login=function(n,r){t.login(n,r).then(function(t){e.$emit("login",t)})}}]),angular.module("app").controller("PostsCtrl",["$scope","PostsSvc",function(e,t){e.addPost=function(){e.postBody&&t.create({body:e.postBody}).success(function(t){e.posts.unshift(t),e.postBody=null})},t.fetch().success(function(t){e.posts=t})}]),angular.module("app").service("PostsSvc",["$http",function(e){this.fetch=function(){return e.get("/api/posts")},this.create=function(t){return e.post("/api/posts",t)}}]),angular.module("app").controller("ProblemCtrl",["$scope","$routeParams","$http","$sce",function(e,t,n){e.problem=t.problem,e.preCode="function Solution() {};",e.postCode='\nfor (var i = 0; i < testCases.length; i++) {\n	var solution = new Solution();\n	var answer = solution.exist(testCases[i].input);console.log(testCases[i]);\n	if (answer != testCases[i].output) {\n		var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer};\n		self.postMessage(report);\n		self.close();\n		break;\n	}\n	}\nif (i==testCases.length){self.postMessage({status:"Accepted"})};',e.postCode2='\nself.addEventListener("message", function(e) {\nvar data = e.data;\nswitch (data.cmd) {\ncase "start":\nfor (var i = 0; i < data.testCases.length; i++) {\nvar solution = new Solution();\nvar answer = solution.exist(data.testCases[i].input);\nif (answer != data.testCases[i].output) {\nvar report = {status:"Incorrect Answer", should:output, wrongAnswer: answer}\nself.postMessage(report);\nself.close();\nbreak;\n}\n}\nif (i == data.testCases.length) {\nself.postMessage({status:"Accepted"});\nbreak;n}\ndefault:\nself.postMessage({status:"Unknown command"});\n};\n})',e.compare="Array.prototype.equals = function (array) {if (!array)return false;if (this.length != array.length)return false;for (var i = 0, l=this.length; i < l; i++) {if (this[i] instanceof Array && array[i] instanceof Array) {if (!this[i].equals(array[i]))return false;}else if (this[i] != array[i]) {return false;}}return true;}",e.compare2="function ___compareArray___ (array1, array2) {if ((!array1) || (!array2))return false;if (array1.length != array2.length)return false;for (var i = 0, l=array1.length; i<l; i++) {if (array1[i] instanceof Array && array2[i] instanceof Array) {if (!compareArray(array1[i], array2[i]))return false;}else if (array1[i]!=array2[i]) {return false;}}return true;}",e.___compareObjects___=function(){function e(t,n){var a;if(isNaN(t)&&isNaN(n)&&"number"==typeof t&&"number"==typeof n)return!0;if(t===n)return!0;if("function"==typeof t&&"function"==typeof n||t instanceof Date&&n instanceof Date||t instanceof RegExp&&n instanceof RegExp||t instanceof String&&n instanceof String||t instanceof Number&&n instanceof Number)return t.toString()===n.toString();if(t.isPrototypeOf(n)||n.isPrototypeOf(t))return!1;if(t.constructor!==n.constructor)return!1;if(t.prototype!==n.prototype)return!1;if(r.indexOf(t)>-1||s.indexOf(n)>-1)return!1;for(a in n){if(n.hasOwnProperty(a)!==t.hasOwnProperty(a))return!1;if(typeof n[a]!=typeof t[a])return!1}for(a in t){if(n.hasOwnProperty(a)!==t.hasOwnProperty(a))return!1;if(typeof n[a]!=typeof t[a])return!1;switch(typeof t[a]){case"object":case"function":if(r.push(t),s.push(n),!e(t[a],n[a]))return!1;r.pop(),s.pop();break;default:if(t[a]!==n[a])return!1}}return!0}var t,n,r,s;if(arguments.length<1)return!0;for(t=1,n=arguments.length;n>t;t++)if(r=[],s=[],!e(arguments[0],arguments[t]))return!1;return!0},e.flag=!0,e.aceLoaded=function(t){e.editorEmbed=t;t.getSession(),t.renderer;e.editorEmbed.setFontSize("16px")},n.get("/api/problems/"+e.problem).success(function(t){console.log(t),e.aceInitial=t.snippet.slice(0,t.snippet.length),e.functionName=t.functionName,e.params=t.parameters,e.flag=!1}),e.codeSubmission=function(){var t,n=document.getElementById("scriptContainer");n&&n.parentNode.removeChild(n),t=document.createElement("script"),t.id="scriptContainer",t.text=e.editorEmbed.getValue()+";console.log("+e.flag+")",document.getElementsByClassName("container")[0].appendChild(t)},e.pureCodeSubmission=function(){var t=e.aceInitial;CodeSvc.create(t)},e.codeSubmissionWithWebWorker=function(){n.get("/api/tests/"+e.problem.toLowerCase()).success(function(t){console.log(t.content);var n=(e.preCode,"var testCases = "+JSON.stringify(t.content)+";function Solution() {};"+e.aceInitial+e.postCode2);console.log(n);var r=new Blob([n]),s=window.URL.createObjectURL(r),a=new Worker(s);a.onmessage=function(e){console.log(e.data)},a.onerror=function(e){console.log(e.message)}})},e.codeSubmissionWithWebWorker2=function(){var t="(",r="";if(void 0!=e.params){for(var s=0;s<e.params.length-1;s++)r+="testCases[i].input."+e.params[s]+",";r+="testCases[i].input."+e.params[s]}else r="testCases[i].input";t+=r+")",n.get("/api/tests/"+e.problem.toLowerCase()).success(function(n){var r="\nfor (var i = 0; i < testCases.length; i++) {\n	var solution = new Solution();\n	var answer = solution."+e.functionName+t+';\n	if (answer.equals(testCases[i].output) == false) {\n		var report = {status:"Incorrect Answer", should:testCases[i].output, wrongAnswer: answer};\n		self.postMessage(report);\n		self.close();\n		break;\n	}\n	}\nif (i==testCases.length){self.postMessage({status:"Accepted"})};',s="var testCases = "+JSON.stringify(n.content)+";function Solution() {};",a=s+e.aceInitial+"\n"+e.compare+r,o=new Blob([a]),i=window.URL.createObjectURL(o),u=new Worker(i);u.onmessage=function(e){console.log(e.data)},u.onerror=function(e){console.log(e.message)}})},e.codeSubmissionWithWebWorker3=function(){var t="(",r="";if(void 0==e.params){for(var s=0;s<e.params.length-1;s++)r+="testCases[i].input."+e.params[s]+",";r+="testCases[i].input"+e.params[s]}else r="testCases[i].input";t+=r+")",n.get("/api/tests/"+e.problem.toLowerCase()).success(function(n){var r='\nself.addEventListener("message", function(e) {\nvar data = e.data;\nswitch (data.cmd) {\ncase "start":\nfor (var i = 0; i < data.testCases.length; i++) {\nvar solution = new Solution();\nvar answer = solution.'+e.functionName+t+';\nif (answer != data.testCases[i].output) {\nvar report = {status:"Incorrect Answer", should:output, wrongAnswer: answer}\nself.postMessage(report);\nself.close();\nbreak;\n}\n}\nif (i == data.testCases.length) {\nself.postMessage({status:"Accepted"});\nbreak;n}\ndefault:\nself.postMessage({status:"Unknown command"});\n};\n})',s=e.aceInitial+r,a=new Blob([s]),o=(window.URL.createObjectURL(a),new Worker(bloubURL));o.onmessage=function(){},o.onerror=function(){},o.postMessage({cmd:"start",testCases:n.content})})},e.extractFunction=function(){},e.unitTest=function(){},e.run=function(){},e.purify=function(){},e.constructLinkedList=function(e){for(var t=void 0,n=e.length-1;n>=0;n--){var r={val:e[n],next:t};t=r}return t},e.constructTree=function(e){for(var t=void 0,n=0;n<e.length;n++);return t}}]),angular.module("app").controller("ProblemsCtrl",["$scope","$http","$location","ProbsSvc",function(e,t,n,r){r.fetch().success(function(t){e.problems=t}),e.searchFlag=!1,e.wholeTable=!0,e.predicate="",e.reverse=!1,e.select=function(){if(""===e.searchKeywords)e.wholeTable=!0,e.searchFlag=!1;
else{var t=[];e.wholeTable=!1,e.searchFlag=!0;for(var n=0;n<e.problems.length;n++)-1!=e.problems[n].name.toLowerCase().indexOf(e.searchKeywords.toLowerCase())&&t.push(e.problems[n]);e.selected=t}},e.printOut=function(e){console.log(e)},e.getProblem=function(){n.path("/")},e.sortBy=function(t){e.predicate="difficulty"===t?e.difficultyRank:t,e.reverse=!e.reverse},e.difficultyRank=function(e){return"Hard"===e.difficulty?3:"Medium"===e.difficulty?2:1}}]),angular.module("app").service("ProbsSvc",["$http",function(e){this.fetch=function(){return e.get("/api/problems")}}]),angular.module("app").controller("RegisterCtrl",["$scope","UserSvc",function(e,t){e.availableFlag=!0,e.register=function(n,r){var s=t.register(n,r);s&&s.then(function(t){t===!0?e.availableFlag=!1:(e.availableFlag=!0,e.$emit("login",t))})}}]),angular.module("app").controller("resultCtrl",["$scope",function(){}]),angular.module("app").config(["$routeProvider",function(e){e.when("/",{controller:"PostsCtrl",templateUrl:"posts.html"}).when("/register",{controller:"RegisterCtrl",templateUrl:"register.html"}).when("/login",{controller:"LoginCtrl",templateUrl:"login.html"}).when("/problems",{controller:"ProblemsCtrl",templateUrl:"problems.html"}).when("/problems/:problem",{controller:"ProblemCtrl",templateUrl:function(e){return e.problem+".html"}}).when("/submissions",{controller:"SubmissionsController",templateUrl:"submissions.html"}).when("/probs/:problem",{controller:"ProbController",templateUrl:"problem.html"})}]),angular.module("app").controller("SubmissionController",["$scope",function(){}]),angular.module("app").controller("SubmissionHistoryController",["$scope","$routeParams",function(){}]),angular.module("app").controller("SubmissionsController",["$scope","$http",function(e,t){t.get("/api/submissions").success(function(t){e.submissions=t})}]),angular.module("app").service("SubmissionsSvc",["$http",function(e){this.getSubmissions=function(){e.get("/api/submissions")},this.addSubmission=function(t){e.post("/api/submissions",t)},this.getSubmissionHistory=function(t){e.post("/api/submissionhistory",t)},this.getSingleSubmission=function(t){e.post("/api/submissionDetail",t)}}]),angular.module("app").service("UserSvc",["$http",function(e){var t=this;t.getUser=function(){return e.get("/api/users",{headers:{"X-Auth":t.token}})},t.login=function(n,r){return e.post("/api/sessions",{username:n,password:r}).then(function(n){return t.token=n.data,e.defaults.headers.common["X-Auth"]=n.data,t.getUser()})},t.register=function(n,r){return e.post("/api/users",{username:n,password:r}).then(function(e){return"true"==e.data?(console.log("used"),!0):t.login(n,r)})}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZHVsZS5qcyIsIlByb2IuY3RybC5qcyIsImFwcGxpY2F0aW9uLmN0cmwuanMiLCJjb2RlLnN2Yy5qcyIsImxvZ2luLmN0cmwuanMiLCJwb3N0cy5jdHJsLmpzIiwicG9zdHMuc3ZjLmpzIiwicHJvYmxlbS5jdHJsLmpzIiwicHJvYmxlbXMuY3RybC5qcyIsInByb2JsZW1zLnN2Yy5qcyIsInJlZ2lzdGVyLmN0cmwuanMiLCJyZXN1bHQuY3RybC5qcyIsInJvdXRlcy5qcyIsInN1Ym1pc3Npb24uY3RybC5qcyIsInN1Ym1pc3Npb25IaXN0b3J5LmN0cmwuanMiLCJzdWJtaXNzaW9ucy5jdHJsLmpzIiwic3VibWlzc2lvbnMuc3ZjLmpzIiwidXNlci5zdmMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsUUFBQSxPQUFBLE9BQUEsU0FBQSxVQUFBLGVDQUEsUUFBQSxPQUFBLE9BQUEsV0FBQSxrQkFBQSxTQUFBLGVBQUEsUUFBQSxPQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLGtCQUFBLEVBQ0EsRUFBQSxrQkFBQSxFQUNBLEVBQUEsbUJBQUEsRUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFFBQUEsR0FDQSxFQUFBLE1BQUEsRUFDQSxFQUFBLFlBQUEsR0FDQSxFQUFBLFFBQUEsK0xBQ0EsRUFBQSxTQUFBLHNhQVlBLEVBQUEsVUFBQSw2akJBd0JBLEVBQUEsUUFBQSwybkJBMENBLEVBQUEsU0FBQSxzV0FtQkEsRUFBQSxTQUFBLHdGQUtBLEVBQUEsU0FBQSx5RkFLQSxFQUFBLFNBQUEsMEZBS0EsRUFBQSxTQUFBLDhUQXlCQSxFQUFBLFNBQUEsb2NBa0JBLE9BQUEsWUFDQSxPQUFBLFVBQUEsU0FBQSxHQUNBLE1BQUEsZ0JBQUEsSUFDQSxTQUFBLElBQ0EsRUFBQSxtQkFDQSxpQkFBQSxHQUNBLEtBQUEsTUFBQSxLQUFBLElBS0EsTUFBQSxVQUNBLE1BQUEsUUFBQSxTQUFBLEdBQ0EsTUFBQSxtQkFBQSxPQUFBLFVBQUEsU0FBQSxLQUFBLEtBS0EsRUFBQSxJQUFBLGNBQUEsRUFBQSxTQUFBLE9BQUEsSUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxNQUtBLEVBQUEsSUFBQSxpQkFBQSxFQUFBLFNBQUEsT0FBQSxJQUFBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxHQUNBLEVBQUEsV0FBQSxFQUFBLFFBQUEsTUFBQSxFQUFBLEVBQUEsUUFBQSxRQUNBLEVBQUEsYUFBQSxFQUFBLGFBQ0EsRUFBQSxPQUFBLEVBQUEsV0FDQSxFQUFBLFdBQUEsRUFBQSxXQUNBLEVBQUEsWUFBQSxFQUFBLE1BQ0EsRUFBQSxRQUFBLEVBQUEsUUFDQSxFQUFBLE1BQUEsSUFJQSxFQUFBLFVBQUEsU0FBQSxHQUNBLEVBQUEsWUFBQSxDQUNBLEdBQUEsYUFDQSxFQUFBLFFBQ0EsR0FBQSxZQUFBLFlBQUEsUUFDQSxFQUFBLFlBQ0EsU0FBQSxJQUNBLFNBQUEsR0FDQSxxQkFBQSxFQUNBLDBCQUFBLEVBQ0EsaUJBQUEsS0FNQSxFQUFBLFdBQUEsU0FBQSxHQUNBLE1BQUEsR0FBQSxZQUFBLElBR0EsRUFBQSw2QkFBQSxXQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLGtCQUFBLEVBQ0EsRUFBQSxtQkFBQSxDQUNBLElBQUEsR0FBQSxJQUNBLEVBQUEsRUFDQSxJQUFBLFFBQUEsRUFBQSxPQUFBLENBQ0EsSUFBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxPQUFBLEVBQUEsSUFDQSxHQUFBLHNCQUFBLEVBQUEsT0FBQSxHQUFBLEdBRUEsSUFBQSxzQkFBQSxFQUFBLE9BQUEsT0FJQSxHQUFBLG9CQUVBLElBQUEsRUFBQSxJQUNBLEVBQUEsSUFBQSxjQUFBLEVBQUEsUUFBQSxlQUFBLFFBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxFQUFBLFFBQ0EsSUFXQSxJQVhBLDJHQUVBLEVBQUEsYUFBQSxFQUFBLHlSQVNBLDBMQUdBLEVBQUEsYUFBQSxFQUFBLGdDQUNBLEVBQUEsYUFBQSxxbUJBVUEsRUFBQSwyQ0FBQSxLQUFBLFVBQUEsRUFBQSxTQUFBLDJCQUNBLEVBQUEsRUFBQSwyRUFBQSxFQUFBLFdBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQ0EsRUFBQSxHQUFBLE9BQUEsSUFDQSxFQUFBLE9BQUEsSUFBQSxnQkFBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEdBQUEsUUFBQSxFQUNBLEdBQUEsV0FDQSxHQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsUUFBQSxvQkFDQSxFQUFBLFlBQUEsTUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFlBQ0EsT0FBQSxJQUFBLGdCQUFBLEtBRUEsS0FDQSxFQUFBLFVBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxFQUFBLE1BRUEsb0JBQUEsRUFBQSxLQUFBLFFBQUEsR0FBQSxHQUNBLEVBQUEsUUFBQSxFQUFBLEtBQUEsT0FDQSxFQUFBLFNBQUEsRUFBQSxLQUFBLE9BQUEsV0FDQSxFQUFBLFdBQUEsRUFBQSxLQUFBLGFBQUEsWUFDQSxFQUFBLFVBQUEsS0FBQSxVQUFBLEVBQUEsS0FBQSxRQUFBLFlBQ0EsRUFBQSxtQkFBQSxFQUNBLEdBQUEsRUFDQSxFQUFBLFlBQUEsTUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFlBQ0EsT0FBQSxJQUFBLGdCQUFBLElBRUEsWUFBQSxFQUFBLEtBQUEsUUFBQSxHQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsUUFBQSxFQUFBLEtBQUEsT0FDQSxFQUFBLFlBQUEsUUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFlBQ0EsT0FBQSxJQUFBLGdCQUFBLElBR0EsRUFBQSxVQUdBLEVBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxFQUNBLEVBQUEsa0JBQUEsRUFDQSxRQUFBLElBQUEsRUFBQSxRQUNBLElBQUEsR0FBQSxFQUFBLFFBQUEsTUFBQSxJQUNBLEdBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxRQUFBLEVBQUEsR0FDQSxFQUFBLFdBQUEsRUFBQSxPQUNBLEVBQUEsWUFBQSxNQUNBLE9BQUEsSUFBQSxnQkFBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsYUFNQSxFQUFBLGNBQUEsUUFBQSxHQUFBLEdBQ0EsR0FBQSxLQUNBLEtBQUEsZ0JBQUEsSUFBQSxPQUFBLElBQ0EsTUFBQSxRQUFBLE1BQUEsUUFBQSxHQUFBLFlBQUEsU0FDQSxrQkFBQSxNQUVBLE9BQUEsT0FBQSxHQUNBLEVBQUEsUUFDQSxFQUFBLGVBQUEsRUFBQSxRQUFBLENBQ0EsRUFBQSxFQUFBLE9BQUEsQ0FDQSxLQUFBLEdBQUEsS0FBQSxHQUNBLEVBQUEsZUFBQSxJQUNBLEVBQUEsRUFBQSxJQU1BLE1BQUEsSUFFQSxFQUFBLGtCQUFBLGtYQW9CQSxFQUFBLDZCQUFBLFdBQ0EsRUFBQSxrQkFBQSxFQUNBLEVBQUEsa0JBQUEsRUFDQSxFQUFBLG1CQUFBLENBQ0EsSUFBQSxHQUFBLElBQ0EsRUFBQSxFQUNBLElBQUEsUUFBQSxFQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLE9BQUEsRUFBQSxJQUNBLEdBQUEsc0JBQUEsRUFBQSxPQUFBLEdBQUEsTUFBQSxHQUVBLElBQUEsc0JBQUEsRUFBQSxPQUFBLEdBQUEsVUFJQSxHQUFBLG9CQUdBLElBREEsR0FBQSxFQUFBLElBQ0EsU0FBQSxFQUFBLGlCQUNBLEVBQUEsSUFBQSxjQUFBLEVBQUEsUUFBQSxlQUFBLFFBQUEsU0FBQSxHQUVBLEVBQUEsVUFBQSxFQUFBLFFBQUEsTUFBQSxFQUdBLEtBQUEsR0FEQSxJQUFBLFlBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxRQUFBLE9BQUEsSUFBQSxDQUNBLEVBQUEsUUFBQSxLQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxJQUNBLEdBQUEsWUFBQSxFQUFBLE9BQUEsR0FBQSxTQUNBLGFBQUEsRUFBQSxPQUFBLEdBQUEsT0FDQSxTQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsRUFBQSxRQUFBLEdBQUEsVUFDQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsT0FBQSxHQUFBLE9BQUEsRUFBQSxvQkFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsT0FBQSxHQUFBLFNBSUEsRUFBQSxRQUFBLEdBQUEsTUFBQSxFQUFBLG9CQUFBLEVBQUEsUUFBQSxHQUFBLFdBR0EsSUFBQSxZQUFBLEVBQUEsT0FBQSxHQUFBLFNBQ0EsYUFBQSxFQUFBLE9BQUEsR0FBQSxPQUNBLFNBQUEsRUFBQSxRQUFBLEdBQUEsUUFDQSxFQUFBLFFBQUEsR0FBQSxVQUNBLEVBQUEsUUFBQSxHQUFBLE1BQUEsRUFBQSxPQUFBLEdBQUEsT0FBQSxFQUFBLG9CQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsRUFBQSxPQUFBLEdBQUEsU0FJQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsb0JBQUEsRUFBQSxRQUFBLEdBQUEsV0FFQSxJQUFBLHdCQUFBLEVBQUEsT0FBQSxHQUFBLFNBQ0EsR0FBQSxjQUFBLEVBQUEsT0FBQSxHQUFBLE1BQUEsQ0FDQSxTQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsRUFBQSxRQUFBLEdBQUEsU0FDQSxJQUFBLEdBQUEsRUFBQSx5QkFBQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsT0FBQSxHQUFBLE9BQ0EsR0FBQSxjQUFBLEdBQ0EsT0FBQSxlQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsRUFBQSxPQUFBLEdBQUEsT0FDQSxNQUFBLEVBQ0EsVUFBQSxFQUNBLFlBQUEsRUFDQSxjQUFBLFFBTUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSx5QkFBQSxFQUFBLFFBQUEsR0FBQSxNQUNBLEdBQUEsY0FBQSxHQUNBLE9BQUEsZUFBQSxFQUFBLFFBQUEsR0FBQSxTQUNBLE1BQUEsRUFDQSxVQUFBLEVBQ0EsWUFBQSxFQUNBLGNBQUEsUUFNQSxjQUFBLEVBQUEsT0FBQSxHQUFBLE9BQ0EsU0FBQSxFQUFBLFFBQUEsR0FBQSxRQUNBLEVBQUEsUUFBQSxHQUFBLFVBQ0EsRUFBQSxRQUFBLEdBQUEsTUFBQSxFQUFBLE9BQUEsR0FBQSxPQUFBLEVBQUEsUUFBQSxHQUFBLE1BQUEsRUFBQSxPQUFBLEdBQUEsUUFJQSxFQUFBLFFBQUEsR0FBQSxNQUFBLEVBQUEsUUFBQSxHQUFBLEtBTUEsYUFBQSxFQUFBLFlBQUEsY0FBQSxFQUFBLFdBQ0EsRUFBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLG9CQUFBLEVBQUEsUUFBQSxHQUFBLFFBSUEsWUFBQSxFQUFBLFlBQ0EsUUFBQSxJQUFBLEdBQ0EsUUFBQSxJQUFBLFlBQ0EsUUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsRUFBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLG9CQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsUUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsRUFBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLG9CQUFBLEVBQUEsUUFBQSxHQUFBLFFBQ0EsUUFBQSxJQUFBLEVBQUEsUUFBQSxHQUFBLFNBR0EsRUFBQSxRQUFBLEdBQUEsT0FBQSxFQUFBLFFBQUEsR0FBQSxPQUlBLEVBQUEsaUJBQUEsQ0FFQSxJQUFBLEdBQUEsb1pBU0EsRUFBQSxhQUFBLEVBQUEsK0JBQ0EsRUFBQSxhQUFBLDgyQ0FzQkEsRUFBQSx3Q0FDQSxFQUFBLEVBQUEsMkVBQUEsRUFBQSxXQUFBLFNBQUEsRUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLHdCQUFBLEVBQUEsa0JBQUEsRUFBQSwyQkFBQSxFQUFBLDhCQUFBLEVBQUEsa0JBQUEsRUFBQSxxQkFBQSxFQUNBLEVBQUEsR0FBQSxPQUFBLElBQ0EsRUFBQSxPQUFBLElBQUEsZ0JBQUEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxHQUFBLFFBQUEsRUFDQSxHQUFBLFVBQUEsU0FBQSxHQUNBLEdBQUEsb0JBQUEsRUFBQSxLQUFBLFFBQUEsR0FBQSxFQUFBLENBQ0EsR0FBQSxFQUNBLEVBQUEsUUFBQSxFQUFBLEtBQUEsT0FDQSxFQUFBLFNBQUEsS0FBQSxVQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsT0FBQSxTQUFBLFdBQ0EsS0FDQSxFQUFBLFdBQUEsS0FBQSxVQUFBLEVBQUEsS0FBQSxjQUFBLFlBQ0EsTUFBQSxHQUNBLEVBQUEsV0FBQSxFQUFBLFFBS0EsRUFBQSxVQUFBLEtBQUEsVUFBQSxFQUFBLFVBQUEsRUFBQSxLQUFBLE9BQUEsUUFBQSxZQUNBLEVBQUEsbUJBQUEsRUFDQSxHQUFBLEVBQ0EsRUFBQSxZQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxZQUNBLE9BQUEsSUFBQSxnQkFBQSxPQUVBLFlBQUEsRUFBQSxLQUFBLFFBQUEsR0FBQSxJQUNBLEdBQUEsRUFDQSxFQUFBLFFBQUEsRUFBQSxLQUFBLE9BQ0EsRUFBQSxZQUFBLFFBQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxZQUNBLE9BQUEsSUFBQSxnQkFBQSxHQUdBLEdBQUEsVUFHQSxFQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLGtCQUFBLEVBQ0EsUUFBQSxJQUFBLEVBQUEsUUFDQSxJQUFBLEdBQUEsRUFBQSxRQUFBLE1BQUEsSUFDQSxHQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxFQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsT0FDQSxFQUFBLFlBQUEsTUFDQSxPQUFBLElBQUEsZ0JBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFVBR0EsRUFBQSxhQUFBLElBQUEsUUFBQSxVQUFBLEVBQUEsaUJBQUEsUUFBQSxNQUFBLEVBQUEsWUFBQSxXQUFBLEVBQUEsV0FBQSxRQUFBLEVBQUEsVUFDQSxFQUFBLFdBQ0EsR0FBQSxJQUNBLEdBQUEsRUFDQSxFQUFBLFFBQUEsb0JBQ0EsRUFBQSxZQUFBLE1BQ0EsRUFBQSxTQUFBLEVBQ0EsRUFBQSxZQUNBLE9BQUEsSUFBQSxnQkFBQSxLQUVBLFdBTUEsQ0FDQSxHQUNBLElBREEsRUFBQSxpQkFDQSxvWkFTQSxFQUFBLGFBQUEsRUFBQSwrQkFDQSxFQUFBLGFBQUEsaTNDQXNCQSxFQUFBLHdDQUNBLEVBQUEsRUFBQSwyRUFBQSxFQUFBLFdBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxTQUFBLEVBQUEsd0JBQUEsRUFBQSxrQkFBQSxFQUFBLDJCQUFBLEVBQUEsOEJBQUEsRUFBQSxrQkFBQSxFQUFBLHFCQUFBLEVBQ0EsRUFBQSxHQUFBLE9BQUEsSUFDQSxFQUFBLE9BQUEsSUFBQSxnQkFBQSxHQUNBLEdBQUEsRUFDQSxFQUFBLEdBQUEsUUFBQSxFQUNBLEdBQUEsVUFBQSxTQUFBLEdBQ0EsR0FBQSxvQkFBQSxFQUFBLEtBQUEsUUFBQSxHQUFBLEVBQUEsQ0FDQSxHQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsS0FBQSxPQUNBLEVBQUEsU0FBQSxLQUFBLFVBQUEsRUFBQSxVQUFBLEVBQUEsS0FBQSxPQUFBLFNBQUEsV0FDQSxLQUNBLEVBQUEsV0FBQSxLQUFBLFVBQUEsRUFBQSxLQUFBLGNBQUEsWUFDQSxNQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsUUFLQSxFQUFBLFVBQUEsS0FBQSxVQUFBLEVBQUEsVUFBQSxFQUFBLEtBQUEsT0FBQSxRQUFBLFlBQ0EsRUFBQSxtQkFBQSxFQUVBLEVBQUEsWUFBQSxNQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsWUFDQSxPQUFBLElBQUEsZ0JBQUEsT0FFQSxZQUFBLEVBQUEsS0FBQSxRQUFBLEdBQUEsSUFDQSxHQUFBLEVBQ0EsRUFBQSxRQUFBLEVBQUEsS0FBQSxPQUNBLEVBQUEsWUFBQSxRQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsWUFDQSxPQUFBLElBQUEsZ0JBQUEsR0FHQSxHQUFBLFVBR0EsRUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEVBQ0EsRUFBQSxrQkFBQSxFQUNBLFFBQUEsSUFBQSxFQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsUUFBQSxNQUFBLElBQ0EsR0FBQSxRQUFBLEVBQUEsR0FDQSxFQUFBLFFBQUEsRUFBQSxHQUNBLEVBQUEsV0FBQSxFQUFBLE9BQ0EsRUFBQSxZQUFBLE1BQ0EsRUFBQSxZQUNBLE9BQUEsSUFBQSxnQkFBQSxHQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsVUFHQSxFQUFBLGFBQUEsSUFBQSxRQUFBLFVBQUEsRUFBQSxpQkFBQSxRQUFBLE1BQUEsRUFBQSxZQUFBLFdBQUEsRUFBQSxXQUFBLFFBQUEsRUFBQSxVQUNBLEVBQUEsV0FDQSxHQUFBLElBQ0EsR0FBQSxFQUNBLEVBQUEsUUFBQSxvQkFDQSxFQUFBLFlBQUEsTUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLFlBQ0EsT0FBQSxJQUFBLGdCQUFBLEtBRUEsT0FLQSxFQUFBLDZCQUFBLFdBQ0EsR0FBQSxHQUFBLElBQ0EsRUFBQSxFQUNBLElBQUEsUUFBQSxFQUFBLE9BQUEsQ0FDQSxJQUFBLEdBQUEsR0FBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLE9BQUEsRUFBQSxJQUNBLEdBQUEsc0JBQUEsRUFBQSxPQUFBLEdBQUEsR0FFQSxJQUFBLHFCQUFBLEVBQUEsT0FBQSxPQUlBLEdBQUEsb0JBRUEsSUFBQSxFQUFBLEtBR0EsRUFBQSxvQkFBQSxTQUFBLEdBQ0EsSUFBQSxNQUFBLFFBQUEsR0FDQSxNQUFBLEVBRUEsS0FBQSxHQURBLEdBQUEsT0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLENBQ0EsR0FBQSxJQUFBLElBQUEsRUFBQSxHQUFBLEtBQUEsRUFDQSxHQUFBLEVBR0EsTUFBQSxJQUdBLEVBQUEsbUJBQUEsU0FBQSxFQUFBLEdBQ0EsSUFBQSxNQUFBLFFBQUEsR0FDQSxNQUFBLEVBR0EsS0FBQSxHQURBLEdBQUEsRUFEQSxFQUFBLE9BRUEsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsSUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEVBQ0EsR0FBQSxFQUNBLElBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxHQUNBLElBQUEsSUFDQSxFQUFBLEdBR0EsTUFEQSxHQUFBLEtBQUEsRUFDQSxHQUdBLEVBQUEsb0JBQUEsU0FBQSxHQUNBLEdBQUEsU0FBQSxJQUFBLE1BQUEsUUFBQSxJQUFBLElBQUEsRUFBQSxRQUFBLE1BQUEsRUFBQSxHQUNBLE1BQUEsT0FFQSxJQUFBLE1BQ0EsR0FBQSxJQUFBLEVBQUEsR0FDQSxHQUFBLEtBQUEsRUFFQSxLQURBLEdBQUEsR0FBQSxFQUNBLEVBQUEsRUFBQSxRQUFBLEVBQUEsT0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxNQUFBLEVBQUEsRUFBQSxFQUFBLFFBMkJBLEtBMUJBLElBQUEsR0FBQSxJQUFBLEVBU0EsSUFSQSxLQUFBLEVBQ0EsRUFBQSxRQUdBLEdBQUEsSUFBQSxHQUNBLEVBQUEsS0FBQSxHQUNBLEVBQUEsS0FBQSxLQUVBLEVBQUEsRUFBQSxFQUFBLFFBWUEsS0FYQSxJQUFBLEdBQUEsSUFBQSxFQUNBLE1BQUEsRUFDQSxFQUFBLFFBR0EsR0FBQSxJQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxNQUFBLEdBYUEsTUFBQSxJQUlBLEVBQUEsb0JBQUEsU0FBQSxHQUNBLEdBQUEsS0FDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLEVBQ0EsTUFBQSxFQUNBLElBQUEsS0FFQSxLQURBLEVBQUEsS0FBQSxHQUNBLEVBQUEsT0FBQSxHQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsT0FDQSxRQUFBLEdBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEtBRUEsRUFBQSxLQUFBLEVBQUEsTUFDQSxFQUFBLEtBQUEsRUFBQSxRQUdBLEVBQUEsS0FBQSxLQUlBLElBQUEsR0FEQSxHQUFBLEVBQUEsT0FDQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEdBQUEsR0FDQSxNQUFBLEVBQUEsR0FEQSxJQUtBLEVBQUEsQ0FHQSxJQUFBLEVBQUEsRUFBQSxPQUFBLENBQ0EsR0FBQSxHQUFBLEVBQUEsT0FBQSxDQUNBLEdBQUEsT0FBQSxFQUFBLEdBRUEsTUFBQSxJQUdBLEVBQUEsd0JBQUEscWZBaUNBLEVBQUEsa0JBQUEsYUFJQSxFQUFBLHlCQUFBLFNBQUEsR0FDQSxHQUNBLEtBQ0EsSUFBQSxTQUFBLEdBQUEsT0FBQSxJQUFBLE1BQUEsUUFBQSxJQUFBLElBQUEsRUFBQSxPQUNBLE1BQUEsT0FFQSxJQUFBLElBQUEsTUFBQSxFQUFBLEdBQUEsYUFDQSxHQUFBLEVBQUEsSUFBQSxDQUVBLEtBQUEsR0FEQSxHQUFBLEtBQ0EsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsR0FBQSxNQUFBLEVBQUEsR0FDQSxFQUFBLFNBQ0EsQ0FDQSxHQUFBLEVBQ0EsR0FBQSxlQUFBLEVBQUEsSUFDQSxFQUFBLEVBQUEsRUFBQSxLQUVBLEdBQUEsTUFBQSxFQUFBLEdBQUEsY0FDQSxFQUFBLEVBQUEsSUFBQSxHQUVBLE9BQUEsRUFDQSxFQUFBLEVBRUEsSUFBQSxHQUNBLEVBQUEsVUFBQSxLQUFBLEdBQ0EsRUFBQSxVQUFBLEtBQUEsSUFHQSxFQUFBLFVBQUEsS0FBQSxHQVFBLE1BQUEsSUE4QkEsRUFBQSx1QkFBQSxTQUFBLEdBQ0EsR0FBQSxLQUNBLElBQUEsT0FBQSxHQUFBLFNBQUEsRUFDQSxNQUFBLEVBQ0EsSUFBQSxNQUNBLEtBQ0EsRUFBQSxDQUVBLEtBREEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLEdBRUEsR0FEQSxFQUFBLEVBQUEsUUFDQSxPQUFBLFVBQUEsRUFBQSxTQUFBLEVBQUEsZUFBQSxFQUFBLFNBQ0EsRUFBQSxFQUFBLE9BQUEsRUFDQSxNQUFBLFFBQUEsRUFBQSxZQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLFVBQUEsR0FLQSxJQUFBLEtBQ0EsS0FBQSxHQUFBLEtBQUEsR0FDQSxFQUFBLGVBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxHQUdBLEdBQUEsS0FBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsTUFBQSxFQUFBLE9BRUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxJQUdBLEdBRkEsR0FBQSxHQUNBLEVBQUEsS0FBQSxFQUFBLEdBQUEsT0FDQSxNQUFBLFFBQUEsRUFBQSxHQUFBLFdBQUEsQ0FFQSxJQUFBLEdBREEsR0FBQSxFQUNBLEVBQUEsRUFBQSxFQUFBLEVBQUEsR0FBQSxVQUFBLE9BQUEsSUFDQSxFQUFBLEdBQUEsVUFBQSxHQUFBLE9BQUEsRUFBQSxHQUFBLFFBQ0EsSUFBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLEtBQUEsRUFBQSxHQUFBLE9BQ0EsRUFBQSxLQUFBLEVBQUEsR0FBQSxVQUFBLEdBQUEsT0FDQSxNQUdBLEVBQUEsR0FBQSxJQUFBLElBQ0EsRUFBQSxLQUFBLEtBSUEsS0FBQSxFQUFBLE9BQUEsR0FBQSxNQUFBLEVBQUEsRUFBQSxPQUFBLElBQ0EsRUFBQSxLQUdBLE9BQUEsSUFJQSxFQUFBLDJCQUFBLG1oQ0F1REEsRUFBQSxhQUFBLGFBSUEsRUFBQSwwQkFBQSxTQUFBLEVBQUEsR0FDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsRUFDQSxPQUFBLENBQ0EsTUFBQSxTQUFBLEdBQUEsT0FBQSxHQUFBLFNBQUEsR0FBQSxPQUFBLEdBQ0EsT0FBQSxDQUNBLElBQUEsU0FBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsT0FBQSxHQUNBLE9BQUEsQ0FDQSxJQUFBLElBQUEsRUFDQSxPQUFBLENBQ0EsSUFBQSxHQUFBLEVBQ0EsRUFBQSxFQUNBLEtBQ0EsS0FBQSxJQUdBLEtBRkEsRUFBQSxLQUFBLEdBQ0EsRUFBQSxLQUFBLEdBQ0EsRUFBQSxPQUFBLEdBQUEsQ0FDQSxHQUFBLEdBQUEsRUFBQSxRQUNBLEVBQUEsRUFBQSxPQUdBLElBRkEsUUFBQSxJQUFBLEdBQ0EsUUFBQSxJQUFBLElBQ0EsU0FBQSxHQUFBLE9BQUEsSUFBQSxTQUFBLEdBQUEsT0FBQSxFQUNBLE9BQUEsQ0FDQSxJQUFBLFNBQUEsR0FBQSxPQUFBLElBQUEsU0FBQSxHQUFBLE9BQUEsR0FDQSxPQUFBLENBQ0EsSUFBQSxJQUFBLEVBQ0EsT0FBQSxDQUNBLElBQUEsU0FBQSxHQUFBLE9BQUEsR0FBQSxTQUFBLEdBQUEsT0FBQSxFQUVBLENBRUEsR0FBQSxFQUFBLFFBQUEsRUFBQSxNQUNBLE9BQUEsQ0FFQSxJQUFBLEVBQUEsZUFBQSxFQUFBLFFBWUEsR0FBQSxFQUFBLFFBQUEsRUFBQSxNQUNBLE9BQUEsTUFiQSxDQUVBLEdBREEsRUFBQSxFQUFBLE9BQUEsR0FDQSxNQUFBLFFBQUEsRUFBQSxZQUFBLEVBQUEsVUFBQSxTQUFBLEVBQUEsVUFBQSxPQUNBLE9BQUEsQ0FFQSxHQUFBLFVBQUEsS0FBQSxnQkFDQSxFQUFBLFVBQUEsS0FBQSxlQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFVBQUEsT0FBQSxJQUNBLEVBQUEsS0FBQSxFQUFBLFVBQUEsSUFDQSxFQUFBLEtBQUEsRUFBQSxVQUFBLFdBUUEsT0FBQSxHQWtCQSxFQUFBLGtCQUFBLCtWQWdCQSxFQUFBLHFCQUFBLHdVQWtCQSxFQUFBLDhCQUFBLDZ0RENqbUNBLFFBQUEsT0FBQSxPQUFBLFdBQUEsbUJBQUEsU0FBQSxTQUFBLEdBQ0EsRUFBQSxJQUFBLFFBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxZQUFBLE9DREEsUUFBQSxPQUFBLE9BQUEsUUFBQSxXQUFBLFFBQUEsU0FBQSxHQUNBLEdBQUEsR0FBQSxJQUNBLFNBQUEsSUFBQSxFQUFBLFNBQUEsUUFBQSxPQUFBLFdBRUEsS0FBQSxpQkFBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLG1CQUFBLFNBQUEsU0FBQSxFQUFBLFVBSUEsS0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxPQ1hBLFFBQUEsT0FBQSxPQUFBLFdBQUEsYUFBQSxTQUFBLFVBQUEsU0FBQSxFQUFBLEdBQ0EsRUFBQSxNQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsTUFBQSxFQUFBLEdBQUEsS0FBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsU0NIQSxRQUFBLE9BQUEsT0FBQSxXQUFBLGFBQUEsU0FBQSxXQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxXQUNBLEVBQUEsVUFDQSxFQUFBLFFBRUEsS0FBQSxFQUFBLFdBQ0EsUUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLFFBQUEsR0FDQSxFQUFBLFNBQUEsUUFNQSxFQUFBLFFBQUEsUUFBQSxTQUFBLEdBQ0EsRUFBQSxNQUFBLE9DZkEsUUFBQSxPQUFBLE9BQUEsUUFBQSxZQUFBLFFBQUEsU0FBQSxHQUNBLEtBQUEsTUFBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLGVBR0EsS0FBQSxPQUFBLFNBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxhQUFBLE9DTkEsUUFBQSxPQUFBLE9BQUEsV0FBQSxlQUFBLFNBQUEsZUFBQSxRQUFBLE9BQUEsU0FBQSxFQUFBLEVBQUEsR0FFQSxFQUFBLFFBQUEsRUFBQSxRQUNBLEVBQUEsUUFBQSwwQkFDQSxFQUFBLFNBQUEsc2FBWUEsRUFBQSxVQUFBLDRqQkF3QkEsRUFBQSxRQUFBLGtVQXdCQSxFQUFBLFNBQUEsc1dBbUJBLEVBQUEscUJBQUEsV0FFQSxRQUFBLEdBQUEsRUFBQSxHQUNBLEdBQUEsRUFFQSxJQUFBLE1BQUEsSUFBQSxNQUFBLElBQUEsZ0JBQUEsSUFBQSxnQkFBQSxHQUNBLE9BQUEsQ0FHQSxJQUFBLElBQUEsRUFDQSxPQUFBLENBR0EsSUFBQSxrQkFBQSxJQUFBLGtCQUFBLElBQ0EsWUFBQSxPQUFBLFlBQUEsT0FDQSxZQUFBLFNBQUEsWUFBQSxTQUNBLFlBQUEsU0FBQSxZQUFBLFNBQ0EsWUFBQSxTQUFBLFlBQUEsUUFDQSxNQUFBLEdBQUEsYUFBQSxFQUFBLFVBSUEsSUFBQSxFQUFBLGNBQUEsSUFBQSxFQUFBLGNBQUEsR0FDQSxPQUFBLENBR0EsSUFBQSxFQUFBLGNBQUEsRUFBQSxZQUNBLE9BQUEsQ0FHQSxJQUFBLEVBQUEsWUFBQSxFQUFBLFVBQ0EsT0FBQSxDQUdBLElBQUEsRUFBQSxRQUFBLEdBQUEsSUFBQSxFQUFBLFFBQUEsR0FBQSxHQUNBLE9BQUEsQ0FHQSxLQUFBLElBQUEsR0FBQSxDQUNBLEdBQUEsRUFBQSxlQUFBLEtBQUEsRUFBQSxlQUFBLEdBQ0EsT0FBQSxDQUVBLFVBQUEsR0FBQSxVQUFBLEdBQUEsR0FDQSxPQUFBLEVBSUEsSUFBQSxJQUFBLEdBQUEsQ0FDQSxHQUFBLEVBQUEsZUFBQSxLQUFBLEVBQUEsZUFBQSxHQUNBLE9BQUEsQ0FFQSxVQUFBLEdBQUEsVUFBQSxHQUFBLEdBQ0EsT0FBQSxDQUdBLGNBQUEsR0FBQSxJQUNBLElBQUEsU0FDQSxJQUFBLFdBS0EsR0FIQSxFQUFBLEtBQUEsR0FDQSxFQUFBLEtBQUEsSUFFQSxFQUFBLEVBQUEsR0FBQSxFQUFBLElBQ0EsT0FBQSxDQUdBLEdBQUEsTUFDQSxFQUFBLEtBQ0EsTUFFQSxTQUNBLEdBQUEsRUFBQSxLQUFBLEVBQUEsR0FDQSxPQUFBLEdBTUEsT0FBQSxFQTdFQSxHQUFBLEdBQUEsRUFBQSxFQUFBLENBa0ZBLElBQUEsVUFBQSxPQUFBLEVBQ0EsT0FBQSxDQUlBLEtBQUEsRUFBQSxFQUFBLEVBQUEsVUFBQSxPQUFBLEVBQUEsRUFBQSxJQUtBLEdBSEEsS0FDQSxNQUVBLEVBQUEsVUFBQSxHQUFBLFVBQUEsSUFDQSxPQUFBLENBSUEsUUFBQSxHQUdBLEVBQUEsTUFBQSxFQUdBLEVBQUEsVUFBQSxTQUFBLEdBQ0EsRUFBQSxZQUFBLENBQ0EsR0FBQSxhQUNBLEVBQUEsUUFDQSxHQUFBLFlBQUEsWUFBQSxTQUlBLEVBQUEsSUFBQSxpQkFBQSxFQUFBLFNBQUEsUUFBQSxTQUFBLEdBQ0EsUUFBQSxJQUFBLEdBQ0EsRUFBQSxXQUFBLEVBQUEsUUFBQSxNQUFBLEVBQUEsRUFBQSxRQUFBLFFBQ0EsRUFBQSxhQUFBLEVBQUEsYUFDQSxFQUFBLE9BQUEsRUFBQSxXQUNBLEVBQUEsTUFBQSxJQXNCQSxFQUFBLGVBQUEsV0FJQSxHQUVBLEdBRkEsRUFBQSxTQUFBLGVBQUEsa0JBSUEsSUFDQSxFQUFBLFdBQUEsWUFBQSxHQUdBLEVBQUEsU0FBQSxjQUFBLFVBQ0EsRUFBQSxHQUFBLGtCQUNBLEVBQUEsS0FBQSxFQUFBLFlBQUEsV0FBQSxnQkFBQSxFQUFBLEtBQUEsSUFFQSxTQUFBLHVCQUFBLGFBQUEsR0FBQSxZQUFBLElBS0EsRUFBQSxtQkFBQSxXQUNBLEdBQUEsR0FBQSxFQUFBLFVBQ0EsU0FBQSxPQUFBLElBSUEsRUFBQSw0QkFBQSxXQUNBLEVBQUEsSUFBQSxjQUFBLEVBQUEsUUFBQSxlQUFBLFFBQUEsU0FBQSxHQUVBLFFBQUEsSUFBQSxFQUFBLFFBQ0EsSUFFQSxJQUZBLEVBQUEsUUFFQSxtQkFBQSxLQUFBLFVBQUEsRUFBQSxTQUFBLDJCQUFBLEVBQUEsV0FBQSxFQUFBLFVBQ0EsU0FBQSxJQUFBLEVBQ0EsSUFBQSxHQUFBLEdBQUEsT0FBQSxJQUNBLEVBQUEsT0FBQSxJQUFBLGdCQUFBLEdBQ0EsRUFBQSxHQUFBLFFBQUEsRUFDQSxHQUFBLFVBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxFQUFBLE9BRUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsRUFBQSxhQVFBLEVBQUEsNkJBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsSUFBQSxRQUFBLEVBQUEsT0FBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLElBQ0EsR0FBQSxzQkFBQSxFQUFBLE9BQUEsR0FBQSxHQUVBLElBQUEsc0JBQUEsRUFBQSxPQUFBLE9BSUEsR0FBQSxvQkFFQSxJQUFBLEVBQUEsSUFDQSxFQUFBLElBQUEsY0FBQSxFQUFBLFFBQUEsZUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsMkdBRUEsRUFBQSxhQUFBLEVBQUEseVJBU0EsRUFBQSxtQkFBQSxLQUFBLFVBQUEsRUFBQSxTQUFBLDJCQUNBLEVBQUEsRUFBQSxFQUFBLFdBQUEsS0FBQSxFQUFBLFFBQUEsRUFDQSxFQUFBLEdBQUEsT0FBQSxJQUNBLEVBQUEsT0FBQSxJQUFBLGdCQUFBLEdBQ0EsRUFBQSxHQUFBLFFBQUEsRUFDQSxHQUFBLFVBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxFQUFBLE9BRUEsRUFBQSxRQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsRUFBQSxhQU1BLEVBQUEsNkJBQUEsV0FDQSxHQUFBLEdBQUEsSUFDQSxFQUFBLEVBQ0EsSUFBQSxRQUFBLEVBQUEsT0FBQSxDQUNBLElBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLE9BQUEsT0FBQSxFQUFBLElBQ0EsR0FBQSxzQkFBQSxFQUFBLE9BQUEsR0FBQSxHQUVBLElBQUEscUJBQUEsRUFBQSxPQUFBLE9BSUEsR0FBQSxvQkFFQSxJQUFBLEVBQUEsSUFDQSxFQUFBLElBQUEsY0FBQSxFQUFBLFFBQUEsZUFBQSxRQUFBLFNBQUEsR0FDQSxHQUFBLEdBQUEsc05BTUEsRUFBQSxhQUFBLEVBQUEsMlVBaUJBLEVBQUEsRUFBQSxXQUFBLEVBQ0EsRUFBQSxHQUFBLE9BQUEsSUFFQSxHQURBLE9BQUEsSUFBQSxnQkFBQSxHQUNBLEdBQUEsUUFBQSxVQUNBLEdBQUEsVUFBQSxhQUdBLEVBQUEsUUFBQSxhQUlBLEVBQUEsYUFBQSxJQUFBLFFBQUEsVUFBQSxFQUFBLGFBT0EsRUFBQSxnQkFBQSxhQUlBLEVBQUEsU0FBQSxhQUlBLEVBQUEsSUFBQSxhQUlBLEVBQUEsT0FBQSxhQUlBLEVBQUEsb0JBQUEsU0FBQSxHQUVBLElBQUEsR0FEQSxHQUFBLE9BQ0EsRUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxDQUNBLEdBQUEsSUFBQSxJQUFBLEVBQUEsR0FBQSxLQUFBLEVBQ0EsR0FBQSxFQUdBLE1BQUEsSUFHQSxFQUFBLGNBQUEsU0FBQSxHQUdBLElBQUEsR0FGQSxHQUFBLE9BRUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLEtBR0EsTUFBQSxPQ2paQSxRQUFBLE9BQUEsT0FBQSxXQUFBLGdCQUFBLFNBQUEsUUFBQSxZQUFBLFdBQUEsU0FBQSxFQUFBLEVBQUEsRUFBQSxHQUNBLEVBQUEsUUFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFNBQUEsSUFFQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFlBQUEsRUFDQSxFQUFBLFVBQUEsR0FDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLE9BQUEsV0FFQSxHQUFBLEtBQUEsRUFBQSxlQUNBLEVBQUEsWUFBQSxFQUNBLEVBQUEsWUFBQTtJQUdBLENBQ0EsR0FBQSxLQUNBLEdBQUEsWUFBQSxFQUNBLEVBQUEsWUFBQSxDQUNBLEtBQUEsR0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLFNBQUEsT0FBQSxJQUNBLElBQUEsRUFBQSxTQUFBLEdBQUEsS0FBQSxjQUFBLFFBQUEsRUFBQSxlQUFBLGdCQUNBLEVBQUEsS0FBQSxFQUFBLFNBQUEsR0FJQSxHQUFBLFNBQUEsSUFJQSxFQUFBLFNBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxJQUdBLEVBQUEsV0FBQSxXQUNBLEVBQUEsS0FBQSxNQUtBLEVBQUEsT0FBQSxTQUFBLEdBRUEsRUFBQSxVQURBLGVBQUEsRUFDQSxFQUFBLGVBRUEsRUFDQSxFQUFBLFNBQUEsRUFBQSxTQUdBLEVBQUEsZUFBQSxTQUFBLEdBQ0EsTUFBQSxTQUFBLEVBQUEsV0FDQSxFQUNBLFdBQUEsRUFBQSxXQUNBLEVBRUEsTUNyREEsUUFBQSxPQUFBLE9BQUEsUUFBQSxZQUFBLFFBQUEsU0FBQSxHQUNBLEtBQUEsTUFBQSxXQUNBLE1BQUEsR0FBQSxJQUFBLHFCQ0ZBLFFBQUEsT0FBQSxPQUFBLFdBQUEsZ0JBQUEsU0FBQSxVQUFBLFNBQUEsRUFBQSxHQUNBLEVBQUEsZUFBQSxFQUNBLEVBQUEsU0FBQSxTQUFBLEVBQUEsR0FDQSxHQUFBLEdBQUEsRUFBQSxTQUFBLEVBQUEsRUFDQSxJQUNBLEVBQUEsS0FBQSxTQUFBLEdBQ0EsS0FBQSxFQUNBLEVBQUEsZUFBQSxHQUdBLEVBQUEsZUFBQSxFQUNBLEVBQUEsTUFBQSxRQUFBLFVDWEEsUUFBQSxPQUFBLE9BQUEsV0FBQSxjQUFBLFNBQUEsZUNBQSxRQUFBLE9BQUEsT0FBQSxRQUFBLGlCQUFBLFNBQUEsR0FDQSxFQUNBLEtBQUEsS0FBQSxXQUFBLFlBQUEsWUFBQSxlQUNBLEtBQUEsYUFBQSxXQUFBLGVBQUEsWUFBQSxrQkFDQSxLQUFBLFVBQUEsV0FBQSxZQUFBLFlBQUEsZUFDQSxLQUFBLGFBQUEsV0FBQSxlQUFBLFlBQUEsa0JBRUEsS0FBQSxzQkFBQSxXQUFBLGNBQUEsWUFBQSxTQUFBLEdBQUEsTUFBQSxHQUFBLFFBQUEsV0FDQSxLQUFBLGdCQUFBLFdBQUEsd0JBQUEsWUFBQSxxQkFDQSxLQUFBLG1CQUFBLFdBQUEsaUJBQUEsWUFBQSxvQkNUQSxRQUFBLE9BQUEsT0FBQSxXQUFBLHdCQUFBLFNBQUEsZUNBQSxRQUFBLE9BQUEsT0FBQSxXQUFBLCtCQUFBLFNBQUEsZUFBQSxlQ0FBLFFBQUEsT0FBQSxPQUFBLFdBQUEseUJBQUEsU0FBQSxRQUFBLFNBQUEsRUFBQSxHQUVBLEVBQUEsSUFBQSxvQkFBQSxRQUFBLFNBQUEsR0FDQSxFQUFBLFlBQUEsT0NIQSxRQUFBLE9BQUEsT0FBQSxRQUFBLGtCQUFBLFFBQUEsU0FBQSxHQUlBLEtBQUEsZUFBQSxXQUNBLEVBQUEsSUFBQSxxQkFHQSxLQUFBLGNBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSxtQkFBQSxJQUdBLEtBQUEscUJBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSx5QkFBQSxJQUdBLEtBQUEsb0JBQUEsU0FBQSxHQUNBLEVBQUEsS0FBQSx3QkFBQSxPQ2pCQSxRQUFBLE9BQUEsT0FBQSxRQUFBLFdBQUEsUUFBQSxTQUFBLEdBQ0EsR0FBQSxHQUFBLElBQ0EsR0FBQSxRQUFBLFdBQ0EsTUFBQSxHQUFBLElBQUEsY0FDQSxTQUFBLFNBQUEsRUFBQSxVQUlBLEVBQUEsTUFBQSxTQUFBLEVBQUEsR0FDQSxNQUFBLEdBQUEsS0FBQSxpQkFDQSxTQUFBLEVBQUEsU0FBQSxJQUNBLEtBQUEsU0FBQSxHQUdBLE1BRkEsR0FBQSxNQUFBLEVBQUEsS0FDQSxFQUFBLFNBQUEsUUFBQSxPQUFBLFVBQUEsRUFBQSxLQUNBLEVBQUEsYUFJQSxFQUFBLFNBQUEsU0FBQSxFQUFBLEdBQ0EsTUFBQSxHQUFBLEtBQUEsY0FDQSxTQUFBLEVBQUEsU0FBQSxJQUNBLEtBQUEsU0FBQSxHQUVBLE1BQUEsUUFBQSxFQUFBLE1BRUEsUUFBQSxJQUFBLFNBQ0EsR0FFQSxFQUFBLE1BQUEsRUFBQSIsImZpbGUiOiJhcHAzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhci5tb2R1bGUoJ2FwcCcsWyd1aS5hY2UnLCduZ1JvdXRlJywnbmdTYW5pdGl6ZSddKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQcm9iQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwkcm91dGVQYXJhbXMsJGh0dHAsJHNjZSwkdGltZW91dCkge1xuICAgICRzY29wZS5wcm9ibGVtID0gJHJvdXRlUGFyYW1zLnByb2JsZW07XG4gICAgJHNjb3BlLnNob3dMYXN0VGVzdENhc2UgPSBmYWxzZTtcbiAgICAkc2NvcGUucmVzdWx0Q29kZU91dHB1dCA9IGZhbHNlO1xuICAgICRzY29wZS5zaG93V3JvbmdUZXN0Q2FzZSA9IGZhbHNlO1xuICAgICRzY29wZS5leGhpYml0ID0gdHJ1ZTtcbiAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xuICAgICRzY29wZS5mbGFnID0gdHJ1ZTtcbiAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAnJztcbiAgICAkc2NvcGUucHJlQ29kZSA9ICdjb25zb2xlLmxvZyhEYXRlLm5vdygpKTtmdW5jdGlvbiBTb2x1dGlvbigpIHt9O2Z1bmN0aW9uIExpc3ROb2RlKHZhbCwpIHsgdGhpcy52YWwgPSB2YWw7IHRoaXMubmV4dCA9IHVuZGVmaW5lZH07aW1wb3J0U2NyaXB0KC8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2xvZGFzaC5qcy8yLjQuMS9sb2Rhc2gubWluLmpzKSc7XG4gICAgJHNjb3BlLnBvc3RDb2RlID0gJ1xcbmZvciAodmFyIGkgPSAwOyBpIDwgdGVzdENhc2VzLmxlbmd0aDsgaSsrKSB7JytcbiAgICAgICAgJ1xcblxcdHZhciBzb2x1dGlvbiA9IG5ldyBTb2x1dGlvbigpOycrXG4gICAgICAgICdcXG5cXHR2YXIgYW5zd2VyID0gc29sdXRpb24uZXhpc3QodGVzdENhc2VzW2ldLmlucHV0KTtjb25zb2xlLmxvZyh0ZXN0Q2FzZXNbaV0pOycrXG4gICAgICAgICdcXG5cXHRpZiAoYW5zd2VyICE9IHRlc3RDYXNlc1tpXS5vdXRwdXQpIHsnK1xuICAgICAgICAnXFxuXFx0XFx0dmFyIHJlcG9ydCA9IHtzdGF0dXM6XCJJbmNvcnJlY3QgQW5zd2VyXCIsIHNob3VsZDp0ZXN0Q2FzZXNbaV0ub3V0cHV0LCB3cm9uZ0Fuc3dlcjogYW5zd2VyfTsnK1xuICAgICAgICAnXFxuXFx0XFx0c2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICdcXG5cXHRcXHRzZWxmLmNsb3NlKCk7JytcbiAgICAgICAgJ1xcblxcdFxcdGJyZWFrOycrXG4gICAgICAgICdcXG5cXHR9JytcbiAgICAgICAgJ1xcblxcdH0nK1xuICAgICAgICAnXFxuaWYgKGk9PXRlc3RDYXNlcy5sZW5ndGgpe3NlbGYucG9zdE1lc3NhZ2Uoe3N0YXR1czpcIkFjY2VwdGVkXCJ9KX07JztcblxuICAgICRzY29wZS5wb3N0Q29kZTIgPSAnXFxuc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihlKSB7JytcbiAgICAgICAgJ1xcbnZhciBkYXRhID0gZS5kYXRhOycrXG4gICAgICAgICdcXG5zd2l0Y2ggKGRhdGEuY21kKSB7JytcbiAgICAgICAgJ1xcbmNhc2UgXCJzdGFydFwiOicrXG4gICAgICAgICdcXG5mb3IgKHZhciBpID0gMDsgaSA8IGRhdGEudGVzdENhc2VzLmxlbmd0aDsgaSsrKSB7JytcbiAgICAgICAgJ1xcbnZhciBzb2x1dGlvbiA9IG5ldyBTb2x1dGlvbigpOycrXG4gICAgICAgICdcXG52YXIgYW5zd2VyID0gc29sdXRpb24uZXhpc3QoZGF0YS50ZXN0Q2FzZXNbaV0uaW5wdXQpOycrXG4gICAgICAgICdcXG5pZiAoYW5zd2VyICE9IGRhdGEudGVzdENhc2VzW2ldLm91dHB1dCkgeycrXG4gICAgICAgICdcXG52YXIgcmVwb3J0ID0ge3N0YXR1czpcIkluY29ycmVjdCBBbnN3ZXJcIiwgc2hvdWxkOm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlcn0nK1xuICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICdcXG5zZWxmLmNsb3NlKCk7JytcbiAgICAgICAgJ1xcbmJyZWFrOycrXG4gICAgICAgICdcXG59JytcblxuICAgICAgICAnXFxufScrXG4gICAgICAgICdcXG5pZiAoaSA9PSBkYXRhLnRlc3RDYXNlcy5sZW5ndGgpIHsnK1xuICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZSh7c3RhdHVzOlwiQWNjZXB0ZWRcIn0pOycrXG4gICAgICAgICdcXG5icmVhazsnK1xuICAgICAgICAnblxcfScrXG4gICAgICAgICdcXG5kZWZhdWx0OicrXG4gICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJVbmtub3duIGNvbW1hbmRcIn0pOycrXG4gICAgICAgICdcXG59OycrXG4gICAgICAgICdcXG59KTsnO1xuXG4gICAgJHNjb3BlLmNvbXBhcmUgPSAnQXJyYXkucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChhcnJheSxvcmRlcikgeycrXG4gICAgICAgIC8vIGlmIHRoZSBvdGhlciBhcnJheSBpcyBhIGZhbHN5IHZhbHVlLCByZXR1cm5cbiAgICAgICAgJ2lmICghYXJyYXkpJytcbiAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnaWYgKCEoYXJyYXkgaW5zdGFuY2VvZiBBcnJheSkpIHJldHVybiBmYWxzZTsnK1xuICAgICAgICAvLyBjb21wYXJlIGxlbmd0aHMgLSBjYW4gc2F2ZSBhIGxvdCBvZiB0aW1lXG4gICAgICAgICdpZiAodGhpcy5sZW5ndGggIT0gYXJyYXkubGVuZ3RoKScrXG4gICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgJ2lmIChvcmRlciAhPT0gZmFsc2UpIHsnK1xuICAgICAgICAnZm9yICh2YXIgaSA9IDAsIGw9dGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsnK1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgJ2lmICh0aGlzW2ldIGluc3RhbmNlb2YgQXJyYXkgJiYgYXJyYXlbaV0gaW5zdGFuY2VvZiBBcnJheSkgeycrXG4gICAgICAgIC8vIHJlY3Vyc2UgaW50byB0aGUgbmVzdGVkIGFycmF5c1xuICAgICAgICAnaWYgKCF0aGlzW2ldLmVxdWFscyhhcnJheVtpXSkpJytcbiAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnfScrXG4gICAgICAgICdlbHNlIGlmICh0aGlzW2ldICE9IGFycmF5W2ldKSB7JytcbiAgICAgICAgLy8gV2FybmluZyAtIHR3byBkaWZmZXJlbnQgb2JqZWN0IGluc3RhbmNlcyB3aWxsIG5ldmVyIGJlIGVxdWFsOiB7eDoyMH0gIT0ge3g6MjB9XG4gICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgJ30nK1xuICAgICAgICAnfScrXG4gICAgICAgICdyZXR1cm4gdHJ1ZTsnK1xuICAgICAgICAnfScrXG4gICAgICAgICdlbHNlIHsnK1xuICAgICAgICAndGhpcy5zb3J0KCk7JytcbiAgICAgICAgJ2FycmF5LnNvcnQoKTsnK1xuICAgICAgICAnZm9yICh2YXIgaT0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpPGw7IGkrKykgeycrXG4gICAgICAgICdpZiAodGhpc1tpXSBpbnN0YW5jZW9mIEFycmF5ICYmIGFycmF5W2ldIGluc3RhbmNlb2YgQXJyYXkpIHsnK1xuICAgICAgICAgICAgJ2lmICghdGhpc1tpXS5lcXVhbHMoYXJyYXlbaV0pKSB7JytcbiAgICAgICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG4gICAgICAgICAgICAnfScrXG5cbiAgICAgICAgJ30nK1xuICAgICAgICAnZWxzZSBpZiAodGhpc1tpXSE9PWFycmF5W2ldKSB7JytcbiAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcblxuICAgICAgICAnfScrXG4gICAgICAgICd9JytcbiAgICAgICAgJ3JldHVybiB0cnVlOycrXG4gICAgICAgICd9JytcbiAgICAgICAgJ307JztcblxuICAgICRzY29wZS5jb21wYXJlMiA9ICdmdW5jdGlvbiBfX19jb21wYXJlQXJyYXlfX18gKGFycmF5MSwgYXJyYXkyKSB7JytcbiAgICAgICAgJ2lmICgoIWFycmF5MSkgfHwgKCFhcnJheTIpKScrXG4gICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgJ2lmIChhcnJheTEubGVuZ3RoICE9IGFycmF5Mi5sZW5ndGgpJytcbiAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnZm9yICh2YXIgaSA9IDAsIGw9YXJyYXkxLmxlbmd0aDsgaTxsOyBpKyspIHsnK1xuICAgICAgICAnaWYgKGFycmF5MVtpXSBpbnN0YW5jZW9mIEFycmF5ICYmIGFycmF5MltpXSBpbnN0YW5jZW9mIEFycmF5KSB7JytcbiAgICAgICAgJ2lmICghY29tcGFyZUFycmF5KGFycmF5MVtpXSwgYXJyYXkyW2ldKSknK1xuICAgICAgICAncmV0dXJuIGZhbHNlOycrXG5cbiAgICAgICAgJ30nK1xuICAgICAgICAnZWxzZSBpZiAoYXJyYXkxW2ldIT1hcnJheTJbaV0pIHsnK1xuICAgICAgICAncmV0dXJuIGZhbHNlOycrXG4gICAgICAgICd9JytcbiAgICAgICAgJ30nK1xuICAgICAgICAncmV0dXJuIHRydWU7JytcblxuICAgICAgICAnfSc7XG5cbiAgICAkc2NvcGUuY29tcGFyZTMgPSAnTnVtYmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgeycrXG4gICAgICAgICd2YXIgc2VsZiA9IHRoaXMudmFsdWVPZigpOycrXG4gICAgICAgICdyZXR1cm4gc2VsZiA9PSBvOycrXG4gICAgJ307JztcblxuICAgICRzY29wZS5jb21wYXJlNCA9ICdTdHJpbmcucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7JytcbiAgICAgICAgJ3ZhciBzZWxmID0gdGhpcy52YWx1ZU9mKCk7JytcbiAgICAgICAgJ3JldHVybiBzZWxmID09PSBvOycrXG4gICAgJ307JztcblxuICAgICRzY29wZS5jb21wYXJlNSA9ICdCb29sZWFuLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgeycrXG4gICAgICAgICd2YXIgc2VsZiA9IHRoaXMudmFsdWVPZigpOycrXG4gICAgICAgICdyZXR1cm4gc2VsZiA9PT0gbzsnK1xuICAgICd9Oyc7XG5cbiAgICAkc2NvcGUuY29tcGFyZTYgPSAnT2JqZWN0LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgeycrXG4gICAgICAgICdpZiAobyA9PT0gdW5kZWZpbmVkIHx8IG8gPT09IG51bGwpIHsnK1xuICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnfScrXG4gICAgICAgICdlbHNlIHsnK1xuICAgICAgICAgICAgJ2lmICh0aGlzLnZhbC5lcXVhbHMoby52YWwpPT09ZmFsc2UpIHsnK1xuICAgICAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgICAgICd9JytcbiAgICAgICAgICAgICdpZiAodGhpcy5uZXh0IT09dW5kZWZpbmVkICYmIHRoaXMubmV4dCE9PSBudWxsKSB7JytcbiAgICAgICAgICAgICAgICAncmV0dXJuIHRoaXMubmV4dC5lcXVhbHMoby5uZXh0KTsnK1xuXG4gICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAnZWxzZSB7JytcbiAgICAgICAgICAgICAgICAnaWYgKG8ubmV4dCE9PXVuZGVmaW5lZCAmJiBvLm5leHQhPT0gbnVsbCkgeycrXG4gICAgICAgICAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAgICAgJ2Vsc2UgeycrXG4gICAgICAgICAgICAgICAgICAgICdyZXR1cm4gdHJ1ZTsnK1xuICAgICAgICAgICAgICAgICd9JytcblxuICAgICAgICAgICAgJ30nK1xuICAgICAgICAnfScrXG5cbiAgICAnfTsnO1xuXG4gICAgJHNjb3BlLmNvbXBhcmU3ID0gJ09iamVjdC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsnK1xuICAgICAgICAnaWYgKG8gPT09IHVuZGVmaW5lZCB8fCBvID09PSBudWxsKSB7JytcbiAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgJ30nK1xuICAgICAgICAndmFyIHNlbGYgPSB0aGlzOycrXG4gICAgICAgICd3aGlsZSAodHJ1ZSkgeycrXG4gICAgICAgICAgICAnaWYgKChzZWxmPT09bnVsbCB8fCBzZWxmPT09dW5kZWZpbmVkKSAmJiAobz09PXVuZGVmaW5lZCB8fCBvPT09bnVsbCkpJytcbiAgICAgICAgICAgICAgICAncmV0dXJuIHRydWU7JytcbiAgICAgICAgICAgICdpZiAoKHNlbGY9PT1udWxsIHx8IHNlbGY9PT11bmRlZmluZWQpICYmIChvIT09dW5kZWZpbmVkKSAmJiAobyE9PW51bGwpKScrXG4gICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgJ2lmICgobz09PW51bGwgfHwgbz09PXVuZGVmaW5lZCkgJiYgKHNlbGYhPT11bmRlZmluZWQpICYmIChzZWxmIT09bnVsbCkpJytcbiAgICAgICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG4gICAgICAgICAgICAnaWYgKHNlbGYudmFsLmVxdWFscyhvLnZhbCk9PT1mYWxzZSknK1xuICAgICAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgICAgICdzZWxmID0gc2VsZi5uZXh0OyBvID0gby5uZXh0OycrXG4gICAgICAgICd9JytcbiAgICAnfTsnO1xuXG4gICAgaWYgKCFOdW1iZXIuaXNJbnRlZ2VyKSB7XG4gICAgICAgIE51bWJlci5pc0ludGVnZXIgPSBmdW5jdGlvbiBpc0ludGVnZXIoblZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBuVmFsID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgICAgICYmIGlzRmluaXRlKG5WYWwpXG4gICAgICAgICAgICAgICAgJiYgblZhbCA+IC05MDA3MTk5MjU0NzQwOTkyXG4gICAgICAgICAgICAgICAgJiYgblZhbCA8IDkwMDcxOTkyNTQ3NDA5OTJcbiAgICAgICAgICAgICAgICAmJiBNYXRoLmZsb29yKG5WYWwpID09PSBuVmFsO1xuICAgICAgICB9O1xuICAgIH1cblxuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KSB7XG4gICAgICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJnKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICAgICAgfTtcbiAgICB9XG5cblxuICAgICRodHRwLmdldChcIi9hcGkvcHJvYnMvXCIrJHNjb3BlLnByb2JsZW0se2NhY2hlOiB0cnVlfSkuc3VjY2VzcyhmdW5jdGlvbihkaXNjcmlwdGlvbikge1xuICAgICAgICAkc2NvcGUuaW5zZXJ0SHRtbCA9IGRpc2NyaXB0aW9uLmRpcztcbiAgICAgICAgLy9jb25zb2xlLmxvZyhkaXNjcmlwdGlvbilcblxuICAgIH0pO1xuXG4gICAgJGh0dHAuZ2V0KCcvYXBpL3Byb2JsZW1zLycrJHNjb3BlLnByb2JsZW0se2NhY2hlOiB0cnVlfSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICRzY29wZS5hY2VJbml0aWFsID0gcmVzLnNuaXBwZXQuc2xpY2UoMCxyZXMuc25pcHBldC5sZW5ndGgpO1xuICAgICAgICAkc2NvcGUuZnVuY3Rpb25OYW1lID0gcmVzLmZ1bmN0aW9uTmFtZTtcbiAgICAgICAgJHNjb3BlLnBhcmFtcyA9IHJlcy5wYXJhbWV0ZXJzO1xuICAgICAgICAkc2NvcGUucmV0dXJuVHlwZSA9IHJlcy5yZXR1cm5UeXBlO1xuICAgICAgICAkc2NvcGUucmVzdWx0T3JkZXIgPSByZXMub3JkZXI7XG4gICAgICAgICRzY29wZS5pblBsYWNlID0gcmVzLmluUGxhY2U7XG4gICAgICAgICRzY29wZS5mbGFnID0gZmFsc2U7XG5cbiAgICB9KTtcblxuICAgICRzY29wZS5hY2VMb2FkZWQgPSBmdW5jdGlvbiAoX2VkaXRvcikge1xuICAgICAgICAkc2NvcGUuZWRpdG9yRW1iZWQgPSBfZWRpdG9yO1xuICAgICAgICB2YXIgX3Nlc3Npb24gPSBfZWRpdG9yLmdldFNlc3Npb24oKTtcbiAgICAgICAgdmFyIF9yZW5kZXJlciA9IF9lZGl0b3IucmVuZGVyZXI7XG4gICAgICAgICRzY29wZS5lZGl0b3JFbWJlZC5zZXRGb250U2l6ZSgnMTZweCcpO1xuICAgICAgICBfZWRpdG9yLnNldE9wdGlvbnMoe1xuICAgICAgICAgICAgbWF4TGluZXM6IEluZmluaXR5LFxuICAgICAgICAgICAgbWluTGluZXM6IDMwLFxuICAgICAgICAgICAgaGlnaGxpZ2h0QWN0aXZlTGluZTogZmFsc2UsXG4gICAgICAgICAgICBhdXRvU2Nyb2xsRWRpdG9ySW50b1ZpZXc6IHRydWUsXG4gICAgICAgICAgICBzaG93UHJpbnRNYXJnaW46ZmFsc2VcbiAgICAgICAgfSk7XG5cblxuICAgIH07XG5cbiAgICAkc2NvcGUucmVuZGVySHRtbCA9IGZ1bmN0aW9uKGh0bWxfY29kZSkge1xuICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbChodG1sX2NvZGUpO1xuICAgIH07XG5cbiAgICAkc2NvcGUuY29kZVN1Ym1pc3Npb25XaXRoV2ViV29ya2VyMiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnNob3dMYXN0VGVzdENhc2UgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnJlc3VsdENvZGVPdXRwdXQgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLnNob3dXcm9uZ1Rlc3RDYXNlID0gZmFsc2U7XG4gICAgICAgIHZhciBwYXJlbnRoZXNlc1BhcmFtcyA9ICcoJztcbiAgICAgICAgdmFyIHBhcmFtcyA9ICcnO1xuICAgICAgICBpZiAoJHNjb3BlLnBhcmFtcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGs9MDsgazwkc2NvcGUucGFyYW1zLmxlbmd0aC0xOyBrKyspIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJ3Rlc3RDYXNlc1tpXS5pbnB1dC4nKyRzY29wZS5wYXJhbXNba10rJywnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zICs9ICd0ZXN0Q2FzZXNbaV0uaW5wdXQuJyskc2NvcGUucGFyYW1zW2tdO1xuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJhbXMgPSAndGVzdENhc2VzW2ldLmlucHV0JztcbiAgICAgICAgfVxuICAgICAgICBwYXJlbnRoZXNlc1BhcmFtcyArPSBwYXJhbXMrJyknO1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvdGVzdHMvJyskc2NvcGUucHJvYmxlbS50b0xvd2VyQ2FzZSgpKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuY29udGVudCk7XG4gICAgICAgICAgICB2YXIgcG9zdENvZGUgPSAnXFxuZm9yICh2YXIgaSA9IDA7IGkgPCB0ZXN0Q2FzZXMubGVuZ3RoOyBpKyspIHsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHR2YXIgc29sdXRpb24gPSBuZXcgU29sdXRpb24oKTsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHR2YXIgYW5zd2VyID0gc29sdXRpb24uJyskc2NvcGUuZnVuY3Rpb25OYW1lK3BhcmVudGhlc2VzUGFyYW1zKyc7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0aWYgKHRlc3RDYXNlc1tpXS5vdXRwdXQuZXF1YWxzKGFuc3dlcikgPT0gZmFsc2UpIHsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHRcXHR2YXIgcmVwb3J0ID0ge3N0YXR1czpcIkluY29ycmVjdCBBbnN3ZXJcIiwgc2hvdWxkOnRlc3RDYXNlc1tpXS5vdXRwdXQsIHdyb25nQW5zd2VyOiBhbnN3ZXJ9OycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdFxcdHNlbGYucG9zdE1lc3NhZ2UocmVwb3J0KTsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHRcXHRzZWxmLmNsb3NlKCk7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0XFx0YnJlYWs7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0fScrXG4gICAgICAgICAgICAgICAgJ1xcblxcdH0nK1xuICAgICAgICAgICAgICAgICdcXG5pZiAoaT09dGVzdENhc2VzLmxlbmd0aCl7c2VsZi5wb3N0TWVzc2FnZSh7c3RhdHVzOlwiQWNjZXB0ZWRcIn0pfTsnO1xuICAgICAgICAgICAgdmFyIHBvc3RDb2RlMiA9ICdcXG5mb3IgKHZhciBpID0gMDsgaSA8IHRlc3RDYXNlcy5sZW5ndGg7IGkrKykgeycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdHZhciBzb2x1dGlvbiA9IG5ldyBTb2x1dGlvbigpOycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdHZhciBhbnN3ZXI7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0aWYgKCh0ZXN0Q2FzZXNbaV0uaW5wdXQhPT11bmRlZmluZWQpICYmICh0ZXN0Q2FzZXNbaV0uaW5wdXQhPT1udWxsKSl7YW5zd2VyID0gc29sdXRpb24uJyskc2NvcGUuZnVuY3Rpb25OYW1lK3BhcmVudGhlc2VzUGFyYW1zKyc7fScrXG4gICAgICAgICAgICAgICAgJ1xcblxcdGVsc2Uge2Fuc3dlciA9IHNvbHV0aW9uLicrJHNjb3BlLmZ1bmN0aW9uTmFtZSsnKCk7fScrXG4gICAgICAgICAgICAgICAgJ1xcblxcdGlmKHRlc3RDYXNlc1tpXS5vdXRwdXQ9PT11bmRlZmluZWQgfHwgdGVzdENhc2VzW2ldLm91dHB1dCA9PT0gbnVsbCkge2lmICgoYW5zd2VyIT09IHVuZGVmaW5lZCkgJiYgKGFuc3dlciAhPT0gbnVsbCkpe3ZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6dGVzdENhc2VzW2ldLm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlciwgaW5wdXQ6IHRlc3RDYXNlc1tpXS5pbnB1dH07IHNlbGYucG9zdE1lc3NhZ2UocmVwb3J0KTsgc2VsZi5jbG9zZSgpOyBicmVhazt9IH0nK1xuICAgICAgICAgICAgICAgICdcXG5cXHRlbHNlIGlmICh0ZXN0Q2FzZXNbaV0ub3V0cHV0LmVxdWFscyhhbnN3ZXIpID09IGZhbHNlKSB7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0XFx0dmFyIHJlcG9ydCA9IHtzdGF0dXM6XCJJbmNvcnJlY3QgQW5zd2VyXCIsIHNob3VsZDp0ZXN0Q2FzZXNbaV0ub3V0cHV0LCB3cm9uZ0Fuc3dlcjogYW5zd2VyLCBpbnB1dDogdGVzdENhc2VzW2ldLmlucHV0LCBpbmRleDppfTsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHRcXHRzZWxmLnBvc3RNZXNzYWdlKHJlcG9ydCk7JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0XFx0c2VsZi5jbG9zZSgpOycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdFxcdGJyZWFrOycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdH0nK1xuICAgICAgICAgICAgICAgICdcXG5cXHR9JytcbiAgICAgICAgICAgICAgICAnXFxuaWYgKGk9PXRlc3RDYXNlcy5sZW5ndGgpe3NlbGYucG9zdE1lc3NhZ2Uoe3N0YXR1czpcIkFjY2VwdGVkXCJ9KX07JztcbiAgICAgICAgICAgIHZhciBwcmVDb2RlID0gJ2NvbnNvbGUubG9nKERhdGUubm93KCkpO3ZhciB0ZXN0Q2FzZXMgPSAnK0pTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmNvbnRlbnQpKyc7ZnVuY3Rpb24gU29sdXRpb24oKSB7fTsnO1xuICAgICAgICAgICAgdmFyICBjb2RlID0gcHJlQ29kZSArJzsoZnVuY3Rpb24gc2FuZGJveCgpIHsgdmFyIHNlbGYgPSB1bmRlZmluZWQ7dmFyIHBvc3RNZXNzYWdlID0gdW5kZWZpbmVkOycrICRzY29wZS5hY2VJbml0aWFsKyd9KSgpJysnXFxuJyskc2NvcGUuY29tcGFyZSArJHNjb3BlLmNvbXBhcmUzKyRzY29wZS5jb21wYXJlNCskc2NvcGUuY29tcGFyZTUrJHNjb3BlLmNvbXBhcmU2K3Bvc3RDb2RlMjtcbiAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2NvZGVdKTtcbiAgICAgICAgICAgIHZhciBibG9iVVJMID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICB2YXIgdGltZUZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKGJsb2JVUkwpO1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lRmxhZz09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgdGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IFwiRXhjZWVkIFRpbWUgTGltaXRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1c0NvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leGhpYml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwyMDAwKTtcbiAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgLy8kc2NvcGUubWVzc2FnZSA9IGUuZGF0YS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5zdGF0dXMgPT0gJ0luY29ycmVjdCBBbnN3ZXInICYmIHRpbWVGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gZS5kYXRhLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVjdGVkID0gZS5kYXRhLnNob3VsZC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE91dHB1dCA9IGUuZGF0YS53cm9uZ0Fuc3dlciB8fCBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFzdElucHV0ID0gSlNPTi5zdHJpbmdpZnkoZS5kYXRhLmlucHV0KSB8fCBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1dyb25nVGVzdENhc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXNDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhoaWJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmRhdGEuc3RhdHVzID09ICdBY2NlcHRlZCcgJiYgdGltZUZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IGUuZGF0YS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXNDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leGhpYml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xuXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Q29kZU91dHB1dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBlLm1lc3NhZ2Uuc3BsaXQoJzonKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xuICAgICAgICAgICAgICAgICRzY29wZS5kZXRhaWxzID0gbWVzc2FnZXNbMV07XG4gICAgICAgICAgICAgICAgJHNjb3BlLmxpbmVOdW1iZXIgPSBlLmxpbmVubztcbiAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChibG9iVVJMKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXhoaWJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcblxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9KVxuICAgIH07XG4gICAgJHNjb3BlLm1ha2VJbW11dGFibGUgPSBmdW5jdGlvbiBtYWtlSW1tdXRhYmxlIChvYmopIHtcbiAgICAgICAgdmFyIG1hcCA9IHt9O1xuICAgICAgICBpZiAoKHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsKSB8fFxuICAgICAgICAgICAgKEFycmF5LmlzQXJyYXk/IEFycmF5LmlzQXJyYXkob2JqKTogb2JqIGluc3RhbmNlb2YgQXJyYXkpIHx8XG4gICAgICAgICAgICAodHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiKSkge1xuXG4gICAgICAgICAgICBPYmplY3QuZnJlZXplKG9iaik7XG4gICAgICAgICAgICBpZiAob2JqLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaGFzT3duUHJvcGVydHkob2JqLmxhYmVsKSkge1xuICAgICAgICAgICAgICAgICAgICBtYXBbb2JqLmxhYmVsXSA9IG9iajtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUltbXV0YWJsZShvYmpba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgJHNjb3BlLm1ha2VJbW11dGFibGVUZXh0ID0gJ2Z1bmN0aW9uIG1ha2VJbW11dGFibGUgKG9iaikgeycrXG4gICAgICAgICd2YXIgbWFwID0ge307JytcbiAgICAgICAgJ2lmICgodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT09IG51bGwpIHx8JytcbiAgICAgICAgICAgICcoQXJyYXkuaXNBcnJheT8gQXJyYXkuaXNBcnJheShvYmopOiBvYmogaW5zdGFuY2VvZiBBcnJheSkgfHwnK1xuICAgICAgICAgICAgJyh0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIpKSB7JytcblxuICAgICAgICAgICAgJ09iamVjdC5mcmVlemUob2JqKTsnK1xuICAgICAgICAgICAgJ2lmIChvYmoubGFiZWwpIHsnK1xuICAgICAgICAgICAgICAgICdpZiAoIW1hcC5oYXNPd25Qcm9wZXJ0eShvYmoubGFiZWwpKSB7JytcbiAgICAgICAgICAgICAgICAgICAgJ21hcFtvYmoubGFiZWxdID0gb2JqOycrXG4gICAgICAgICAgICAgICAgICAgICdmb3IgKHZhciBrZXkgaW4gb2JqKSB7JytcbiAgICAgICAgICAgICAgICAgICAgICAgICdpZiAob2JqLmhhc093blByb3BlcnR5KGtleSkpIHsnK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdtYWtlSW1tdXRhYmxlKG9ialtrZXldKTsnK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgJ30nK1xuICAgICAgICAnfScrXG4gICAgICAgICdyZXR1cm4gb2JqOycrXG4gICAgJ30nXG4gICAgJHNjb3BlLmNvZGVTdWJtaXNzaW9uV2l0aFdlYldvcmtlcjMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5zaG93TGFzdFRlc3RDYXNlID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5yZXN1bHRDb2RlT3V0cHV0ID0gZmFsc2U7XG4gICAgICAgICRzY29wZS5zaG93V3JvbmdUZXN0Q2FzZSA9IGZhbHNlO1xuICAgICAgICB2YXIgcGFyZW50aGVzZXNQYXJhbXMgPSAnKCc7XG4gICAgICAgIHZhciBwYXJhbXMgPSAnJztcbiAgICAgICAgaWYgKCRzY29wZS5wYXJhbXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrPTA7IGs8JHNjb3BlLnBhcmFtcy5sZW5ndGgtMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICd0ZXN0Q2FzZXNbaV0uaW5wdXQuJyskc2NvcGUucGFyYW1zW2tdLnBhcmFtKycsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcyArPSAndGVzdENhc2VzW2ldLmlucHV0LicrJHNjb3BlLnBhcmFtc1trXS5wYXJhbTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zID0gJ3Rlc3RDYXNlc1tpXS5pbnB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50aGVzZXNQYXJhbXMgKz0gcGFyYW1zKycpJztcbiAgICAgICAgaWYgKCRzY29wZS5yZXNwb25zZU1vZGlmaWVkPT09dW5kZWZpbmVkKXtcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS90ZXN0cy8nKyRzY29wZS5wcm9ibGVtLnRvTG93ZXJDYXNlKCkpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXNwb25zZS5jb250ZW50KTtcbiAgICAgICAgICAgICAgICAkc2NvcGUudGVzdENhc2VzID0gcmVzcG9uc2UuY29udGVudC5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKCRzY29wZS50ZXN0Q2FzZXMpO1xuICAgICAgICAgICAgICAgIHZhciByZXNwb25zZU1vZGlmaWVkID0ge1wiY29udGVudFwiOltdfTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCByZXNwb25zZS5jb250ZW50Lmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCAkc2NvcGUucGFyYW1zLmxlbmd0aDsgbSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBhcmFtc1ttXS5yZWFsVHlwZSA9PSBcIkxpc3ROb2RlXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUucGFyYW1zW21dLnBhcmFtICE9IFwidmFsdWVPZigpXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLmlucHV0PT09dW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXRbJHNjb3BlLnBhcmFtc1ttXS5wYXJhbV0gPSAkc2NvcGUuY29uc3RydWN0TGlua2VkTGlzdChyZXNwb25zZS5jb250ZW50W2lkeF0uaW5wdXRbJHNjb3BlLnBhcmFtc1ttXS5wYXJhbV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXQgPSAkc2NvcGUuY29uc3RydWN0TGlua2VkTGlzdChyZXNwb25zZS5jb250ZW50W2lkeF0uaW5wdXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgkc2NvcGUucGFyYW1zW21dLnJlYWxUeXBlID09IFwiVHJlZU5vZGVcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5wYXJhbXNbbV0ucGFyYW0gIT0gXCJ2YWx1ZU9mKClcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXQ9PT11bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5pbnB1dCA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5pbnB1dFskc2NvcGUucGFyYW1zW21dLnBhcmFtXSA9ICRzY29wZS5jb25zdHJ1Y3RCaW5hcnlUcmVlKHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5pbnB1dFskc2NvcGUucGFyYW1zW21dLnBhcmFtXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5pbnB1dCA9ICRzY29wZS5jb25zdHJ1Y3RCaW5hcnlUcmVlKHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5pbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgkc2NvcGUucGFyYW1zW21dLnJlYWxUeXBlID09PSBcIlVuZGlyZWN0ZWRHcmFwaE5vZGVcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wYXJhbXNbbV0ucGFyYW0gIT09IFwidmFsdWVPZigpXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLmlucHV0PT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLmlucHV0ID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemUgPSAkc2NvcGUuY29uc3RydWN0VW5kaXJlY3RlZEdyYXBoKHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5pbnB1dFskc2NvcGUucGFyYW1zW21dLnBhcmFtXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYWtlSW1tdXRhYmxlKGZyZWV6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5pbnB1dCwkc2NvcGUucGFyYW1zW21dLnBhcmFtLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTpmcmVlemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLmlucHV0WyRzY29wZS5wYXJhbXNbbV0ucGFyYW1dID0gJHNjb3BlLmNvbnN0cnVjdFVuZGlyZWN0ZWRHcmFwaChyZXNwb25zZS5jb250ZW50W2lkeF0uaW5wdXRbJHNjb3BlLnBhcmFtc1ttXS5wYXJhbV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlemUgPSAkc2NvcGUuY29uc3RydWN0VW5kaXJlY3RlZEdyYXBoKHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5pbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYWtlSW1tdXRhYmxlKGZyZWV6ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XSwgXCJpbnB1dFwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnJlZXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGFibGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6dHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTp0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLmlucHV0ID0gJHNjb3BlLmNvbnN0cnVjdFVuZGlyZWN0ZWRHcmFwaChyZXNwb25zZS5jb250ZW50W2lkeF0uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnBhcmFtc1ttXS5wYXJhbSAhPT0gXCJ2YWx1ZU9mKClcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXQ9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXQgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0uaW5wdXRbJHNjb3BlLnBhcmFtc1ttXS5wYXJhbV0gPSByZXNwb25zZS5jb250ZW50W2lkeF0uaW5wdXRbJHNjb3BlLnBhcmFtc1ttXS5wYXJhbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5pbnB1dCA9IHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5pbnB1dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnJldHVyblR5cGUgPT0gJ0xpc3ROb2RlJ3x8ICRzY29wZS5yZXR1cm5UeXBlID09ICdMaW5rZWRMaXN0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0ub3V0cHV0ID0gJHNjb3BlLmNvbnN0cnVjdExpbmtlZExpc3QocmVzcG9uc2UuY29udGVudFtpZHhdLm91dHB1dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCRzY29wZS5yZXR1cm5UeXBlID09ICdUcmVlTm9kZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGlkeCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRyZWVIZXJlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuY29udGVudFtpZHhdLm91dHB1dClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLm91dHB1dCA9ICRzY29wZS5jb25zdHJ1Y3RCaW5hcnlUcmVlKHJlc3BvbnNlLmNvbnRlbnRbaWR4XS5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0ub3V0cHV0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLm91dHB1dCA9ICRzY29wZS5mbGF0dGVuZWRCaW5hcnlUcmVlKHJlc3BvbnNlTW9kaWZpZWQuY29udGVudFtpZHhdLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZU1vZGlmaWVkLmNvbnRlbnRbaWR4XS5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VNb2RpZmllZC5jb250ZW50W2lkeF0ub3V0cHV0ID0gcmVzcG9uc2UuY29udGVudFtpZHhdLm91dHB1dDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5yZXNwb25zZU1vZGlmaWVkID0gcmVzcG9uc2VNb2RpZmllZDtcblxuICAgICAgICAgICAgICAgIHZhciBwb3N0Q29kZSA9ICdcXG5zZWxmLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGZ1bmN0aW9uKGUpIHsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxudmFyIGRhdGEgPSBlLmRhdGE7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbnZhciB0ZXN0Q2FzZXMgPSBkYXRhLnRlc3RDYXNlcycrXG4gICAgICAgICAgICAgICAgICAgICdcXG5zd2l0Y2ggKGRhdGEuY21kKSB7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbmNhc2UgXCJzdGFydFwiOicrXG4gICAgICAgICAgICAgICAgICAgICdcXG5mb3IgKHZhciBpID0gMDsgaSA8IHRlc3RDYXNlcy5sZW5ndGg7IGkrKykgeycrXG4gICAgICAgICAgICAgICAgICAgICdcXG52YXIgc29sdXRpb24gPSBuZXcgU29sdXRpb24oKTsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxudmFyIGFuc3dlcjsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxuaWYgKGRhdGEucmV0dXJuVHlwZSA9PT0gXCJVbmRpcmVjdGVkR3JhcGhOb2RlXCIpIHttYWtlSW1tdXRhYmxlKHRlc3RDYXNlc1tpXS5pbnB1dCk7fScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5pZiAoKHRlc3RDYXNlc1tpXS5pbnB1dCE9PXVuZGVmaW5lZCkgJiYgKHRlc3RDYXNlc1tpXS5pbnB1dCE9PW51bGwpKXthbnN3ZXIgPSBzb2x1dGlvbi4nKyRzY29wZS5mdW5jdGlvbk5hbWUrcGFyZW50aGVzZXNQYXJhbXMrJzt9JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbmVsc2Uge2Fuc3dlciA9IHNvbHV0aW9uLicrJHNjb3BlLmZ1bmN0aW9uTmFtZSsnKCk7fScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5pZiAoZGF0YS5pblBsYWNlICE9PSB1bmRlZmluZWQpIHthbnN3ZXIgPSBkYXRhLmluUGxhY2UgPT09XCJ2YWx1ZU9mKClcIj90ZXN0Q2FzZXNbaV0uaW5wdXQ6IHRlc3RDYXNlc1tpXS5pbnB1dFtkYXRhLmluUGxhY2VdO30nK1xuICAgICAgICAgICAgICAgICAgICAnXFxuaWYgKGRhdGEucmV0dXJuVHlwZSA9PSBcIkJhbGFuY2VkIEJTVFwiKSB7dmFyIGJhbGFuY2VGbGFnID0gaXNTZWxmQmFsYW5jaW5nIChhbnN3ZXIpOyBpZiAoYmFsYW5jZUZsYWcgPT09IHRydWUgKSB7YW5zd2VyID0gaW5vcmRlclRyYXZlcnNhbChhbnN3ZXIpO30gZWxzZSB7IGFuc3dlciA9IGZsYXR0ZW5lZEJpbmFyeVRyZWUoYW5zd2VyKTsgYW5zd2VyID1cIltcIiArYW5zd2VyICtcIl0gaXMgbm90IGEgc2VsZi1iYWxhbmNpbmcgdHJlZS5cIn0gfScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5pZiAoZGF0YS5yZXR1cm5UeXBlID09IFwiVHJlZU5vZGVcIikge2Fuc3dlciA9IGZsYXR0ZW5lZEJpbmFyeVRyZWUoYW5zd2VyKTt9JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbmlmIChkYXRhLnJldHVyblR5cGUgPT0gXCJVbmRpcmVjdGVkR3JhcGhOb2RlXCIpIHt2YXIgY2hlY2sgPSBjb21wYXJlVHdvVW5kaXJlY3RlZEdyYXBoKHRlc3RDYXNlc1tpXS5pbnB1dCwgYW5zd2VyKTtpZiAodHlwZW9mIGNoZWNrID09PSBcInN0cmluZ1wiKXthbnN3ZXIgPSBjaGVjazt9IGVsc2Uge2Fuc3dlciA9IGZsYXR0ZW5VbmRpcmVjdGVkR3JhcGgoYW5zd2VyKTt9IGNvbnNvbGUubG9nKGNoZWNrKTt9JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbmlmKHRlc3RDYXNlc1tpXS5vdXRwdXQ9PT11bmRlZmluZWQgfHwgdGVzdENhc2VzW2ldLm91dHB1dCA9PT0gbnVsbCkge2lmICgoYW5zd2VyIT09IHVuZGVmaW5lZCkgJiYgKGFuc3dlciAhPT0gbnVsbCkpe3ZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6dGVzdENhc2VzW2ldLm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlciwgaW5wdXQ6IHRlc3RDYXNlc1tpXS5pbnB1dCwgaW5kZXg6aX07IHNlbGYucG9zdE1lc3NhZ2UocmVwb3J0KTsgc2VsZi5jbG9zZSgpOyBicmVhazt9IH0nK1xuICAgICAgICAgICAgICAgICAgICAnXFxuZWxzZSBpZiAodGVzdENhc2VzW2ldLm91dHB1dC5lcXVhbHMoYW5zd2VyLGRhdGEub3JkZXIpID09IGZhbHNlKSB7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbnZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6dGVzdENhc2VzW2ldLm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlciAsIGlucHV0OnRlc3RDYXNlc1tpXS5pbnB1dCwgaW5kZXg6aX0nK1xuICAgICAgICAgICAgICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICAgICAgICAgICAgICdcXG5zZWxmLmNsb3NlKCk7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbmJyZWFrOycrXG4gICAgICAgICAgICAgICAgICAgICdcXG59JytcblxuICAgICAgICAgICAgICAgICAgICAnXFxufScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5pZiAoaSA9PSBkYXRhLnRlc3RDYXNlcy5sZW5ndGgpIHsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZSh7c3RhdHVzOlwiQWNjZXB0ZWRcIn0pOycrXG4gICAgICAgICAgICAgICAgICAgICdcXG5icmVhazsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxufScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5kZWZhdWx0OicrXG4gICAgICAgICAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJVbmtub3duIGNvbW1hbmRcIn0pOycrXG4gICAgICAgICAgICAgICAgICAgICdcXG59OycrXG4gICAgICAgICAgICAgICAgICAgICdcXG59KTsnO1xuICAgICAgICAgICAgICAgIHZhciBwcmVDb2RlID0gJ1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIFNvbHV0aW9uICgpIHt9Oyc7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBwcmVDb2RlICsgJzsoZnVuY3Rpb24gc2FuZGJveCgpIHsgdmFyIHNlbGYgPSB1bmRlZmluZWQ7dmFyIHBvc3RNZXNzYWdlID0gdW5kZWZpbmVkOycgKyAkc2NvcGUuYWNlSW5pdGlhbCsnfSkoKScgKyAnXFxuJyArICRzY29wZS5jb21wYXJlICsgJHNjb3BlLmNvbXBhcmUzICsgJHNjb3BlLmNvbXBhcmU0ICsgJHNjb3BlLmNvbXBhcmU1ICsgJHNjb3BlLmNvbXBhcmU2ICskc2NvcGUuZmxhdHRlbmVkQmluYXJ5VHJlZVRleHQgKyAkc2NvcGUubWFrZUltbXV0YWJsZVRleHQgKyAkc2NvcGUuZmxhdHRlblVuZGlyZWN0ZWRHcmFwaFRleHQgKyAkc2NvcGUuY29tcGFyZVR3b1VuZGlyZWN0ZWRHcmFwaFRleHQgKyAkc2NvcGUuaXNCYWxhbmNlZEJTVFRleHQgKyAkc2NvcGUuaW5vcmRlclRyYXZlcnNhbFRleHQgKyBwb3N0Q29kZTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb2RlXSk7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2JVUkwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgICAgICB2YXIgdGltZUZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihibG9iVVJMKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5zdGF0dXMgPT0gJ0luY29ycmVjdCBBbnN3ZXInICYmIHRpbWVGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IGUuZGF0YS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhwZWN0ZWQgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUudGVzdENhc2VzW2UuZGF0YS5pbmRleF0ub3V0cHV0KSB8fCBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE91dHB1dCA9IEpTT04uc3RyaW5naWZ5KGUuZGF0YS53cm9uZ0Fuc3dlcikgfHwgXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE91dHB1dCA9IGUubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJHNjb3BlLmxhc3RPdXRwdXQgPSBKU09OLnN0cmluZ2lmeShlLmRhdGEud3JvbmdBbnN3ZXIpIHx8IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUuZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHR5cGVvZiBlLmRhdGEuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxhc3RJbnB1dCA9IEpTT04uc3RyaW5naWZ5KCRzY29wZS50ZXN0Q2FzZXNbZS5kYXRhLmluZGV4XS5pbnB1dCkgfHwgXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93V3JvbmdUZXN0Q2FzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5leGhpYml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChibG9iVVJMKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChlLmRhdGEuc3RhdHVzID09ICdBY2NlcHRlZCcgJiYgdGltZUZsYWcgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gZS5kYXRhLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXNDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhoaWJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHdvcmtlci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVzdWx0Q29kZU91dHB1dCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlcyA9IGUubWVzc2FnZS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9IG1lc3NhZ2VzWzBdO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGV0YWlscyA9IG1lc3NhZ2VzWzFdO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGluZU51bWJlciA9IGUubGluZW5vO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwoYmxvYlVSTCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5leGhpYml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsnY21kJzonc3RhcnQnLCd0ZXN0Q2FzZXMnOiRzY29wZS5yZXNwb25zZU1vZGlmaWVkLmNvbnRlbnQsICdvcmRlcic6JHNjb3BlLnJlc3VsdE9yZGVyLCAncmV0dXJuVHlwZSc6JHNjb3BlLnJldHVyblR5cGUsICdpblBsYWNlJzokc2NvcGUuaW5QbGFjZX0pO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVGbGFnPT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIkV4Y2VlZCBUaW1lIExpbWl0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXNDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4aGliaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci50ZXJtaW5hdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwyMDAwKTtcblxuXG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJHNjb3BlLnJlc3BvbnNlTW9kaWZpZWQ7XG4gICAgICAgICAgICB2YXIgcG9zdENvZGUgPSAnXFxuc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihlKSB7JytcbiAgICAgICAgICAgICAgICAnXFxudmFyIGRhdGEgPSBlLmRhdGE7JytcbiAgICAgICAgICAgICAgICAnXFxudmFyIHRlc3RDYXNlcyA9IGRhdGEudGVzdENhc2VzJytcbiAgICAgICAgICAgICAgICAnXFxuc3dpdGNoIChkYXRhLmNtZCkgeycrXG4gICAgICAgICAgICAgICAgJ1xcbmNhc2UgXCJzdGFydFwiOicrXG4gICAgICAgICAgICAgICAgJ1xcbmZvciAodmFyIGkgPSAwOyBpIDwgdGVzdENhc2VzLmxlbmd0aDsgaSsrKSB7JytcbiAgICAgICAgICAgICAgICAnXFxudmFyIHNvbHV0aW9uID0gbmV3IFNvbHV0aW9uKCk7JytcbiAgICAgICAgICAgICAgICAnXFxudmFyIGFuc3dlcjsnK1xuICAgICAgICAgICAgICAgICdcXG5pZiAoZGF0YS5yZXR1cm5UeXBlID09PSBcIlVuZGlyZWN0ZWRHcmFwaE5vZGVcIikge21ha2VJbW11dGFibGUodGVzdENhc2VzW2ldLmlucHV0KTt9JytcbiAgICAgICAgICAgICAgICAnXFxuaWYgKCh0ZXN0Q2FzZXNbaV0uaW5wdXQhPT11bmRlZmluZWQpICYmICh0ZXN0Q2FzZXNbaV0uaW5wdXQhPT1udWxsKSl7YW5zd2VyID0gc29sdXRpb24uJyskc2NvcGUuZnVuY3Rpb25OYW1lK3BhcmVudGhlc2VzUGFyYW1zKyc7fScrXG4gICAgICAgICAgICAgICAgJ1xcbmVsc2Uge2Fuc3dlciA9IHNvbHV0aW9uLicrJHNjb3BlLmZ1bmN0aW9uTmFtZSsnKCk7fScrXG4gICAgICAgICAgICAgICAgJ1xcbmlmIChkYXRhLmluUGxhY2UgIT09IHVuZGVmaW5lZCkge2Fuc3dlciA9IGRhdGEuaW5QbGFjZSA9PT1cInZhbHVlT2YoKVwiP3Rlc3RDYXNlc1tpXS5pbnB1dDogdGVzdENhc2VzW2ldLmlucHV0W2RhdGEuaW5QbGFjZV07fScrXG4gICAgICAgICAgICAgICAgJ1xcbmlmIChkYXRhLnJldHVyblR5cGUgPT0gXCJCYWxhbmNlZCBCU1RcIikge3ZhciBiYWxhbmNlRmxhZyA9IGlzU2VsZkJhbGFuY2luZyAoYW5zd2VyKTsgaWYgKGJhbGFuY2VGbGFnID09PSB0cnVlICkge2Fuc3dlciA9IGlub3JkZXJUcmF2ZXJzYWwoYW5zd2VyKTt9IGVsc2UgeyBhbnN3ZXIgPSBmbGF0dGVuZWRCaW5hcnlUcmVlKGFuc3dlcik7IGFuc3dlciA9XCJbXCIgK2Fuc3dlciArXCJdIGlzIG5vdCBhIHNlbGYtYmFsYW5jaW5nIHRyZWUuXCJ9IH0nK1xuICAgICAgICAgICAgICAgICdcXG5pZiAoZGF0YS5yZXR1cm5UeXBlID09IFwiVHJlZU5vZGVcIikge2Fuc3dlciA9IGZsYXR0ZW5lZEJpbmFyeVRyZWUoYW5zd2VyKTt9JytcbiAgICAgICAgICAgICAgICAnXFxuaWYgKGRhdGEucmV0dXJuVHlwZSA9PSBcIlVuZGlyZWN0ZWRHcmFwaE5vZGVcIikge3ZhciBjaGVjayA9IGNvbXBhcmVUd29VbmRpcmVjdGVkR3JhcGgodGVzdENhc2VzW2ldLmlucHV0LCBhbnN3ZXIpO2lmICh0eXBlb2YgY2hlY2sgPT09IFwic3RyaW5nXCIpe2Fuc3dlciA9IGNoZWNrO30gZWxzZSB7YW5zd2VyID0gZmxhdHRlblVuZGlyZWN0ZWRHcmFwaChhbnN3ZXIpO30gY29uc29sZS5sb2coY2hlY2spO30nK1xuICAgICAgICAgICAgICAgICdcXG5pZih0ZXN0Q2FzZXNbaV0ub3V0cHV0PT09dW5kZWZpbmVkIHx8IHRlc3RDYXNlc1tpXS5vdXRwdXQgPT09IG51bGwpIHtpZiAoKGFuc3dlciE9PSB1bmRlZmluZWQpICYmIChhbnN3ZXIgIT09IG51bGwpKXt2YXIgcmVwb3J0ID0ge3N0YXR1czpcIkluY29ycmVjdCBBbnN3ZXJcIiwgc2hvdWxkOnRlc3RDYXNlc1tpXS5vdXRwdXQsIHdyb25nQW5zd2VyOiBhbnN3ZXIsIGlucHV0OiB0ZXN0Q2FzZXNbaV0uaW5wdXQsIGluZGV4OiBpfTsgc2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOyBzZWxmLmNsb3NlKCk7IGJyZWFrO30gfScrXG4gICAgICAgICAgICAgICAgJ1xcbmVsc2UgaWYgKHRlc3RDYXNlc1tpXS5vdXRwdXQuZXF1YWxzKGFuc3dlcixkYXRhLm9yZGVyKSA9PSBmYWxzZSkgeycrXG4gICAgICAgICAgICAgICAgJ1xcbnZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6dGVzdENhc2VzW2ldLm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlciAsIGlucHV0OnRlc3RDYXNlc1tpXS5pbnB1dCwgaW5kZXg6IGl9JytcbiAgICAgICAgICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICAgICAgICAgJ1xcbnNlbGYuY2xvc2UoKTsnK1xuICAgICAgICAgICAgICAgICdcXG5icmVhazsnK1xuICAgICAgICAgICAgICAgICdcXG59JytcblxuICAgICAgICAgICAgICAgICdcXG59JytcbiAgICAgICAgICAgICAgICAnXFxuaWYgKGkgPT0gZGF0YS50ZXN0Q2FzZXMubGVuZ3RoKSB7JytcbiAgICAgICAgICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZSh7c3RhdHVzOlwiQWNjZXB0ZWRcIn0pOycrXG4gICAgICAgICAgICAgICAgJ1xcbmJyZWFrOycrXG4gICAgICAgICAgICAgICAgJ1xcbn0nK1xuICAgICAgICAgICAgICAgICdcXG5kZWZhdWx0OicrXG4gICAgICAgICAgICAgICAgJ1xcbnNlbGYucG9zdE1lc3NhZ2Uoe3N0YXR1czpcIlVua25vd24gY29tbWFuZFwifSk7JytcbiAgICAgICAgICAgICAgICAnXFxufTsnK1xuICAgICAgICAgICAgICAgICdcXG59KTsnO1xuICAgICAgICAgICAgdmFyIHByZUNvZGUgPSAnXCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gU29sdXRpb24gKCkge307JztcbiAgICAgICAgICAgIHZhciBjb2RlID0gcHJlQ29kZSArICc7KGZ1bmN0aW9uIHNhbmRib3goKSB7IHZhciBzZWxmID0gdW5kZWZpbmVkO3ZhciBwb3N0TWVzc2FnZSA9IHVuZGVmaW5lZDsnICsgJHNjb3BlLmFjZUluaXRpYWwrJ30pKCknICsgJ1xcbicgKyAkc2NvcGUuY29tcGFyZSArICRzY29wZS5jb21wYXJlMyArICRzY29wZS5jb21wYXJlNCArICRzY29wZS5jb21wYXJlNSArICRzY29wZS5jb21wYXJlNiArICRzY29wZS5mbGF0dGVuZWRCaW5hcnlUcmVlVGV4dCArICRzY29wZS5tYWtlSW1tdXRhYmxlVGV4dCArICRzY29wZS5mbGF0dGVuVW5kaXJlY3RlZEdyYXBoVGV4dCArICRzY29wZS5jb21wYXJlVHdvVW5kaXJlY3RlZEdyYXBoVGV4dCArICRzY29wZS5pc0JhbGFuY2VkQlNUVGV4dCArICRzY29wZS5pbm9yZGVyVHJhdmVyc2FsVGV4dCsgcG9zdENvZGU7XG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb2RlXSk7XG4gICAgICAgICAgICB2YXIgYmxvYlVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgdmFyIHRpbWVGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihibG9iVVJMKTtcbiAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEuc3RhdHVzID09ICdJbmNvcnJlY3QgQW5zd2VyJyAmJiB0aW1lRmxhZyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gZS5kYXRhLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4cGVjdGVkID0gSlNPTi5zdHJpbmdpZnkoJHNjb3BlLnRlc3RDYXNlc1tlLmRhdGEuaW5kZXhdLm91dHB1dCkgfHwgXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5sYXN0T3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoZS5kYXRhLndyb25nQW5zd2VyKSB8fCBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGFzdE91dHB1dCA9IGUubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyRzY29wZS5sYXN0T3V0cHV0ID0gSlNPTi5zdHJpbmdpZnkoZS5kYXRhLndyb25nQW5zd2VyKSB8fCBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGUuZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2codHlwZW9mIGUuZGF0YS5pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5sYXN0SW5wdXQgPSBKU09OLnN0cmluZ2lmeSgkc2NvcGUudGVzdENhc2VzW2UuZGF0YS5pbmRleF0uaW5wdXQpIHx8IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zaG93V3JvbmdUZXN0Q2FzZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIC8vdGltZUZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAncmVkJztcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmV4aGliaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChibG9iVVJMKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZS5kYXRhLnN0YXR1cyA9PSAnQWNjZXB0ZWQnICYmIHRpbWVGbGFnID09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBlLmRhdGEuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuc3RhdHVzQ29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhoaWJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHdvcmtlci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB0aW1lRmxhZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlc3VsdENvZGVPdXRwdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2VzID0gZS5tZXNzYWdlLnNwbGl0KCc6Jyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBtZXNzYWdlc1swXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGV0YWlscyA9IG1lc3NhZ2VzWzFdO1xuICAgICAgICAgICAgICAgICRzY29wZS5saW5lTnVtYmVyID0gZS5saW5lbm87XG4gICAgICAgICAgICAgICAgJHNjb3BlLnN0YXR1c0NvbG9yID0gJ3JlZCc7XG4gICAgICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO1xuICAgICAgICAgICAgICAgICRzY29wZS5leGhpYml0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsnY21kJzonc3RhcnQnLCd0ZXN0Q2FzZXMnOiRzY29wZS5yZXNwb25zZU1vZGlmaWVkLmNvbnRlbnQsICdvcmRlcic6JHNjb3BlLnJlc3VsdE9yZGVyLCAncmV0dXJuVHlwZSc6ICRzY29wZS5yZXR1cm5UeXBlLCAnaW5QbGFjZSc6JHNjb3BlLmluUGxhY2V9KTtcbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGltZUZsYWc9PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVGbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIkV4Y2VlZCBUaW1lIExpbWl0XCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5zdGF0dXNDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXhoaWJpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIudGVybWluYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKGJsb2JVUkwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sMjAwMCk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAkc2NvcGUuY29kZVN1Ym1pc3Npb25XaXRoV2ViV29ya2VyNCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcmVudGhlc2VzUGFyYW1zID0gJygnO1xuICAgICAgICB2YXIgcGFyYW1zID0gJyc7XG4gICAgICAgIGlmICgkc2NvcGUucGFyYW1zID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaz0wOyBrPCRzY29wZS5wYXJhbXMubGVuZ3RoLTE7IGsrKykge1xuICAgICAgICAgICAgICAgIHBhcmFtcyArPSAndGVzdENhc2VzW2ldLmlucHV0LicrJHNjb3BlLnBhcmFtc1trXSsnLCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJhbXMgKz0gJ3Rlc3RDYXNlc1tpXS5pbnB1dCcrJHNjb3BlLnBhcmFtc1trXTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zID0gJ3Rlc3RDYXNlc1tpXS5pbnB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50aGVzZXNQYXJhbXMgKz0gcGFyYW1zKycpJztcbiAgICB9XG5cbiAgICAkc2NvcGUuY29uc3RydWN0TGlua2VkTGlzdCA9IGZ1bmN0aW9uIChyYXdEYXRhKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyYXdEYXRhKSlcbiAgICAgICAgICAgIHJldHVybiByYXdEYXRhO1xuICAgICAgICB2YXIgaGVhZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgZm9yICh2YXIgaSA9IHJhd0RhdGEubGVuZ3RoLTE7IGk+PTA7IGktLSkge1xuICAgICAgICAgICAgdmFyIG5ld05vZGUgPSB7dmFsOiByYXdEYXRhW2ldLCBuZXh0OiBoZWFkfTtcbiAgICAgICAgICAgIGhlYWQgPSBuZXdOb2RlO1xuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWQ7XG4gICAgfTtcblxuICAgICRzY29wZS5jb25zdHJ1Y3RDeWNsZUxpc3QgPSBmdW5jdGlvbihyYXdEYXRhLCBjaXJjbGVJbmRleCkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmF3RGF0YSkpXG4gICAgICAgICAgICByZXR1cm4gcmF3RGF0YTtcbiAgICAgICAgdmFyIGhlYWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciB0YWlsLCBhbmNob3I7XG4gICAgICAgIGZvciAodmFyIGkgPSByYXdEYXRhLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBuZXdOb2RlID0ge3ZhbDogcmF3RGF0YVtpXSwgbmV4dDogaGVhZH07XG4gICAgICAgICAgICBoZWFkID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIGlmIChpID09PSByYXdEYXRhLmxlbmd0aC0xKVxuICAgICAgICAgICAgICAgIHRhaWwgPSBuZXdOb2RlO1xuICAgICAgICAgICAgaWYgKGkgPT09IGNpcmNsZUluZGV4KVxuICAgICAgICAgICAgICAgIGFuY2hvciA9IG5ld05vZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGFpbC5uZXh0ID0gYW5jaG9yO1xuICAgICAgICByZXR1cm4gaGVhZDtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmNvbnN0cnVjdEJpbmFyeVRyZWUgPSBmdW5jdGlvbiBjb25zdHJ1Y3RCaW5hcnlUcmVlKGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheSA9PT0gdW5kZWZpbmVkIHx8ICghQXJyYXkuaXNBcnJheShhcnJheSkpIHx8IGFycmF5Lmxlbmd0aD09PTB8fGFycmF5WzBdPT09JyMnKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgaGVhZCA9IHt2YWw6IGFycmF5WzBdfTtcbiAgICAgICAgcXVldWUucHVzaChoZWFkKTtcbiAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICB3aGlsZSAoaTxhcnJheS5sZW5ndGggJiYgcXVldWUubGVuZ3RoID4wKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoaSsxPGFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gYXJyYXlbKytpXTtcbiAgICAgICAgICAgICAgICBpZiAobGVmdCA9PSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQgPSB7dmFsOiBsZWZ0fTtcbiAgICAgICAgICAgICAgICAgICAgcXVldWUucHVzaChsZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGkrMTxhcnJheS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gYXJyYXlbKytpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJpZ2h0ID09ICcjJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodCA9IHt2YWw6IHJpZ2h0fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXVlLnB1c2gocmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yaWdodCA9IHJpZ2h0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhlYWQ7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLmZsYXR0ZW5lZEJpbmFyeVRyZWUgPSBmdW5jdGlvbihyb290KSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgaWYgKHJvb3QgPT09IHVuZGVmaW5lZCB8fCByb290ID09PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHF1ZXVlLnB1c2gocm9vdCk7XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGg+MCkge1xuICAgICAgICAgICAgdmFyIGN1ciA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoKGN1ciAhPT0gbnVsbCkgJiYgKGN1ciE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgcmVzLnB1c2goY3VyLnZhbCk7XG5cbiAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGN1ci5sZWZ0KTtcbiAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGN1ci5yaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzLnB1c2goXCIjXCIpO1xuXG4gICAgICAgIH1cbiAgICAgICAgdmFyIG1hcmsgPSByZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gcmVzLmxlbmd0aC0xOyBpPj0wOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChyZXNbaV0hPT1cIiNcIikge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWFyayA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcms8cmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHJlcy5sZW5ndGggLSBtYXJrO1xuICAgICAgICAgICAgcmVzLnNwbGljZShtYXJrLGxlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9O1xuXG4gICAgJHNjb3BlLmZsYXR0ZW5lZEJpbmFyeVRyZWVUZXh0ID0gJzsgZnVuY3Rpb24gZmxhdHRlbmVkQmluYXJ5VHJlZShyb290KSB7JytcbiAgICAgICAgJ3ZhciByZXMgPSBbXTsnK1xuICAgICAgICAnaWYgKHJvb3QgPT09IHVuZGVmaW5lZCB8fCByb290ID09PSBudWxsKScrXG4gICAgICAgICAgICAncmV0dXJuIHJlczsnK1xuICAgICAgICAndmFyIHF1ZXVlID0gW107JytcbiAgICAgICAgJ3F1ZXVlLnB1c2gocm9vdCk7JytcbiAgICAgICAgJ3doaWxlIChxdWV1ZS5sZW5ndGg+MCkgeycrXG4gICAgICAgICAgICAndmFyIGN1ciA9IHF1ZXVlLnNoaWZ0KCk7JytcbiAgICAgICAgICAgICdpZiAoKGN1ciAhPT0gbnVsbCkgJiYgKGN1ciE9PSB1bmRlZmluZWQpKSB7JytcbiAgICAgICAgICAgICAgICAncmVzLnB1c2goY3VyLnZhbCk7JytcbiAgICAgICAgICAgICAgICAncXVldWUucHVzaChjdXIubGVmdCk7JytcbiAgICAgICAgICAgICAgICAncXVldWUucHVzaChjdXIucmlnaHQpOycrXG4gICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAnZWxzZSB7JytcbiAgICAgICAgICAgICAgICAncmVzLnB1c2goXCIjXCIpOycrXG4gICAgICAgICAgICAnfScrXG4gICAgICAgICd9JytcbiAgICAgICAgJ3ZhciBtYXJrID0gcmVzLmxlbmd0aDsnK1xuICAgICAgICAnZm9yICh2YXIgaSA9IHJlcy5sZW5ndGgtMTsgaT49MDsgaS0tKSB7JytcbiAgICAgICAgICAgICdpZiAocmVzW2ldIT09XCIjXCIpIHsnK1xuICAgICAgICAgICAgICAgICdicmVhazsnK1xuICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgJ2Vsc2UgeycrXG4gICAgICAgICAgICAgICAgJ21hcmsgPSBpOycrXG4gICAgICAgICAgICAnfScrXG4gICAgICAgICd9JytcbiAgICAgICAgJ2lmIChtYXJrPHJlcy5sZW5ndGgpIHsnK1xuICAgICAgICAgICAgJ3ZhciBsZW4gPSByZXMubGVuZ3RoIC0gbWFyazsnK1xuICAgICAgICAgICAgJ3Jlcy5zcGxpY2UobWFyayxsZW4pOycrXG4gICAgICAgICd9JytcbiAgICAgICAgJ3JldHVybiByZXM7JytcbiAgICAnfTsnO1xuXG4gICAgJHNjb3BlLnRlc3RDYXNlU3RyaW5naWZ5ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgfTtcblxuICAgICRzY29wZS5jb25zdHJ1Y3RVbmRpcmVjdGVkR3JhcGggPSBmdW5jdGlvbihncmFwaEFycmF5KSB7XG4gICAgICAgIHZhciBxdWV1ZSA9IFtdO1xuICAgICAgICB2YXIgbWFwID0ge307XG4gICAgICAgIGlmIChncmFwaEFycmF5ID09PSB1bmRlZmluZWQgfHwgZ3JhcGhBcnJheSA9PT0gbnVsbCB8fCAhKEFycmF5LmlzQXJyYXkoZ3JhcGhBcnJheSkpfHwgZ3JhcGhBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN0YXJ0ID0ge1wibGFiZWxcIjpncmFwaEFycmF5WzBdLCBcIm5laWdoYm9yc1wiOltdfTtcbiAgICAgICAgbWFwW2dyYXBoQXJyYXlbMF1dID0gc3RhcnQ7XG4gICAgICAgIHZhciBwaXZvdCA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ3JhcGhBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGdyYXBoQXJyYXlbaV09PT1cIiNcIikge1xuICAgICAgICAgICAgICAgIHBpdm90ID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cjtcbiAgICAgICAgICAgICAgICBpZiAobWFwLmhhc093blByb3BlcnR5KGdyYXBoQXJyYXlbaV0pKVxuICAgICAgICAgICAgICAgICAgICBjdXIgPSBtYXBbZ3JhcGhBcnJheVtpXV07XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGN1ciA9IHtcImxhYmVsXCI6IGdyYXBoQXJyYXlbaV0sIFwibmVpZ2hib3JzXCI6IFtdfTtcbiAgICAgICAgICAgICAgICAgICAgbWFwW2dyYXBoQXJyYXlbaV1dID0gY3VyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocGl2b3QgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgICAgIHBpdm90ID0gY3VyO1xuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGl2b3QhPT1jdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpdm90Lm5laWdoYm9ycy5wdXNoKGN1cik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXIubmVpZ2hib3JzLnB1c2gocGl2b3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGl2b3QubmVpZ2hib3JzLnB1c2goY3VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyhtYXApO1xuICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgfTtcbiAgICAvKlxuICAgICRzY29wZS5mbGF0dGVuVW5kaXJlY3RlZEdyYXBoID0gZnVuY3Rpb24oZ3JhcGhOb2RlKSB7XG4gICAgICAgIHZhciByZXMgPSBbXTtcbiAgICAgICAgaWYgKGdyYXBoTm9kZSA9PT0gbnVsbCB8fCBncmFwaE5vZGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfVxuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgdmFyIG1hcCA9IHt9O1xuICAgICAgICB2YXIgY3VyID0gZ3JhcGhOb2RlO1xuICAgICAgICBxdWV1ZS5wdXNoKGN1cik7XG4gICAgICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjdXIgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKE51bWJlci5pc0ludGVnZXIoY3VyLmxhYmVsKSAmJiAhbWFwLmhhc093blByb3BlcnR5KGN1ci5sYWJlbCkpIHtcblxuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGN1ci5uZWlnaGJvcnMpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXIubmVpZ2hib3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuICAgICovXG5cbiAgICAkc2NvcGUuZmxhdHRlblVuZGlyZWN0ZWRHcmFwaCA9IGZ1bmN0aW9uIChncmFwaE5vZGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICBpZiAoZ3JhcGhOb2RlID09PSBudWxsIHx8IGdyYXBoTm9kZSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgdmFyIHF1ZXVlID0gW107XG4gICAgICAgIHZhciBtYXAgPSB7fTtcbiAgICAgICAgdmFyIGN1ciA9IGdyYXBoTm9kZTtcbiAgICAgICAgcXVldWUucHVzaChjdXIpO1xuICAgICAgICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY3VyID0gcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGN1ci5sYWJlbCkgJiYgIW1hcC5oYXNPd25Qcm9wZXJ0eShjdXIubGFiZWwpKSB7XG4gICAgICAgICAgICAgICAgbWFwW2N1ci5sYWJlbF0gPSBjdXI7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY3VyLm5laWdoYm9ycykpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXIubmVpZ2hib3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZS5wdXNoKGN1ci5uZWlnaGJvcnNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBvcmRlcmVkID0gW107XG4gICAgICAgIGZvciAodmFyIGsgaW4gbWFwKSB7XG4gICAgICAgICAgICBpZiAobWFwLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgb3JkZXJlZC5wdXNoKG1hcFtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb3JkZXJlZC5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLmxhYmVsIC0gYi5sYWJlbDtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3JkZXJlZC5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgaWYgKGo9PTApXG4gICAgICAgICAgICAgICAgcmVzLnB1c2gob3JkZXJlZFtqXS5sYWJlbCk7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvcmRlcmVkW2pdLm5laWdoYm9ycykpIHtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPTA7IGsgPCBvcmRlcmVkW2pdLm5laWdoYm9ycy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJlZFtqXS5uZWlnaGJvcnNba10ubGFiZWwgPj0gb3JkZXJlZFtqXS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY291bnQgPT09IDAgJiYgaj4wKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5wdXNoKG9yZGVyZWRbal0ubGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2gob3JkZXJlZFtqXS5uZWlnaGJvcnNba10ubGFiZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY291bnQ+MCB8fCBqPT09MClcbiAgICAgICAgICAgICAgICAgICAgcmVzLnB1c2goXCIjXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKHJlcy5sZW5ndGg+MCAmJiByZXNbcmVzLmxlbmd0aC0xXT09PSBcIiNcIikge1xuICAgICAgICAgICAgcmVzLnBvcCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcztcblxuICAgIH07XG5cbiAgICAkc2NvcGUuZmxhdHRlblVuZGlyZWN0ZWRHcmFwaFRleHQgPSAnZnVuY3Rpb24gZmxhdHRlblVuZGlyZWN0ZWRHcmFwaChncmFwaE5vZGUpIHsnK1xuICAgICAgICAndmFyIHJlcyA9IFtdOycrXG4gICAgICAgICdpZiAoZ3JhcGhOb2RlID09PSBudWxsIHx8IGdyYXBoTm9kZSA9PT0gdW5kZWZpbmVkKScrXG4gICAgICAgICAgICAne3JldHVybiByZXM7fScrXG4gICAgICAgICd2YXIgcXVldWUgPSBbXTsnK1xuICAgICAgICAndmFyIG1hcCA9IHt9OycrXG4gICAgICAgICd2YXIgY3VyID0gZ3JhcGhOb2RlOycrXG4gICAgICAgICdxdWV1ZS5wdXNoKGN1cik7JytcbiAgICAgICAgJ3doaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7JytcbiAgICAgICAgICAgICdjdXIgPSBxdWV1ZS5zaGlmdCgpOycrXG4gICAgICAgICAgICAnaWYgKE51bWJlci5pc0ludGVnZXIoY3VyLmxhYmVsKSAmJiAhbWFwLmhhc093blByb3BlcnR5KGN1ci5sYWJlbCkpIHsnK1xuICAgICAgICAgICAgICAgICdtYXBbY3VyLmxhYmVsXSA9IGN1cjsnK1xuICAgICAgICAgICAgICAgICdpZiAoQXJyYXkuaXNBcnJheShjdXIubmVpZ2hib3JzKSkgeycrXG4gICAgICAgICAgICAgICAgICAgICdmb3IgKHZhciBpID0gMDsgaSA8IGN1ci5uZWlnaGJvcnMubGVuZ3RoOyBpKyspIHsnK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3F1ZXVlLnB1c2goY3VyLm5laWdoYm9yc1tpXSk7JytcbiAgICAgICAgICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgICAgICd9JytcbiAgICAgICAgICAgICd9JytcbiAgICAgICAgJ30nK1xuICAgICAgICAndmFyIG9yZGVyZWQgPSBbXTsnK1xuICAgICAgICAnZm9yICh2YXIgayBpbiBtYXApIHsnK1xuICAgICAgICAgICAgJ2lmIChtYXAuaGFzT3duUHJvcGVydHkoaykpIHsnK1xuICAgICAgICAgICAgICAgICdvcmRlcmVkLnB1c2gobWFwW2tdKTsnK1xuICAgICAgICAgICAgJ30nK1xuICAgICAgICAnfScrXG4gICAgICAgICdvcmRlcmVkLnNvcnQoZnVuY3Rpb24gKGEsYikgeycrXG4gICAgICAgICAgICAncmV0dXJuIGEubGFiZWwgLSBiLmxhYmVsOycrXG4gICAgICAgICd9KTsnK1xuICAgICAgICAnZm9yICh2YXIgaiA9IDA7IGogPCBvcmRlcmVkLmxlbmd0aDsgaisrKSB7JytcbiAgICAgICAgICAgICdpZiAoaj09MCknK1xuICAgICAgICAgICAgICAgICd7cmVzLnB1c2gob3JkZXJlZFtqXS5sYWJlbCk7fScrXG4gICAgICAgICAgICAnaWYgKEFycmF5LmlzQXJyYXkob3JkZXJlZFtqXS5uZWlnaGJvcnMpKSB7JytcbiAgICAgICAgICAgICAgICAndmFyIGNvdW50ID0gMDsnK1xuICAgICAgICAgICAgICAgICdmb3IgKHZhciBrID0wOyBrIDwgb3JkZXJlZFtqXS5uZWlnaGJvcnMubGVuZ3RoOyBrKyspIHsnK1xuICAgICAgICAgICAgICAgICAgICAnaWYgKG9yZGVyZWRbal0ubmVpZ2hib3JzW2tdLmxhYmVsID49IG9yZGVyZWRbal0ubGFiZWwpIHsnK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2lmKGNvdW50ID09PSAwICYmIGo+MCknK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd7cmVzLnB1c2gob3JkZXJlZFtqXS5sYWJlbCk7fScrXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzLnB1c2gob3JkZXJlZFtqXS5uZWlnaGJvcnNba10ubGFiZWwpOycrXG4gICAgICAgICAgICAgICAgICAgICAgICAnY291bnQrKzsnK1xuICAgICAgICAgICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgICAgICdpZiAoY291bnQ+MCB8fCBqPT09MCknK1xuICAgICAgICAgICAgICAgICAgICAne3Jlcy5wdXNoKFwiI1wiKTt9JytcbiAgICAgICAgICAgICd9JytcblxuICAgICAgICAnfScrXG4gICAgICAgICd3aGlsZSAocmVzLmxlbmd0aD4wICYmIHJlc1tyZXMubGVuZ3RoLTFdPT09IFwiI1wiKSB7JytcbiAgICAgICAgICAgICdyZXMucG9wKCk7JytcbiAgICAgICAgJ30nK1xuXG4gICAgICAgICdyZXR1cm4gcmVzOycrXG5cbiAgICAnfTsnO1xuXG5cbiAgICAkc2NvcGUuY29tcGFyZUdyYXBoID0gZnVuY3Rpb24oKSB7XG5cbiAgICB9O1xuXG4gICAgJHNjb3BlLmNvbXBhcmVUd29VbmRpcmVjdGVkR3JhcGggPSBmdW5jdGlvbiBjb21wYXJlVHdvVW5kaXJlY3RlZEdyYXBoIChncmFwaE9uZSwgZ3JhcGhUd28pIHtcbiAgICAgICAgaWYgKChncmFwaE9uZSA9PT0gdW5kZWZpbmVkIHx8IGdyYXBoT25lID09PSBudWxsKSAmJiAoZ3JhcGhUd28hPT11bmRlZmluZWQgJiYgZ3JhcGhUd28hPT1udWxsKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKChncmFwaE9uZSA9PT0gdW5kZWZpbmVkIHx8IGdyYXBoT25lID09PSBudWxsKSAmJiAoZ3JhcGhUd289PT0gdW5kZWZpbmVkIHx8IGdyYXBoVHdvID09PSBudWxsKSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKGdyYXBoT25lICE9PSB1bmRlZmluZWQgJiYgZ3JhcGhPbmUgIT09IG51bGwpICYmIChncmFwaFR3bz09PXVuZGVmaW5lZCB8fCBncmFwaFR3bz09PW51bGwgKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKGdyYXBoT25lID09PSBncmFwaFR3bylcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGN1ck9uZSA9IGdyYXBoT25lO1xuICAgICAgICB2YXIgY3VyVHdvID0gZ3JhcGhUd287XG4gICAgICAgIHZhciBtYXAxID0ge30sIG1hcDI9IHt9O1xuICAgICAgICB2YXIgcXVldWUxID0gW10sIHF1ZXVlMiA9IFtdO1xuICAgICAgICBxdWV1ZTEucHVzaChjdXJPbmUpO1xuICAgICAgICBxdWV1ZTIucHVzaChjdXJUd28pO1xuICAgICAgICB3aGlsZSAocXVldWUxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBjdXJPbmUgPSBxdWV1ZTEuc2hpZnQoKTtcbiAgICAgICAgICAgIHZhciBjdXJUd28gPSBxdWV1ZTIuc2hpZnQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1ck9uZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJUd28pO1xuICAgICAgICAgICAgaWYgKChjdXJPbmUgPT09IHVuZGVmaW5lZCB8fCBjdXJPbmUgPT09IG51bGwpICYmIChjdXJUd28hPT11bmRlZmluZWQgJiYgY3VyVHdvIT09bnVsbCkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgaWYgKChjdXJPbmUgIT09IHVuZGVmaW5lZCAmJiBjdXJPbmUgIT09IG51bGwpICYmIChjdXJUd289PT11bmRlZmluZWQgfHwgY3VyVHdvPT09bnVsbCApKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChjdXJPbmUgPT09IGN1clR3bylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBpZiAoKGN1ck9uZSA9PT0gdW5kZWZpbmVkIHx8IGN1ck9uZSA9PT0gbnVsbCkgJiYgKGN1clR3bz09PSB1bmRlZmluZWQgfHwgY3VyVHdvID09PSBudWxsKSkge1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1ck9uZS5sYWJlbCE9PSBjdXJUd28ubGFiZWwpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwicHBcIik7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXAxLmhhc093blByb3BlcnR5KGN1ck9uZS5sYWJlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwMVtjdXJPbmUubGFiZWxdID0gY3VyT25lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoY3VyVHdvLm5laWdoYm9ycyl8fCBjdXJPbmUubmVpZ2hib3JzLmxlbmd0aCAhPT0gY3VyVHdvLm5laWdoYm9ycy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwcFwiKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyT25lLm5laWdoYm9ycy5zb3J0KG9yZGVyTmVpZ2hib3JzKTtcbiAgICAgICAgICAgICAgICAgICAgY3VyVHdvLm5laWdoYm9ycy5zb3J0KG9yZGVyTmVpZ2hib3JzKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJPbmUubmVpZ2hib3JzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVldWUxLnB1c2goY3VyT25lLm5laWdoYm9yc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWV1ZTIucHVzaChjdXJUd28ubmVpZ2hib3JzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJPbmUubGFiZWwgIT09IGN1clR3by5sYWJlbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBtYXhEZXB0aCAocm9vdCkge1xuICAgICAgICBpZiAocm9vdCA9PT0gbnVsbCB8fCByb290ID09PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgcmV0dXJuIDErTWF0aC5tYXgobWF4RGVwdGgocm9vdC5sZWZ0KSwgbWF4RGVwdGgocm9vdC5yaWdodCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1pbkRlcHRoIChyb290KSB7XG4gICAgICAgIGlmIChyb290ID09PSBudWxsIHx8IHJvb3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICByZXR1cm4gMStNYXRoLm1pbihtaW5EZXB0aChyb290LmxlZnQpK21pbkRlcHRoKHJvb3QucmlnaHQpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1NlbGZCYWxhbmNpbmcgKHJvb3QpIHtcbiAgICAgICAgcmV0dXJuIChtYXhEZXB0aChyb290KS1taW5EZXB0aChyb290KTw9MSlcbiAgICB9XG5cbiAgICAkc2NvcGUuaXNCYWxhbmNlZEJTVFRleHQgPSAnZnVuY3Rpb24gbWF4RGVwdGggKHJvb3QpIHsnK1xuICAgICAgICAnaWYgKHJvb3QgPT09IG51bGwgfHwgcm9vdCA9PT0gdW5kZWZpbmVkKScrXG4gICAgICAgICAgICAncmV0dXJuIDA7JytcbiAgICAgICAgJ3JldHVybiAxK01hdGgubWF4KG1heERlcHRoKHJvb3QubGVmdCksIG1heERlcHRoKHJvb3QucmlnaHQpKTsnK1xuICAgICd9JytcblxuICAgICdmdW5jdGlvbiBtaW5EZXB0aCAocm9vdCkgeycrXG4gICAgICAgICdpZiAocm9vdCA9PT0gbnVsbCB8fCByb290ID09PSB1bmRlZmluZWQpJytcbiAgICAgICAgICAgICdyZXR1cm4gMDsnK1xuICAgICAgICAncmV0dXJuIDErTWF0aC5taW4obWluRGVwdGgocm9vdC5sZWZ0KSttaW5EZXB0aChyb290LnJpZ2h0KSk7JytcbiAgICAnfScrXG5cbiAgICAnZnVuY3Rpb24gaXNTZWxmQmFsYW5jaW5nIChyb290KSB7JytcbiAgICAgICAgJ3JldHVybiAobWF4RGVwdGgocm9vdCktbWluRGVwdGgocm9vdCk8PTEpJytcbiAgICAnfSc7XG5cbiAgICAkc2NvcGUuaW5vcmRlclRyYXZlcnNhbFRleHQgPSAnZnVuY3Rpb24gaW5vcmRlclRyYXZlcnNhbCAocm9vdCkgeycrXG4gICAgICAgICd2YXIgcmVzID0gW107JytcbiAgICAgICAgJ2lmIChyb290ID09PSBudWxsIHx8IHJvb3QgPT09IHVuZGVmaW5lZCknK1xuICAgICAgICAgICAgJ3JldHVybiByZXM7JytcbiAgICAgICAgJ3ZhciBzdGFjayA9IFtdOycrXG4gICAgICAgICd3aGlsZSAoKHJvb3QhPT1udWxsICYmIHJvb3QhPT11bmRlZmluZWQpIHx8IHN0YWNrLmxlbmd0aD4wKSB7JytcbiAgICAgICAgICAgICdpZiAocm9vdCE9PSBudWxsICYmIHJvb3QhPT11bmRlZmluZWQpIHsnK1xuICAgICAgICAgICAgICAgICdzdGFjay5wdXNoKHJvb3QpOycrXG4gICAgICAgICAgICAgICAgJ3Jvb3QgPSByb290LmxlZnQ7JytcbiAgICAgICAgICAgICd9IGVsc2UgeycrXG4gICAgICAgICAgICAgICAgJ3Jvb3QgPSBzdGFjay5wb3AoKTsnK1xuICAgICAgICAgICAgICAgICdyZXMucHVzaChyb290LnZhbCk7JytcbiAgICAgICAgICAgICAgICAncm9vdCA9IHJvb3QucmlnaHQ7JytcbiAgICAgICAgICAgICd9JytcbiAgICAgICAgJ30nK1xuICAgICAgICAncmV0dXJuIHJlczsnK1xuICAgICd9JztcblxuICAgICRzY29wZS5jb21wYXJlVHdvVW5kaXJlY3RlZEdyYXBoVGV4dCA9ICdmdW5jdGlvbiBvcmRlck5laWdoYm9ycyhhLGIpIHsnK1xuICAgICAgICAncmV0dXJuIGEubGFiZWwtIGIubGFiZWw7JytcbiAgICAnfScrXG4gICAgJ2Z1bmN0aW9uIGNvbXBhcmVUd29VbmRpcmVjdGVkR3JhcGggKGdyYXBoT25lLCBncmFwaFR3bykgeycrXG4gICAgICAgICdpZiAoKGdyYXBoT25lID09PSB1bmRlZmluZWQgfHwgZ3JhcGhPbmUgPT09IG51bGwpICYmIChncmFwaFR3byE9PXVuZGVmaW5lZCAmJiBncmFwaFR3byE9PW51bGwpKScrXG4gICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG4gICAgICAgICdpZiAoKGdyYXBoT25lID09PSB1bmRlZmluZWQgfHwgZ3JhcGhPbmUgPT09IG51bGwpICYmIChncmFwaFR3bz09PSB1bmRlZmluZWQgfHwgZ3JhcGhUd28gPT09IG51bGwpKScrXG4gICAgICAgICAgICAncmV0dXJuIHRydWU7JytcbiAgICAgICAgJ2lmICgoZ3JhcGhPbmUgIT09IHVuZGVmaW5lZCAmJiBncmFwaE9uZSAhPT0gbnVsbCkgJiYgKGdyYXBoVHdvPT09dW5kZWZpbmVkIHx8IGdyYXBoVHdvPT09bnVsbCApKScrXG4gICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG5cbiAgICAgICAgJ3ZhciBjdXJPbmUgPSBncmFwaE9uZTsnK1xuICAgICAgICAndmFyIGN1clR3byA9IGdyYXBoVHdvOycrXG4gICAgICAgICd2YXIgbWFwMSA9IHt9LCBtYXAyPSB7fTsnK1xuICAgICAgICAndmFyIHF1ZXVlMSA9IFtdLCBxdWV1ZTIgPSBbXTsnK1xuICAgICAgICAncXVldWUxLnB1c2goY3VyT25lKTsnK1xuICAgICAgICAncXVldWUyLnB1c2goY3VyVHdvKTsnK1xuICAgICAgICAnd2hpbGUgKHF1ZXVlMS5sZW5ndGggPiAwKSB7JytcbiAgICAgICAgICAgICd2YXIgY3VyT25lID0gcXVldWUxLnNoaWZ0KCk7JytcbiAgICAgICAgICAgICd2YXIgY3VyVHdvID0gcXVldWUyLnNoaWZ0KCk7JytcbiAgICAgICAgICAgICdjb25zb2xlLmxvZyhjdXJPbmUpOycrXG4gICAgICAgICAgICAnY29uc29sZS5sb2coY3VyVHdvKTsnK1xuICAgICAgICAgICAgJ2lmICgoY3VyT25lID09PSB1bmRlZmluZWQgfHwgY3VyT25lID09PSBudWxsKSAmJiAoY3VyVHdvIT09dW5kZWZpbmVkICYmIGN1clR3byE9PW51bGwpKScrXG4gICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgJ2NvbnNvbGUubG9nKFwicDFcIik7JytcbiAgICAgICAgICAgICdpZiAoKGN1ck9uZSAhPT0gdW5kZWZpbmVkICYmIGN1ck9uZSAhPT0gbnVsbCkgJiYgKGN1clR3bz09PXVuZGVmaW5lZCB8fCBjdXJUd289PT1udWxsICkpJytcbiAgICAgICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG4gICAgICAgICAgICAnY29uc29sZS5sb2coXCJwMlwiKTsnK1xuICAgICAgICAgICAgJ2lmIChjdXJPbmUgPT0gY3VyVHdvKScrXG4gICAgICAgICAgICAgICAgJ3JldHVybiBcIk5vZGUgd2l0aCBsYWJlbCBcIisgY3VyT25lLmxhYmVsICsgXCIgd2FzIG5vdCBjb3BpZWQgYnV0IGEgcmVmZXJlbmNlIHRvIHRoZSBvcmlnaW5hbCBvbmUuXCI7JytcbiAgICAgICAgICAgICdjb25zb2xlLmxvZyhcIndpbj9cIik7JytcbiAgICAgICAgICAgICdpZiAoKGN1ck9uZSA9PT0gdW5kZWZpbmVkIHx8IGN1ck9uZSA9PT0gbnVsbCkgJiYgKGN1clR3bz09PSB1bmRlZmluZWQgfHwgY3VyVHdvID09PSBudWxsKSkgeycrXG5cbiAgICAgICAgICAgICd9IGVsc2UgeycrXG4gICAgICAgICAgICAgICAgJ2NvbnNvbGUubG9nKGN1ck9uZS5sYWJlbCk7IGNvbnNvbGUubG9nKGN1clR3by5sYWJlbCk7JytcbiAgICAgICAgICAgICAgICAnaWYgKGN1ck9uZS5sYWJlbCE9PSBjdXJUd28ubGFiZWwpJytcbiAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgICAgICAgICAnY29uc29sZS5sb2coXCJwM1wiKTsnK1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwcFwiKTtcbiAgICAgICAgICAgICAgICAnaWYgKCFtYXAxLmhhc093blByb3BlcnR5KGN1ck9uZS5sYWJlbCkpIHsnK1xuICAgICAgICAgICAgICAgICAgICAnbWFwMVtjdXJPbmUubGFiZWxdID0gY3VyT25lOycrXG4gICAgICAgICAgICAgICAgICAgICdpZiAoIUFycmF5LmlzQXJyYXkoY3VyVHdvLm5laWdoYm9ycyl8fCBjdXJPbmUubmVpZ2hib3JzLmxlbmd0aCAhPT0gY3VyVHdvLm5laWdoYm9ycy5sZW5ndGgpJytcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcInBwXCIpO1xuICAgICAgICAgICAgICAgICAgICAnY3VyT25lLm5laWdoYm9ycy5zb3J0KG9yZGVyTmVpZ2hib3JzKTsnK1xuICAgICAgICAgICAgICAgICAgICAnY3VyVHdvLm5laWdoYm9ycy5zb3J0KG9yZGVyTmVpZ2hib3JzKTsnK1xuICAgICAgICAgICAgICAgICAgICAnZm9yICh2YXIgaSA9IDA7IGkgPCBjdXJPbmUubmVpZ2hib3JzLmxlbmd0aDsgaSsrICkgeycrXG4gICAgICAgICAgICAgICAgICAgICAgICAncXVldWUxLnB1c2goY3VyT25lLm5laWdoYm9yc1tpXSk7JytcbiAgICAgICAgICAgICAgICAgICAgICAgICdxdWV1ZTIucHVzaChjdXJUd28ubmVpZ2hib3JzW2ldKTsnK1xuICAgICAgICAgICAgICAgICAgICAnfScrXG4gICAgICAgICAgICAgICAgJ30gZWxzZSB7JytcbiAgICAgICAgICAgICAgICAgICAgJ2lmIChjdXJPbmUubGFiZWwgIT09IGN1clR3by5sYWJlbCknK1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgICAgICd9JytcbiAgICAgICAgICAgICd9JytcbiAgICAgICAgJ30nK1xuICAgICAgICAnY29uc29sZS5sb2coXCJwYXNzXCIpO3JldHVybiB0cnVlOycrXG4gICAgJ307J1xuXG59KTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignQXBwbGljYXRpb25DdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICRzY29wZS4kb24oJ2xvZ2luJywgZnVuY3Rpb24gKF8sdXNlcikge1xuICAgICAgICAkc2NvcGUuY3VycmVudFVzZXIgPSB1c2VyO1xuXG4gICAgfSlcblxufSkiLCJcbmFuZ3VsYXIubW9kdWxlKCdhcHAnKS5zZXJ2aWNlKCdDb2RlU3ZjJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGNvbnNvbGUubG9nKCRodHRwLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLUF1dGgnXSk7XG5cbiAgICB0aGlzLmZldGNoU3VibWlzc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9zdWJtaXNzaW9ucycsIHtoZWFkZXJzOnsnWC1BdXRoJzpzZWxmLnRva2VufX0pXG5cbiAgICB9XG5cbiAgICB0aGlzLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb2RlU3VibWlzc2lvbikge1xuICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zdWJtaXNzaW9ucycsY29kZVN1Ym1pc3Npb24pXG4gICAgfVxufSlcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICBVc2VyU3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLHJlc3BvbnNlKTtcbiAgICAgICAgfSlcblxuICAgIH1cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsIFBvc3RzU3ZjKSB7XG4gICAgJHNjb3BlLmFkZFBvc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkc2NvcGUucG9zdEJvZHkpIHtcbiAgICAgICAgICAgIFBvc3RzU3ZjLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgLy91c2VybmFtZTogJ3lsMjM3NicsXG4gICAgICAgICAgICAgICAgYm9keTogJHNjb3BlLnBvc3RCb2R5XG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy51bnNoaWZ0KHBvc3QpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdEJvZHkgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgUG9zdHNTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uIChwb3N0cykge1xuICAgICAgICAkc2NvcGUucG9zdHMgPSBwb3N0cztcbiAgICB9KTtcbn0pO1xuLy9jb25zb2xlLmVycm9yKFwiaGVyZVwiKTsiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZSgnUG9zdHNTdmMnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Bvc3RzJyk7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcG9zdHMnLCBwb3N0KTtcbiAgICB9O1xuXG59KTtcbiIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5jb250cm9sbGVyKCdQcm9ibGVtQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwkcm91dGVQYXJhbXMsJGh0dHAsJHNjZSkge1xuXG4gICAgJHNjb3BlLnByb2JsZW0gPSAkcm91dGVQYXJhbXMucHJvYmxlbTtcbiAgICAkc2NvcGUucHJlQ29kZSA9ICdmdW5jdGlvbiBTb2x1dGlvbigpIHt9Oyc7XG4gICAgJHNjb3BlLnBvc3RDb2RlID0gJ1xcbmZvciAodmFyIGkgPSAwOyBpIDwgdGVzdENhc2VzLmxlbmd0aDsgaSsrKSB7JytcbiAgICAgICAgJ1xcblxcdHZhciBzb2x1dGlvbiA9IG5ldyBTb2x1dGlvbigpOycrXG4gICAgICAgICdcXG5cXHR2YXIgYW5zd2VyID0gc29sdXRpb24uZXhpc3QodGVzdENhc2VzW2ldLmlucHV0KTtjb25zb2xlLmxvZyh0ZXN0Q2FzZXNbaV0pOycrXG4gICAgICAgICdcXG5cXHRpZiAoYW5zd2VyICE9IHRlc3RDYXNlc1tpXS5vdXRwdXQpIHsnK1xuICAgICAgICAnXFxuXFx0XFx0dmFyIHJlcG9ydCA9IHtzdGF0dXM6XCJJbmNvcnJlY3QgQW5zd2VyXCIsIHNob3VsZDp0ZXN0Q2FzZXNbaV0ub3V0cHV0LCB3cm9uZ0Fuc3dlcjogYW5zd2VyfTsnK1xuICAgICAgICAnXFxuXFx0XFx0c2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICdcXG5cXHRcXHRzZWxmLmNsb3NlKCk7JytcbiAgICAgICAgJ1xcblxcdFxcdGJyZWFrOycrXG4gICAgICAgICdcXG5cXHR9JytcbiAgICAgICAgJ1xcblxcdH0nK1xuICAgICAgICAnXFxuaWYgKGk9PXRlc3RDYXNlcy5sZW5ndGgpe3NlbGYucG9zdE1lc3NhZ2Uoe3N0YXR1czpcIkFjY2VwdGVkXCJ9KX07JztcblxuICAgICRzY29wZS5wb3N0Q29kZTIgPSAnXFxuc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihlKSB7JytcbiAgICAnXFxudmFyIGRhdGEgPSBlLmRhdGE7JytcbiAgICAnXFxuc3dpdGNoIChkYXRhLmNtZCkgeycrXG4gICAgICAgICdcXG5jYXNlIFwic3RhcnRcIjonK1xuICAgICAgICAgICAgJ1xcbmZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS50ZXN0Q2FzZXMubGVuZ3RoOyBpKyspIHsnK1xuICAgICAgICAgICAgICAgICdcXG52YXIgc29sdXRpb24gPSBuZXcgU29sdXRpb24oKTsnK1xuICAgICAgICAgICAgICAgICdcXG52YXIgYW5zd2VyID0gc29sdXRpb24uZXhpc3QoZGF0YS50ZXN0Q2FzZXNbaV0uaW5wdXQpOycrXG4gICAgICAgICAgICAgICAgJ1xcbmlmIChhbnN3ZXIgIT0gZGF0YS50ZXN0Q2FzZXNbaV0ub3V0cHV0KSB7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbnZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6b3V0cHV0LCB3cm9uZ0Fuc3dlcjogYW5zd2VyfScrXG4gICAgICAgICAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHJlcG9ydCk7JytcbiAgICAgICAgICAgICAgICAgICAgJ1xcbnNlbGYuY2xvc2UoKTsnK1xuICAgICAgICAgICAgICAgICAgICAnXFxuYnJlYWs7JytcbiAgICAgICAgICAgICAgICAnXFxufScrXG5cbiAgICAgICAgICAgICdcXG59JytcbiAgICAgICAgICAgICdcXG5pZiAoaSA9PSBkYXRhLnRlc3RDYXNlcy5sZW5ndGgpIHsnK1xuICAgICAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJBY2NlcHRlZFwifSk7JytcbiAgICAgICAgICAgICAgICAnXFxuYnJlYWs7JytcbiAgICAgICAgICAgICduXFx9JytcbiAgICAgICAgJ1xcbmRlZmF1bHQ6JytcbiAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJVbmtub3duIGNvbW1hbmRcIn0pOycrXG4gICAgJ1xcbn07JytcbidcXG59KSc7XG5cbiAgICAkc2NvcGUuY29tcGFyZSA9ICdBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKGFycmF5KSB7JytcbiAgICAgICAgLy8gaWYgdGhlIG90aGVyIGFycmF5IGlzIGEgZmFsc3kgdmFsdWUsIHJldHVyblxuICAgICAgICAnaWYgKCFhcnJheSknK1xuICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuXG4gICAgICAgIC8vIGNvbXBhcmUgbGVuZ3RocyAtIGNhbiBzYXZlIGEgbG90IG9mIHRpbWVcbiAgICAgICAgJ2lmICh0aGlzLmxlbmd0aCAhPSBhcnJheS5sZW5ndGgpJytcbiAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcblxuICAgICAgICAnZm9yICh2YXIgaSA9IDAsIGw9dGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsnK1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBuZXN0ZWQgYXJyYXlzXG4gICAgICAgICAgICAnaWYgKHRoaXNbaV0gaW5zdGFuY2VvZiBBcnJheSAmJiBhcnJheVtpXSBpbnN0YW5jZW9mIEFycmF5KSB7JytcbiAgICAgICAgICAgICAgICAvLyByZWN1cnNlIGludG8gdGhlIG5lc3RlZCBhcnJheXNcbiAgICAgICAgICAgICAgICAnaWYgKCF0aGlzW2ldLmVxdWFscyhhcnJheVtpXSkpJytcbiAgICAgICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgJ30nK1xuICAgICAgICAgICAgJ2Vsc2UgaWYgKHRoaXNbaV0gIT0gYXJyYXlbaV0pIHsnK1xuICAgICAgICAgICAgICAgIC8vIFdhcm5pbmcgLSB0d28gZGlmZmVyZW50IG9iamVjdCBpbnN0YW5jZXMgd2lsbCBuZXZlciBiZSBlcXVhbDoge3g6MjB9ICE9IHt4OjIwfVxuICAgICAgICAgICAgICAgICdyZXR1cm4gZmFsc2U7JytcbiAgICAgICAgICAgICd9JytcbiAgICAgICAgJ30nK1xuICAgICAgICAncmV0dXJuIHRydWU7JytcbiAgICAnfSc7XG5cbiAgICAkc2NvcGUuY29tcGFyZTIgPSAnZnVuY3Rpb24gX19fY29tcGFyZUFycmF5X19fIChhcnJheTEsIGFycmF5MikgeycrXG4gICAgICAgICdpZiAoKCFhcnJheTEpIHx8ICghYXJyYXkyKSknK1xuICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnaWYgKGFycmF5MS5sZW5ndGggIT0gYXJyYXkyLmxlbmd0aCknK1xuICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAnZm9yICh2YXIgaSA9IDAsIGw9YXJyYXkxLmxlbmd0aDsgaTxsOyBpKyspIHsnK1xuICAgICAgICAgICAgJ2lmIChhcnJheTFbaV0gaW5zdGFuY2VvZiBBcnJheSAmJiBhcnJheTJbaV0gaW5zdGFuY2VvZiBBcnJheSkgeycrXG4gICAgICAgICAgICAgICAgJ2lmICghY29tcGFyZUFycmF5KGFycmF5MVtpXSwgYXJyYXkyW2ldKSknK1xuICAgICAgICAgICAgICAgICAgICAncmV0dXJuIGZhbHNlOycrXG5cbiAgICAgICAgICAgICd9JytcbiAgICAgICAgICAgICdlbHNlIGlmIChhcnJheTFbaV0hPWFycmF5MltpXSkgeycrXG4gICAgICAgICAgICAgICAgJ3JldHVybiBmYWxzZTsnK1xuICAgICAgICAgICAgJ30nK1xuICAgICAgICAnfScrXG4gICAgICAgICdyZXR1cm4gdHJ1ZTsnK1xuXG4gICAgJ30nO1xuXG4gICAgJHNjb3BlLl9fX2NvbXBhcmVPYmplY3RzX19fID0gZnVuY3Rpb24gX19fY29tcGFyZU9iamVjdHNfX18gKG9iamVjdDEsIG9iamVjdDIpIHtcbiAgICAgICAgdmFyIGksIGwsIGxlZnRDaGFpbiwgcmlnaHRDaGFpbjtcbiAgICAgICAgZnVuY3Rpb24gY29tcGFyZTJPYmplY3RzICh4LHkpIHtcbiAgICAgICAgICAgIHZhciBwO1xuXG4gICAgICAgICAgICBpZiAoaXNOYU4oeCkgJiYgaXNOYU4oeSkgJiYgdHlwZW9mIHggPT09ICdudW1iZXInICYmIHR5cGVvZiB5ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoeCA9PT0geSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoKHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB5ID09PSAnZnVuY3Rpb24nKSB8fFxuICAgICAgICAgICAgICAgICh4IGluc3RhbmNlb2YgRGF0ZSAmJiB5IGluc3RhbmNlb2YgRGF0ZSkgfHxcbiAgICAgICAgICAgICAgICAoeCBpbnN0YW5jZW9mIFJlZ0V4cCAmJiB5IGluc3RhbmNlb2YgUmVnRXhwKSB8fFxuICAgICAgICAgICAgICAgICh4IGluc3RhbmNlb2YgU3RyaW5nICYmIHkgaW5zdGFuY2VvZiBTdHJpbmcpIHx8XG4gICAgICAgICAgICAgICAgKHggaW5zdGFuY2VvZiAgTnVtYmVyICYmIHkgaW5zdGFuY2VvZiBOdW1iZXIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHgudG9TdHJpbmcoKSA9PT0geS50b1N0cmluZygpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh4LmlzUHJvdG90eXBlT2YoeSkgfHwgeS5pc1Byb3RvdHlwZU9mKHgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoeC5jb25zdHJ1Y3RvciAhPT0geS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHgucHJvdG90eXBlICE9PSB5LnByb3RvdHlwZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxlZnRDaGFpbi5pbmRleE9mKHgpID4gLTEgfHwgcmlnaHRDaGFpbi5pbmRleE9mKHkpID4gLTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAocCBpbiB5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHkuaGFzT3duUHJvcGVydHkocCkhPT0geC5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiB5W3BdICE9PSB0eXBlb2YgeFtwXSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHAgaW4geCkge1xuICAgICAgICAgICAgICAgIGlmICh5Lmhhc093blByb3BlcnR5KHApICE9PSB4Lmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHlbcF0gIT09IHR5cGVvZiB4W3BdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiAoeFtwXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0Q2hhaW4ucHVzaCh4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0Q2hhaW4ucHVzaCh5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb21wYXJlMk9iamVjdHMgKHhbcF0sIHlbcF0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0Q2hhaW4ucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodENoYWluLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4W3BdICE9PSB5W3BdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlOyAvL0RpZSBzaWxlbnRseT8gRG9uJ3Qga25vdyBob3cgdG8gaGFuZGxlIHN1Y2ggY2FzZSwgcGxlYXNlIGhlbHAuLi5cbiAgICAgICAgICAgIC8vIHRocm93IFwiTmVlZCB0d28gb3IgbW9yZSBhcmd1bWVudHMgdG8gY29tcGFyZVwiO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChpID0gMSwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblxuICAgICAgICAgICAgbGVmdENoYWluID0gW107IC8vVG9kbzogdGhpcyBjYW4gYmUgY2FjaGVkXG4gICAgICAgICAgICByaWdodENoYWluID0gW107XG5cbiAgICAgICAgICAgIGlmICghY29tcGFyZTJPYmplY3RzKGFyZ3VtZW50c1swXSwgYXJndW1lbnRzW2ldKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgICRzY29wZS5mbGFnID0gdHJ1ZTtcblxuXG4gICAgJHNjb3BlLmFjZUxvYWRlZCA9IGZ1bmN0aW9uIChfZWRpdG9yKSB7XG4gICAgICAgICRzY29wZS5lZGl0b3JFbWJlZCA9IF9lZGl0b3JcbiAgICAgICAgdmFyIF9zZXNzaW9uID0gX2VkaXRvci5nZXRTZXNzaW9uKClcbiAgICAgICAgdmFyIF9yZW5kZXJlciA9IF9lZGl0b3IucmVuZGVyZXJcbiAgICAgICAgJHNjb3BlLmVkaXRvckVtYmVkLnNldEZvbnRTaXplKCcxNnB4JylcblxuICAgIH1cblxuICAgICRodHRwLmdldCgnL2FwaS9wcm9ibGVtcy8nKyRzY29wZS5wcm9ibGVtKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgJHNjb3BlLmFjZUluaXRpYWwgPSByZXMuc25pcHBldC5zbGljZSgwLHJlcy5zbmlwcGV0Lmxlbmd0aCk7XG4gICAgICAgICRzY29wZS5mdW5jdGlvbk5hbWUgPSByZXMuZnVuY3Rpb25OYW1lO1xuICAgICAgICAkc2NvcGUucGFyYW1zID0gcmVzLnBhcmFtZXRlcnM7XG4gICAgICAgICRzY29wZS5mbGFnID0gZmFsc2U7XG4gICAgfSlcblxuXG5cblxuXG4gICAgLypcbiAgICAkaHR0cC5nZXQoXCIvYXBpL3Byb2JsZW1zL1wiKyRzY29wZS5wcm9ibGVtKS5zdWNjZXNzKGZ1bmN0aW9uKGRpc2NyaXB0aW9uKSB7XG4gICAgICAgICRzY29wZS5pbnNlcnRIdG1sID0gZGlzY3JpcHRpb247XG4gICAgICAgIGNvbnNvbGUubG9nKGRpc2NyaXB0aW9uKVxuXG4gICAgfSlcblxuICAgICRzY29wZS5yZW5kZXJIdG1sID0gZnVuY3Rpb24oaHRtbF9jb2RlKSB7XG4gICAgICAgIHJldHVybiAkc2NlLnRydXN0QXNIdG1sKGh0bWxfY29kZSlcbiAgICB9XG5cbiAgICAqL1xuXG5cblxuICAgICRzY29wZS5jb2RlU3VibWlzc2lvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBcdC8vY29uc29sZS5sb2coJHNjb3BlLmVkaXRvckVtYmVkLmdldFZhbHVlKCkpO1xuICAgIFx0Ly9ldmFsKCRzY29wZS5lZGl0b3JFbWJlZC5nZXRWYWx1ZSgpKTtcbiAgICBcdFxuICAgIFx0dmFyIG9sZFNjcmlwdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzY3JpcHRDb250YWluZXInKTtcbiAgICBcdFxuICAgIFx0dmFyIG5ld1NjcmlwdDtcblxuICAgIFx0aWYgKG9sZFNjcmlwdCkge1xuICAgIFx0XHRvbGRTY3JpcHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChvbGRTY3JpcHQpXG4gICAgXHR9XG5cbiAgICBcdG5ld1NjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpXG4gICAgXHRuZXdTY3JpcHQuaWQgPSAnc2NyaXB0Q29udGFpbmVyJ1xuICAgIFx0bmV3U2NyaXB0LnRleHQgPSAkc2NvcGUuZWRpdG9yRW1iZWQuZ2V0VmFsdWUoKStcIjtjb25zb2xlLmxvZyhcIiskc2NvcGUuZmxhZytcIilcIlxuXG4gICAgXHRkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdjb250YWluZXInKVswXS5hcHBlbmRDaGlsZChuZXdTY3JpcHQpXG4gICAgXHRcbiAgICBcdFxuICAgIH1cblxuICAgICRzY29wZS5wdXJlQ29kZVN1Ym1pc3Npb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb2RlID0gJHNjb3BlLmFjZUluaXRpYWw7XG4gICAgICAgIENvZGVTdmMuY3JlYXRlKGNvZGUpO1xuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNvZGVTdWJtaXNzaW9uV2l0aFdlYldvcmtlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3Rlc3RzLycrJHNjb3BlLnByb2JsZW0udG9Mb3dlckNhc2UoKSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coSlNPTi5wYXJzZShyZXNwb25zZS5jb250ZW50KSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5jb250ZW50KTtcbiAgICAgICAgICAgIHZhciBwcmVDb2RlID0gJHNjb3BlLnByZUNvZGU7XG4gICAgICAgICAgICB2YXIgcG9zdENvZGUgPSAnJztcbiAgICAgICAgICAgIHZhciBjb2RlID0gJ3ZhciB0ZXN0Q2FzZXMgPSAnK0pTT04uc3RyaW5naWZ5KHJlc3BvbnNlLmNvbnRlbnQpKyc7ZnVuY3Rpb24gU29sdXRpb24oKSB7fTsnKyRzY29wZS5hY2VJbml0aWFsKyRzY29wZS5wb3N0Q29kZTI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb2RlKVxuICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29kZV0pO1xuICAgICAgICAgICAgdmFyIGJsb2JVUkwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKGJsb2JVUkwpO1xuICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KVxuXG4gICAgfVxuXG4gICAgJHNjb3BlLmNvZGVTdWJtaXNzaW9uV2l0aFdlYldvcmtlcjIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXJlbnRoZXNlc1BhcmFtcyA9ICcoJ1xuICAgICAgICB2YXIgcGFyYW1zID0gJydcbiAgICAgICAgaWYgKCRzY29wZS5wYXJhbXMgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrPTA7IGs8JHNjb3BlLnBhcmFtcy5sZW5ndGgtMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zICs9ICd0ZXN0Q2FzZXNbaV0uaW5wdXQuJyskc2NvcGUucGFyYW1zW2tdKycsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcyArPSAndGVzdENhc2VzW2ldLmlucHV0LicrJHNjb3BlLnBhcmFtc1trXTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcGFyYW1zID0gJ3Rlc3RDYXNlc1tpXS5pbnB1dCc7XG4gICAgICAgIH1cbiAgICAgICAgcGFyZW50aGVzZXNQYXJhbXMgKz0gcGFyYW1zKycpJztcbiAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL3Rlc3RzLycrJHNjb3BlLnByb2JsZW0udG9Mb3dlckNhc2UoKSkuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHZhciBwb3N0Q29kZSA9ICdcXG5mb3IgKHZhciBpID0gMDsgaSA8IHRlc3RDYXNlcy5sZW5ndGg7IGkrKykgeycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdHZhciBzb2x1dGlvbiA9IG5ldyBTb2x1dGlvbigpOycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdHZhciBhbnN3ZXIgPSBzb2x1dGlvbi4nKyRzY29wZS5mdW5jdGlvbk5hbWUrcGFyZW50aGVzZXNQYXJhbXMrJzsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHRpZiAoYW5zd2VyLmVxdWFscyh0ZXN0Q2FzZXNbaV0ub3V0cHV0KSA9PSBmYWxzZSkgeycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdFxcdHZhciByZXBvcnQgPSB7c3RhdHVzOlwiSW5jb3JyZWN0IEFuc3dlclwiLCBzaG91bGQ6dGVzdENhc2VzW2ldLm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlcn07JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0XFx0c2VsZi5wb3N0TWVzc2FnZShyZXBvcnQpOycrXG4gICAgICAgICAgICAgICAgJ1xcblxcdFxcdHNlbGYuY2xvc2UoKTsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHRcXHRicmVhazsnK1xuICAgICAgICAgICAgICAgICdcXG5cXHR9JytcbiAgICAgICAgICAgICAgICAnXFxuXFx0fScrXG4gICAgICAgICAgICAgICAgJ1xcbmlmIChpPT10ZXN0Q2FzZXMubGVuZ3RoKXtzZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJBY2NlcHRlZFwifSl9Oyc7XG4gICAgICAgICAgICB2YXIgcHJlQ29kZSA9ICd2YXIgdGVzdENhc2VzID0gJytKU09OLnN0cmluZ2lmeShyZXNwb25zZS5jb250ZW50KSsnO2Z1bmN0aW9uIFNvbHV0aW9uKCkge307JztcbiAgICAgICAgICAgIHZhciAgY29kZSA9IHByZUNvZGUgKyAkc2NvcGUuYWNlSW5pdGlhbCArICdcXG4nKyRzY29wZS5jb21wYXJlICsgcG9zdENvZGU7XG4gICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb2RlXSk7XG4gICAgICAgICAgICB2YXIgYmxvYlVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoYmxvYlVSTCk7XG4gICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAkc2NvcGUuY29kZVN1Ym1pc3Npb25XaXRoV2ViV29ya2VyMyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHBhcmVudGhlc2VzUGFyYW1zID0gJygnXG4gICAgICAgIHZhciBwYXJhbXMgPSAnJ1xuICAgICAgICBpZiAoJHNjb3BlLnBhcmFtcyA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGs9MDsgazwkc2NvcGUucGFyYW1zLmxlbmd0aC0xOyBrKyspIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMgKz0gJ3Rlc3RDYXNlc1tpXS5pbnB1dC4nKyRzY29wZS5wYXJhbXNba10rJywnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyYW1zICs9ICd0ZXN0Q2FzZXNbaV0uaW5wdXQnKyRzY29wZS5wYXJhbXNba107XG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFtcyA9ICd0ZXN0Q2FzZXNbaV0uaW5wdXQnO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudGhlc2VzUGFyYW1zICs9IHBhcmFtcysnKSc7XG4gICAgICAgICRodHRwLmdldCgnL2FwaS90ZXN0cy8nKyRzY29wZS5wcm9ibGVtLnRvTG93ZXJDYXNlKCkpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICB2YXIgcG9zdENvZGUgPSAnXFxuc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihlKSB7JytcbiAgICAgICAgICAgICAgICAnXFxudmFyIGRhdGEgPSBlLmRhdGE7JytcbiAgICAgICAgICAgICAgICAnXFxuc3dpdGNoIChkYXRhLmNtZCkgeycrXG4gICAgICAgICAgICAgICAgJ1xcbmNhc2UgXCJzdGFydFwiOicrXG4gICAgICAgICAgICAgICAgJ1xcbmZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS50ZXN0Q2FzZXMubGVuZ3RoOyBpKyspIHsnK1xuICAgICAgICAgICAgICAgICdcXG52YXIgc29sdXRpb24gPSBuZXcgU29sdXRpb24oKTsnK1xuICAgICAgICAgICAgICAgICdcXG52YXIgYW5zd2VyID0gc29sdXRpb24uJyskc2NvcGUuZnVuY3Rpb25OYW1lK3BhcmVudGhlc2VzUGFyYW1zKyc7JytcbiAgICAgICAgICAgICAgICAnXFxuaWYgKGFuc3dlciAhPSBkYXRhLnRlc3RDYXNlc1tpXS5vdXRwdXQpIHsnK1xuICAgICAgICAgICAgICAgICdcXG52YXIgcmVwb3J0ID0ge3N0YXR1czpcIkluY29ycmVjdCBBbnN3ZXJcIiwgc2hvdWxkOm91dHB1dCwgd3JvbmdBbnN3ZXI6IGFuc3dlcn0nK1xuICAgICAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHJlcG9ydCk7JytcbiAgICAgICAgICAgICAgICAnXFxuc2VsZi5jbG9zZSgpOycrXG4gICAgICAgICAgICAgICAgJ1xcbmJyZWFrOycrXG4gICAgICAgICAgICAgICAgJ1xcbn0nK1xuXG4gICAgICAgICAgICAgICAgJ1xcbn0nK1xuICAgICAgICAgICAgICAgICdcXG5pZiAoaSA9PSBkYXRhLnRlc3RDYXNlcy5sZW5ndGgpIHsnK1xuICAgICAgICAgICAgICAgICdcXG5zZWxmLnBvc3RNZXNzYWdlKHtzdGF0dXM6XCJBY2NlcHRlZFwifSk7JytcbiAgICAgICAgICAgICAgICAnXFxuYnJlYWs7JytcbiAgICAgICAgICAgICAgICAnblxcfScrXG4gICAgICAgICAgICAgICAgJ1xcbmRlZmF1bHQ6JytcbiAgICAgICAgICAgICAgICAnXFxuc2VsZi5wb3N0TWVzc2FnZSh7c3RhdHVzOlwiVW5rbm93biBjb21tYW5kXCJ9KTsnK1xuICAgICAgICAgICAgICAgICdcXG59OycrXG4gICAgICAgICAgICAgICAgJ1xcbn0pJztcbiAgICAgICAgICAgIHZhciBjb2RlID0gJHNjb3BlLmFjZUluaXRpYWwgKyBwb3N0Q29kZTtcbiAgICAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2NvZGVdKTtcbiAgICAgICAgICAgIHZhciBibG9iVVJMID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihibG91YlVSTCk7XG4gICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7J2NtZCc6J3N0YXJ0JywndGVzdENhc2VzJzpyZXNwb25zZS5jb250ZW50fSlcblxuXG5cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAkc2NvcGUuZXh0cmFjdEZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuXG4gICAgfVxuXG4gICAgJHNjb3BlLnVuaXRUZXN0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgfVxuXG4gICAgJHNjb3BlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICBcdFxuICAgIH1cblxuICAgICRzY29wZS5wdXJpZnkgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICB9XG5cbiAgICAkc2NvcGUuY29uc3RydWN0TGlua2VkTGlzdCA9IGZ1bmN0aW9uIChyYXdEYXRhKSB7XG4gICAgICAgIHZhciBoZWFkID0gdW5kZWZpbmVkO1xuICAgICAgICBmb3IgKHZhciBpID0gcmF3RGF0YS5sZW5ndGgtMTsgaT49MDsgaS0tKSB7XG4gICAgICAgICAgICB2YXIgbmV3Tm9kZSA9IHt2YWw6IHJhd0RhdGFbaV0sIG5leHQ6IGhlYWR9O1xuICAgICAgICAgICAgaGVhZCA9IG5ld05vZGU7XG5cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGVhZDtcbiAgICB9XG5cbiAgICAkc2NvcGUuY29uc3RydWN0VHJlZSA9IGZ1bmN0aW9uIChyYXdEYXRhKSB7XG4gICAgICAgIHZhciByb290ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcXVldWUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGk8IHJhd0RhdGEubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByb290O1xuXG5cbiAgICB9XG5cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ1Byb2JsZW1zQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSwkaHR0cCwkbG9jYXRpb24sIFByb2JzU3ZjKSB7XG4gICAgUHJvYnNTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uIChwcm9ibGVtcykge1xuICAgICAgICAkc2NvcGUucHJvYmxlbXMgPSBwcm9ibGVtcztcbiAgICB9KVxuICAgICRzY29wZS5zZWFyY2hGbGFnID0gZmFsc2U7XG4gICAgJHNjb3BlLndob2xlVGFibGUgPSB0cnVlO1xuICAgICRzY29wZS5wcmVkaWNhdGUgPSBcIlwiO1xuICAgICRzY29wZS5yZXZlcnNlID0gZmFsc2U7XG4gICAgJHNjb3BlLnNlbGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZygkc2NvcGUuc2VhcmNoS2V5d29yZHMpO1xuICAgICAgICBpZiAoJHNjb3BlLnNlYXJjaEtleXdvcmRzPT09XCJcIikge1xuICAgICAgICAgICAgJHNjb3BlLndob2xlVGFibGUgPSB0cnVlO1xuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEZsYWcgPSBmYWxzZTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkID0gW107XG4gICAgICAgICAgICAkc2NvcGUud2hvbGVUYWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgJHNjb3BlLnNlYXJjaEZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAkc2NvcGUucHJvYmxlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2JsZW1zW2ldLm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5zZWFyY2hLZXl3b3Jkcy50b0xvd2VyQ2FzZSgpKSE9LTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQucHVzaCgkc2NvcGUucHJvYmxlbXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJHNjb3BlLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAkc2NvcGUucHJpbnRPdXQgPSBmdW5jdGlvbihvKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKG8pO1xuICAgIH1cblxuICAgICRzY29wZS5nZXRQcm9ibGVtID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKVxuXG4gICAgfVxuXG5cbiAgICAkc2NvcGUuc29ydEJ5ID0gZnVuY3Rpb24gKGNvbHVtbikge1xuICAgICAgICBpZiAoY29sdW1uID09PSAnZGlmZmljdWx0eScpXG4gICAgICAgICAgICAkc2NvcGUucHJlZGljYXRlID0gJHNjb3BlLmRpZmZpY3VsdHlSYW5rO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICAkc2NvcGUucHJlZGljYXRlID0gY29sdW1uO1xuICAgICAgICAkc2NvcGUucmV2ZXJzZSA9ICEkc2NvcGUucmV2ZXJzZTtcbiAgICB9XG5cbiAgICAkc2NvcGUuZGlmZmljdWx0eVJhbmsgPSBmdW5jdGlvbihwcm9ibGVtKSB7XG4gICAgICAgIGlmIChwcm9ibGVtLmRpZmZpY3VsdHkgPT09ICdIYXJkJylcbiAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICBlbHNlIGlmIChwcm9ibGVtLmRpZmZpY3VsdHkgPT09ICdNZWRpdW0nKVxuICAgICAgICAgICAgcmV0dXJuIDI7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgIH1cblxuXG5cblxuXG59KSIsImFuZ3VsYXIubW9kdWxlKCdhcHAnKS5zZXJ2aWNlKCdQcm9ic1N2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICAgIHRoaXMuZmV0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvYmxlbXMnKTtcbiAgICB9XG59KVxuXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBVc2VyU3ZjKSB7XG4gICAgJHNjb3BlLmF2YWlsYWJsZUZsYWcgPSB0cnVlXG4gICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSBVc2VyU3ZjLnJlZ2lzdGVyKHVzZXJuYW1lLHBhc3N3b3JkKVxuICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJlc3BvbnNlLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlcj09PXRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmF2YWlsYWJsZUZsYWcgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmF2YWlsYWJsZUZsYWcgPSB0cnVlXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnbG9naW4nLHVzZXIpXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG5cblxuICAgIH1cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbnRyb2xsZXIoJ3Jlc3VsdEN0cmwnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cbn0pIiwiYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIpIHtcbiAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAud2hlbignLycse2NvbnRyb2xsZXI6J1Bvc3RzQ3RybCcsIHRlbXBsYXRlVXJsOidwb3N0cy5odG1sJ30pXG4gICAgICAgIC53aGVuKCcvcmVnaXN0ZXInLCB7Y29udHJvbGxlcjonUmVnaXN0ZXJDdHJsJywgdGVtcGxhdGVVcmw6ICdyZWdpc3Rlci5odG1sJ30pXG4gICAgICAgIC53aGVuKCcvbG9naW4nLHtjb250cm9sbGVyOidMb2dpbkN0cmwnLCB0ZW1wbGF0ZVVybDogJ2xvZ2luLmh0bWwnfSlcbiAgICAgICAgLndoZW4oJy9wcm9ibGVtcycse2NvbnRyb2xsZXI6J1Byb2JsZW1zQ3RybCcsIHRlbXBsYXRlVXJsOidwcm9ibGVtcy5odG1sJ30pXG4gICAgICAgIC8vLndoZW4oJy9wcm9ibGVtcy86cHJvYmxlbScse2NvbnRyb2xsZXI6J1Byb2JsZW1DdHJsJyx0ZW1wbGF0ZVVybDogKVxuICAgICAgICAud2hlbignL3Byb2JsZW1zLzpwcm9ibGVtJyx7Y29udHJvbGxlcjonUHJvYmxlbUN0cmwnLHRlbXBsYXRlVXJsOiBmdW5jdGlvbihwYXJhbXMpIHtyZXR1cm4gcGFyYW1zLnByb2JsZW0rJy5odG1sJ319KVxuICAgICAgICAud2hlbignL3N1Ym1pc3Npb25zJyx7Y29udHJvbGxlcjonU3VibWlzc2lvbnNDb250cm9sbGVyJywgdGVtcGxhdGVVcmw6ICdzdWJtaXNzaW9ucy5odG1sJ30pXG4gICAgICAgIC53aGVuKCcvcHJvYnMvOnByb2JsZW0nLCB7Y29udHJvbGxlcjonUHJvYkNvbnRyb2xsZXInLCB0ZW1wbGF0ZVVybDogJ3Byb2JsZW0uaHRtbCd9KVxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignU3VibWlzc2lvbkNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG5cbn0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignU3VibWlzc2lvbkhpc3RvcnlDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwkcm91dGVQYXJhbXMpIHtcblxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuY29udHJvbGxlcignU3VibWlzc2lvbnNDb250cm9sbGVyJyxmdW5jdGlvbiAoJHNjb3BlLCRodHRwKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICRodHRwLmdldCgnL2FwaS9zdWJtaXNzaW9ucycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHN1Ym1pc3Npb25zKSB7XG4gICAgICAgICRzY29wZS5zdWJtaXNzaW9ucyA9IHN1Ym1pc3Npb25zO1xuXG4gICAgfSlcblxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZSgnU3VibWlzc2lvbnNTdmMnICwgZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmdldFN1Ym1pc3Npb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkaHR0cC5nZXQoJy9hcGkvc3VibWlzc2lvbnMnKVxuICAgIH1cblxuICAgIHRoaXMuYWRkU3VibWlzc2lvbiA9IGZ1bmN0aW9uIChjb2RlKSB7XG4gICAgICAgICRodHRwLnBvc3QoJy9hcGkvc3VibWlzc2lvbnMnLCBjb2RlKVxuICAgIH1cblxuICAgIHRoaXMuZ2V0U3VibWlzc2lvbkhpc3RvcnkgPSBmdW5jdGlvbiAocHJvYmxlbSkge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3N1Ym1pc3Npb25oaXN0b3J5Jyxwcm9ibGVtKVxuICAgIH1cblxuICAgIHRoaXMuZ2V0U2luZ2xlU3VibWlzc2lvbiA9IGZ1bmN0aW9uIChzdWJtaXNzaW9uSW5mbykge1xuICAgICAgICAkaHR0cC5wb3N0KCcvYXBpL3N1Ym1pc3Npb25EZXRhaWwnLHN1Ym1pc3Npb25JbmZvKVxuICAgIH1cblxufSkiLCJhbmd1bGFyLm1vZHVsZSgnYXBwJykuc2VydmljZSgnVXNlclN2YycsIGZ1bmN0aW9uICgkaHR0cCkge1xuICAgIHZhciBzdmMgPSB0aGlzO1xuICAgIHN2Yy5nZXRVc2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzJyx7XG4gICAgICAgICAgICBoZWFkZXJzOiB7J1gtQXV0aCc6IHN2Yy50b2tlbn1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzdmMubG9naW4gPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Nlc3Npb25zJyx7XG4gICAgICAgICAgICB1c2VybmFtZTp1c2VybmFtZSwgcGFzc3dvcmQ6cGFzc3dvcmRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgc3ZjLnRva2VuID0gdmFsLmRhdGE7XG4gICAgICAgICAgICAgICAgJGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtQXV0aCddPSB2YWwuZGF0YVxuICAgICAgICAgICAgICAgIHJldHVybiBzdmMuZ2V0VXNlcigpO1xuICAgICAgICAgICAgfSlcblxuICAgIH1cbiAgICBzdmMucmVnaXN0ZXIgPSBmdW5jdGlvbiAodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZmxhZykge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmxhZylcbiAgICAgICAgICAgICAgICBpZiAoZmxhZy5kYXRhPT1cInRydWVcIikge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHVzZWQpXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VkJylcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3ZjLmxvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pXG5cbiAgICB9XG59KSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==